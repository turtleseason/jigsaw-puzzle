{"version":3,"sources":["util.js","Edges.js","Sides.js","EdgePathDrawer.js","EdgeStyleInfo.js","Piece.js","PieceModel.js","Puzzle.js","DetailsModal.js","PuzzleTitle.js","ImageInfo.js","images/ito-jakuchu-red-parrot-on-the-branch-of-a-tree.jpg","images/david-clode-eOSqRq2Qm1c-unsplash.jpg","images/casey-horner-80UR4DM2Rz0-unsplash.jpg","images/van-gogh-roses-nga.jpg","images/scott-webb-lYzgtps0UtQ-unsplash.jpg","images/travel-sourced-FsmcD6uKcHk-unsplash.jpg","providedImages.js","PuzzleControls.js","index.js"],"names":["range","i","Array","from","keys","randomInt","max","Math","floor","random","BUMP","RECESS","FLAT","getRandomEdgeType","types","length","LEFT","TOP","RIGHT","BOTTOM","Sides","Symbol","iterator","EdgePathDrawer","pieceWidth","pieceHeight","borderSize","this","START","templates","makeTemplates","pW","pH","b","w","o","c1","c2","side","edgeStyleInfo","start","end","mid","type","key","EdgeStyleInfo","neckWidth","offset","control1","control2","other","edge","Error","getOppositeEdge","Piece","props","bgPos","model","backgroundPositionString","left","top","clipPathString","getClipPathString","edgeDrawer","getPathString","edges","className","blockPointerEvents","tempid","onPointerDown","e","style","backgroundPosition","clipPath","width","height","pos","zIndex","PureComponent","PieceModel","col","row","neighbors","group","Puzzle","innerWidth","imgWidth","cols","innerHeight","imgHeight","rows","min","pointerDownHandlers","map","handlePointerDown","bind","nextzIndex","pieces","createPieces","groups","keyToValueFunc","obj","objectMap","state","gameComplete","draggedPiece","setScaleFactor","resizeListener","window","addEventListener","removeEventListener","widthScale","document","documentElement","clientWidth","heightScale","clientHeight","setState","scaleFactor","spacing","availableKeys","keysByGridPos","fill","keyIndex","splice","getRandomPosition","getBackgroundPosition","createEdge","opposite","piece","alignWith","snapRange","abs","g1","g2","concat","refPiece","k","p","alignPiece","isPrimary","pointerType","button","slice","offsetX","clientX","offsetY","clientY","hitElement","elementFromPoint","classList","contains","neighbor","isTouching","mergeGroups","Object","board","boardStyle","transform","children","renderPiece","onPointerMove","handlePointerMove","onPointerUp","handlePointerUp","Component","DetailsModal","image","body","source","credit","nameIsTitle","name","author","ModalBody","Row","Col","md","src","url","sourceName","class","href","sourceUrl","target","rel","description","Modal","toggle","toggleModal","isOpen","centered","ModalHeader","PuzzleTitle","modalOpen","puzzleImage","isPhoto","title","info","onClick","ImageInfo","defaultRows","defaultCols","shortName","ImageSource","providedImages","img1","img2","img3","img4","img5","img6","PuzzleControls","fileInput","React","createRef","selectedPreset","presetImages","userImage","handleSelectChange","handleFileChange","handleDimensionsChange","handleDimensionsBlur","handleRadioKeyDown","useUserImage","usePresetImage","newPuzzle","usingUserImage","invalidUserImage","id","getElementById","focus","preventDefault","select","selectedIndex","img","file","current","files","fileUrl","URL","createObjectURL","testLoader","Image","onerror","revokeObjectURL","onload","dim","generateDefaultDimensions","naturalWidth","naturalHeight","aspect","x","clamp","round","valueAsNumber","validateDimension","value","val","result","parseInt","isNaN","selectedImage","setProperty","sizeTester","console","log","options","push","rowsVal","colsVal","presetBtnStyle","userBtnStyle","readOnly","checked","onKeyDown","htmlFor","onChange","renderSelectOptions","CustomInput","accept","innerRef","invalid","onBlur","disabled","puzzleKey","ReactDOM","render","StrictMode","renderPuzzle","columns"],"mappings":"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","file":"static/js/main.dbc3ff32.chunk.js","sourcesContent":["// Returns an array containing int values from 0 (inclusive) to i (exclusive).\r\nexport function range(i) {\r\n    return Array.from(Array(i).keys());\r\n}\r\n\r\n// Returns a random integer between 0 (inclusive) and max (exclusive).\r\nexport function randomInt(max) {\r\n    return Math.floor(Math.random() * Math.floor(max));\r\n}\r\n\r\n// Restricts x to the range between min and max (inclusive).\r\nexport function clamp(x, min, max) {\r\n    if (min > max) {\r\n        throw Error(`clamp: min (${min}) is greater than max (${max}).`);\r\n    }\r\n    return Math.max(Math.min(x, max), min);\r\n}\r\n\r\n// Creates an object where the \"keys\" iterable provides the keys\r\n// and each value is the result of passing its corresponding key to keyToValueFunc.\r\nexport function objectMap(keys, keyToValueFunc) {\r\n    const obj = {};\r\n    for (const i of keys) {\r\n        obj[i] = keyToValueFunc(i);\r\n    }\r\n    return obj;\r\n}","import { randomInt } from './util';\r\n\r\n\r\nexport const BUMP = 'b';\r\nexport const RECESS = 'r';\r\nexport const FLAT = 'f';\r\n\r\n// Excludes FLAT since that edge type isn't assigned randomly.\r\nexport function getRandomEdgeType() {\r\n\tconst types = [BUMP, RECESS];\r\n\treturn types[randomInt(types.length)];\r\n}\r\n\r\nexport function getOppositeEdge(edge) {\r\n\tswitch(edge) {\r\n\t\tcase BUMP:\r\n\t\t\treturn RECESS;\r\n\t\tcase RECESS:\r\n\t\t\treturn BUMP;\r\n\t\tdefault:\r\n\t\t\tthrow Error(`getOppositeEdge: ${edge} does not have an opposite edge type`);\r\n\t}\r\n}","export const LEFT = 'Left';\r\nexport const TOP = 'Top';\r\nexport const RIGHT = 'Right';\r\nexport const BOTTOM = 'Bottom';\r\n\r\n// Use this to iterate through all four sides in a consistent order.\r\nexport const Sides = {\r\n    *[Symbol.iterator]() {\r\n        yield LEFT;\r\n        yield TOP;\r\n        yield RIGHT;\r\n        yield BOTTOM;\r\n    }\r\n}","import { BUMP, RECESS, FLAT } from './Edges';\r\nimport { LEFT, TOP, RIGHT, BOTTOM } from './Sides';\r\n\r\n\r\nexport default class EdgePathDrawer {\r\n\tconstructor(pieceWidth, pieceHeight, borderSize) {\r\n\t\tthis.START = 'START';\r\n\t\tthis.templates = this.makeTemplates(pieceWidth, pieceHeight, borderSize)\r\n\t}\r\n\r\n\tmakeTemplates(pW, pH, b) {\r\n\t\tconst templates = {};\r\n\r\n\t\ttemplates[this.START] = `M ${b} ${pH - b} `;\r\n\r\n\t\ttemplates[BUMP + LEFT] = (w, o, c1, c2) => `V ${(pH + w) / 2}`\t\r\n\t\t\t+ `C ${b - o} ${pH / 2 + c1} ${0} ${pH / 2 + c2} ${0} ${pH / 2} `\r\n\t\t\t+ `C ${0} ${pH / 2 - c2} ${b - o} ${pH / 2 - c1} ${b} ${(pH - w) / 2} `;\r\n\t\ttemplates[RECESS + LEFT] = (w, o, c1, c2) => `V ${(pH + w) / 2}`\r\n\t\t\t+ `C ${b + o} ${pH / 2 + c1} ${b * 2} ${pH / 2 + c2} ${b * 2} ${pH / 2} `\r\n\t\t\t+ `C ${b * 2} ${pH / 2 - c2} ${b + o} ${pH / 2 - c1} ${b} ${(pH - w) / 2} `;\r\n\t\ttemplates[LEFT] = `V ${b} `;\r\n\r\n\t\ttemplates[BUMP + TOP] = (w, o, c1, c2) => `H ${(pW - w) / 2} `\r\n\t\t\t+ `C ${pW / 2 - c1} ${b - o} ${pW / 2 - c2} ${0} ${pW / 2} ${0} `\r\n\t\t\t+ `C ${pW / 2 + c2} ${0} ${pW / 2 + c1} ${b - o} ${(pW + w) / 2} ${b} `;\r\n\t\ttemplates[RECESS + TOP] = (w, o, c1, c2) => `H ${(pW - w) / 2} `\r\n\t\t\t+ `C ${pW / 2 - c1} ${b + o}  ${pW / 2 - c2} ${b * 2} ${pW / 2} ${b * 2} `\r\n\t\t\t+ `C ${pW / 2 + c2} ${b * 2} ${pW / 2 + c1} ${b + o} ${(pW + w) / 2} ${b} `;\r\n\t\ttemplates[TOP] = `H ${pW - b} `;\r\n\r\n\t\ttemplates[BUMP + RIGHT] = (w, o, c1, c2) => `V ${(pH - w) / 2} `\r\n\t\t\t+ `C ${pW - b + o} ${pH / 2 - c1} ${pW} ${pH / 2 - c2} ${pW} ${pH / 2} `\r\n\t\t\t+ `C ${pW} ${pH / 2 + c2} ${pW - b + o} ${pH / 2 + c1} ${pW - b} ${(pH + w) / 2} `;\r\n\t\ttemplates[RECESS + RIGHT] = (w, o, c1, c2) => `V ${(pH - w) / 2} `\r\n\t\t\t+ `C ${pW - b - o} ${pH / 2 - c1} ${pW - b * 2} ${pH / 2 - c2} ${pW - b * 2} ${pH / 2} `\r\n\t\t\t+ `C ${pW - b * 2} ${pH / 2 + c2} ${pW - b - o} ${pH / 2 + c1} ${pW - b} ${(pH + w) / 2} `;\r\n\t\ttemplates[RIGHT] = `V ${pH - b} `;\r\n\r\n\t\ttemplates[BUMP + BOTTOM] = (w, o, c1, c2) => `H ${(pW + w) / 2} `\r\n\t\t\t+ `C ${pW / 2 + c1} ${pH - b + o} ${pW / 2 + c2} ${pH} ${pW / 2} ${pH} `\r\n\t\t\t+ `C ${pW / 2 - c2} ${pH} ${pW / 2 - c1} ${pH - b + o} ${(pW - w) / 2} ${pH - b} `;\r\n\t\ttemplates[RECESS + BOTTOM] = (w, o, c1, c2) => `H ${(pW + w) / 2} `\r\n\t\t\t+ `C ${pW / 2 + c1} ${pH - b - o}  ${pW / 2 + c2} ${pH - b * 2} ${pW / 2} ${pH - b * 2} `\r\n\t\t\t+ `C ${pW / 2 - c2} ${pH - b * 2} ${pW / 2 - c1} ${pH - b - o} ${(pW - w) / 2} ${pH - b} `;\r\n\t\ttemplates[BOTTOM] = `Z`;\r\n\r\n\t\treturn templates;\r\n\t}\r\n\r\n\tgetPathString(side, edgeStyleInfo) {\r\n\t\tconst start = (side === LEFT) ? this.templates[this.START] : '';\r\n\t\tconst end = this.templates[side];\r\n\r\n\t\tlet mid = '';\r\n\t\tif (edgeStyleInfo.type !== FLAT) {\r\n\t\t\tconst key = edgeStyleInfo.type + side;\r\n\t\t\tmid = this.templates[key](edgeStyleInfo.w, edgeStyleInfo.o, edgeStyleInfo.c1, edgeStyleInfo.c2);\r\n\t\t}\r\n\r\n\t\treturn start + mid + end;\r\n\t}\r\n}","import { getOppositeEdge } from './Edges';\r\n\r\n\r\n// Contains the properties needed to draw a specific puzzle piece edge:\r\n// its overall type (bump, recess, flat) and any constants needed to define its shape.\r\nexport default class EdgeStyleInfo {\r\n\tconstructor(type, neckWidth, offset, control1, control2) {\r\n\t\tthis.type = type;\r\n\t\tthis.w = neckWidth;\t\t// The width of the area where the bump meets the edge of the piece.\r\n\t\tthis.o = offset;\t\t// Controls the distance between the widest part of the bump and the edge of the piece.\r\n\t\tthis.c1 = control1;\t\t// Controls the width of the widest part of the bump.\r\n\t\tthis.c2 = control2;\t\t// Controls the width near the tallest part of the bump (affects the smoothness/pointiness of the curve).\r\n\t}\r\n\r\n    // Returns an EdgeStyleInfo object for an edge that fits with this one:\r\n    // if this is a bump edge, opposite() returns a matching recess edge, and vice-versa.\r\n    // Will fail if called on a flat edge.\r\n\topposite() {\r\n\t\tconst other = {...this};\r\n\t\tother.type = getOppositeEdge(this.type);\r\n\t\treturn other;\r\n\t}\r\n}","import { PureComponent } from 'react';\r\nimport { Sides } from './Sides';\r\n\r\n\r\nexport default class Piece extends PureComponent {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst bgPos = this.props.model.bgPos;\r\n\t\t// These will never change over the lifetime of the object, so just calculate them once\r\n\t\tthis.backgroundPositionString = `${bgPos.left}px ${bgPos.top}px`;\r\n\t\tthis.clipPathString = this.getClipPathString(this.props.edgeDrawer);\r\n\t}\r\n\t\r\n\tgetClipPathString(edgeDrawer) {\r\n\t\tlet clipPathString = 'path(\\'';\r\n\t\tfor (const side of Sides) {\r\n\t\t\tclipPathString += edgeDrawer.getPathString(side, this.props.model.edges[side]);\r\n\t\t}\r\n\t\treturn clipPathString + '\\')';\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst model = this.props.model;\r\n\t\tconst className = 'puzzle-piece' + (this.props.blockPointerEvents ? ' block-pointer-events' : '');\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tclassName={className}\r\n\t\t\t\ttempid={model.key}\r\n\t\t\t\tonPointerDown={(e) => this.props.onPointerDown(e)}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackgroundPosition: this.backgroundPositionString,\r\n\t\t\t\t\tclipPath: this.clipPathString,\r\n\t\t\t\t\twidth: this.props.width,\r\n\t\t\t\t\theight: this.props.height,\r\n\t\t\t\t\tleft: model.pos.left,\r\n\t\t\t\t\ttop: model.pos.top,\r\n\t\t\t\t\tzIndex: (model.zIndex > 0 ? model.zIndex : 'auto')\r\n\t\t\t\t}}>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","export default class PieceModel {\r\n\t// By default, a new piece is inserted into the group with the same id as its key\r\n\tconstructor(key, col, row, pos, bgPos, zIndex, edges, neighbors) {\r\n\t\tthis.key = key;\r\n\t\tthis.group = key;\r\n\t\tthis.col = col;\r\n\t\tthis.row = row;\r\n\t\tthis.pos = pos;\r\n\t\tthis.bgPos = bgPos;\r\n\t\tthis.zIndex = zIndex;\r\n\t\tthis.edges = edges;\r\n\t\tthis.neighbors = neighbors;\r\n\t}\r\n}","import { Component } from 'react';\r\nimport EdgePathDrawer from './EdgePathDrawer';\r\nimport EdgeStyleInfo from './EdgeStyleInfo';\r\nimport Piece from './Piece';\r\nimport PieceModel from './PieceModel';\r\n\r\nimport { getRandomEdgeType, getOppositeEdge } from './Edges';\r\nimport { BUMP, RECESS, FLAT } from './Edges';\r\nimport { LEFT, TOP, RIGHT, BOTTOM, Sides } from './Sides';\r\nimport { range, randomInt, objectMap } from './util';\r\n\r\nimport './Puzzle.css';\r\n\r\n\r\nconst MAX_WIDTH_SCALE = .7;  // The maximum percentage of the window width that the puzzle image should take up. \r\nconst MAX_HEIGHT_SCALE = .7;  // The maximum percentage of the window height that the puzzle image should take up. \r\n\r\nexport default class Puzzle extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.innerWidth =  this.props.imgWidth / this.props.cols;\t\r\n\t\tthis.innerHeight = this.props.imgHeight / this.props.rows;\r\n\t\tthis.borderSize = Math.min(this.innerHeight, this.innerWidth) / 4;\r\n\t\tthis.pieceWidth = 2 * this.borderSize + this.innerWidth;\r\n\t\tthis.pieceHeight = 2 * this.borderSize + this.innerHeight;\r\n\r\n\t\tthis.pointerDownHandlers = range(this.props.rows * this.props.cols).map(i => this.handlePointerDown.bind(this, i));\r\n\t\tthis.edgeDrawer = new EdgePathDrawer(this.pieceWidth, this.pieceHeight, this.borderSize);\r\n\t\tthis.nextzIndex = 1;\r\n\r\n\t\tconst pieces = this.createPieces();\r\n\t\tconst groups = objectMap(range(pieces.length), (i) => [i]);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpieces: pieces,\r\n\t\t\tgroups: groups,\r\n\t\t\tgameComplete: false,\r\n\t\t\tdraggedPiece: null,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setScaleFactor();\r\n\r\n\t\tthis.resizeListener = this.setScaleFactor.bind(this);\r\n\t\twindow.addEventListener('resize', this.resizeListener);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener('resize', this.resizeListener);\r\n\t}\r\n\r\n\tsetScaleFactor() {\r\n\t\tconst widthScale = MAX_WIDTH_SCALE * document.documentElement.clientWidth / this.props.imgWidth;\r\n\t\tconst heightScale = MAX_HEIGHT_SCALE * document.documentElement.clientHeight / this.props.imgHeight;\r\n\t\tthis.setState({scaleFactor: Math.min(widthScale, heightScale)});\r\n\t}\r\n\r\n\tgetGridPosition(col, row, spacing) {\r\n\t\tconst left = (this.innerWidth + spacing) * col - this.borderSize;\r\n\t\tconst top = (this.innerHeight + spacing) * row - this.borderSize;\r\n\t\treturn {left: left, top: top};\r\n\t}\r\n\t\r\n\tgetRandomPosition() {\r\n\t\tconst left = Math.random() * (.2 * this.props.imgWidth);\r\n\t\tconst top = Math.random() * (this.props.imgHeight - this.pieceHeight);\r\n\t\treturn {left: left, top: top};\r\n\t}\r\n\t\r\n\tgetBackgroundPosition(col, row) {\r\n\t\tconst left = - (this.innerWidth * col) + this.borderSize;\r\n\t\tconst top = -(this.innerHeight * row) + this.borderSize;\r\n\t\treturn {left: left, top: top};\r\n\t}\r\n\t\r\n\tcreateEdge(type) {\r\n\t\tconst neckWidth = this.borderSize * (.8 + Math.random() * .45);\r\n\t\tconst offset = this.borderSize * (.4 + Math.random() * .1);\r\n\t\tconst c1 = (neckWidth > this.borderSize) ? neckWidth * (.75 + Math.random() * .25)\r\n\t\t\t\t\t: this.borderSize * (.85 + Math.random() * .35);\r\n\t\tconst c2 = neckWidth * (.5 + Math.random() * .15);\r\n\t\treturn new EdgeStyleInfo(type, neckWidth, offset, c1, c2);\r\n\t}\r\n\r\n\tcreatePieces() {\r\n\t\tconst pieces = [];\r\n\t\tconst availableKeys = range(this.props.cols * this.props.rows);\r\n\t\t// Use map() instead of fill() to ensure that each inner array is a unique object.\r\n\t\tconst keysByGridPos = Array(this.props.cols).fill(null).map(() => Array(this.props.rows));\r\n\t\t\r\n\t\tfor (let col = 0; col < this.props.cols; col++) {\r\n\t\t\tfor (let row = 0; row < this.props.rows; row++) {\r\n\t\t\t\tconst keyIndex = randomInt(availableKeys.length);\r\n\t\t\t\tconst key = availableKeys.splice(keyIndex, 1)[0];\r\n\t\t\t\tkeysByGridPos[col][row] = key;\r\n\t\t\t\t\r\n\t\t\t\t// const pos = this.getGridPosition(col, row, 0);\r\n\t\t\t\tconst pos = this.getRandomPosition();\r\n\t\t\t\tconst bgPos = this.getBackgroundPosition(col, row);\r\n\r\n\t\t\t\tconst neighbors = {};\r\n\t\t\t\tif (col > 0) {\r\n\t\t\t\t\tneighbors[LEFT] = keysByGridPos[col - 1][row];\r\n\t\t\t\t\tpieces[neighbors[LEFT]].neighbors[RIGHT] = key;\r\n\t\t\t\t}\r\n\t\t\t\tif (row > 0) {\r\n\t\t\t\t\tneighbors[TOP] = keysByGridPos[col][row - 1];\r\n\t\t\t\t\tpieces[neighbors[TOP]].neighbors[BOTTOM] = key;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst edges = {};\r\n\t\t\t\tedges[LEFT] = (col === 0) ? this.createEdge(FLAT) : pieces[neighbors[LEFT]].edges[RIGHT].opposite();\r\n\t\t\t\tedges[TOP] = (row === 0) ? this.createEdge(FLAT) : pieces[neighbors[TOP]].edges[BOTTOM].opposite();\r\n\t\t\t\tedges[RIGHT] = (col === this.props.cols - 1) ? this.createEdge(FLAT) : this.createEdge(getRandomEdgeType());\r\n\t\t\t\tedges[BOTTOM] = (row === this.props.rows - 1) ? this.createEdge(FLAT) : this.createEdge(getRandomEdgeType());\r\n\t\t\t\t\r\n\t\t\t\tpieces[key] = new PieceModel(key, col, row, pos, bgPos, 0, edges, neighbors);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn pieces;\r\n\t}\r\n\r\n\talignPiece(piece, alignWith) {\r\n\t\tpiece.pos = {left: alignWith.pos.left + this.innerWidth * (piece.col - alignWith.col),\r\n\t\t\t\t\t top: alignWith.pos.top + this.innerHeight * (piece.row - alignWith.row)};\r\n\t}\r\n\t\r\n\tisTouching(piece, side, other) {\r\n\t\tconst snapRange = 7 / this.state.scaleFactor;\r\n\t\tif (side === RIGHT) {\r\n\t\t\treturn Math.abs(piece.pos.top - other.pos.top) <= snapRange\r\n\t\t\t\t&& Math.abs((other.pos.left - piece.pos.left) - this.innerWidth) <= snapRange;\r\n\t\t} else if (side === LEFT) {\r\n\t\t\treturn Math.abs(piece.pos.top - other.pos.top) <= snapRange\r\n\t\t\t\t&& Math.abs((piece.pos.left - other.pos.left) - this.innerWidth) <= snapRange;\r\n\t\t} else if (side === TOP) {\r\n\t\t\treturn Math.abs(piece.pos.left - other.pos.left) <= snapRange\r\n\t\t\t\t&& Math.abs((piece.pos.top - other.pos.top) - this.innerHeight) <= snapRange;\r\n\t\t} else if (side === BOTTOM) {\r\n\t\t\treturn Math.abs(piece.pos.left - other.pos.left) <= snapRange\r\n\t\t\t\t&& Math.abs((other.pos.top - piece.pos.top) - this.innerHeight) <= snapRange;\r\n\t\t}\r\n\t}\r\n\r\n\tmergeGroups(pieces, groups, g1, g2) {\r\n\t\tgroups[g1] = groups[g1].concat(groups[g2]);\r\n\t\tconst refPiece = pieces[groups[g1][0]];\r\n\t\tfor (const k of groups[g2]) {\r\n\t\t\tconst p = {...pieces[k]};\r\n\t\t\tp.group = g1;\r\n\t\t\tp.zIndex = refPiece.zIndex;\r\n\t\t\tthis.alignPiece(p, refPiece);\r\n\t\t\tpieces[k] = p;\r\n\t\t}\r\n\t\tdelete groups[g2];\r\n\t}\r\n\r\n\thandlePointerDown(key, e) {\r\n\t\tif (this.state.draggedPiece !== null || !e.isPrimary || (e.pointerType === 'mouse' && e.button !== 0)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst pieces = this.state.pieces.slice();\r\n\t\tfor (const k of this.state.groups[pieces[key].group]) {\r\n\t\t\tpieces[k] = {...pieces[k]};\r\n\t\t\tpieces[k].zIndex = this.nextzIndex;\r\n\t\t}\r\n\t\tthis.nextzIndex++;\r\n\r\n\t\tthis.setState({\r\n\t\t\tpieces: pieces,\r\n\t\t\tdraggedPiece: key,\r\n\t\t\toffsetX: e.clientX - (this.state.pieces[key].pos.left * this.state.scaleFactor),\r\n\t\t\toffsetY: e.clientY - (this.state.pieces[key].pos.top * this.state.scaleFactor)\r\n\t\t});\r\n\r\n\t}\r\n\r\n\thandlePointerMove(e) {\r\n\t\tif (this.state.draggedPiece === null || !e.isPrimary) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t// Ignore events from touches that started within puzzle area but moved out of bounds\r\n\t\tconst hitElement = document.elementFromPoint(e.clientX, e.clientY);\r\n\t\tif (!hitElement || !hitElement.classList.contains('puzzle-area')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst key = this.state.draggedPiece;\r\n\t\tconst pieces = this.state.pieces.slice();\r\n\t\t\r\n\t\tconst p = {...pieces[key]};\r\n\t\tpieces[key] = p;\r\n\t\t\r\n\t\tconst left = (e.clientX - this.state.offsetX) / this.state.scaleFactor;\r\n\t\tconst top = (e.clientY - this.state.offsetY) / this.state.scaleFactor;\r\n\t\tp.pos = {left: left, top: top };\r\n\r\n\t\tfor (const k of this.state.groups[p.group]) {\r\n\t\t\tpieces[k] = {...pieces[k]};\r\n\t\t\tthis.alignPiece(pieces[k], p);\r\n\t\t}\r\n\t\tthis.setState({pieces: pieces});\r\n\t}\r\n\r\n\thandlePointerUp() {\r\n\t\tif (this.state.draggedPiece === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst key = this.state.draggedPiece;\r\n\t\tconst groups = {...this.state.groups};\r\n\t\tconst pieces = this.state.pieces.slice();\r\n\r\n\t\tfor (const k of this.state.groups[pieces[key].group]) {\r\n\t\t\tconst p = pieces[k];\r\n\t\t\tfor (const side of Sides) {\r\n\t\t\t\tconst neighbor = pieces[p.neighbors[side]];\r\n\t\t\t\tif (neighbor && neighbor.group !== p.group && this.isTouching(p, side, neighbor)) {\r\n\t\t\t\t\tthis.mergeGroups(pieces, groups, p.group, neighbor.group);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst gameComplete = Object.keys(groups).length === 1;\r\n\t\tthis.setState({groups: groups, pieces: pieces, draggedPiece: null, gameComplete: gameComplete});\r\n\t}\r\n\r\n\trenderPiece(model) {\r\n\t\treturn (\r\n\t\t\t<Piece key={model.key}\r\n\t\t\t\tmodel={model}\r\n\t\t\t\twidth={this.pieceWidth}\r\n\t\t\t\theight={this.pieceHeight}\r\n\t\t\t\t// isDragged={model.group === this.state.pieces[this.state.draggedPiece].group}\r\n\t\t\t\tblockPointerEvents={this.state.draggedPiece !== null}\r\n\t\t\t\tedgeDrawer={this.edgeDrawer}\r\n\t\t\t\tonPointerDown={this.pointerDownHandlers[model.key]}/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst boardStyle = {transform: `scale(${this.state.scaleFactor})`, width: (100 / this.state.scaleFactor) + '%', height: (100 / this.state.scaleFactor) + '%'};\r\n\r\n\t\tlet board;\r\n\t\tif (this.state.gameComplete) {\r\n\t\t\tboard = (<div className='puzzle-area puzzle-complete' style={boardStyle}></div>);\r\n\t\t} else {\r\n\t\t\tconst children = this.state.pieces.map(model => this.renderPiece(model));\r\n\t\t\tboard = (\r\n\t\t\t\t<div \r\n\t\t\t\t\tclassName={'puzzle-area' + (this.state.draggedPiece !== null ? ' no-scroll' : '')}\r\n\t\t\t\t\tonPointerMove={(e) => this.handlePointerMove(e)}\r\n\t\t\t\t\tonPointerUp={() => this.handlePointerUp()}\r\n\t\t\t\t\tstyle={boardStyle}>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className='puzzle-container mt-2 pb-3'>\r\n\t\t\t\t<div className='puzzle-background'></div>\r\n\t\t\t\t{board}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import { Component } from 'react';\r\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\r\nimport { Container, Row, Col } from 'reactstrap';\r\n\r\n\r\nexport default class DetailsModal extends Component {\r\n    render() {\r\n        const image = this.props.image;\r\n        \r\n        let body = '';\r\n        if (image && image.source) {\r\n                const credit = (image.source.nameIsTitle ? image.name : 'Photo') + ' by ' + image.author;\r\n                body = ( \r\n                    <ModalBody>\r\n                        <Row>\r\n                            <Col md='8'><img src={image.url} width='100%'/></Col>\r\n                            <Col md='4' className='mt-3 mt-md-0 pl-md-0'>\r\n                                <p>{credit}</p>\r\n                                <p>Source: {image.source.sourceName}</p>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className='mt-md-3'>\r\n                            <Col>\r\n                                <p class=\"text-break\">\r\n                                    See the original at: <a href={image.source.sourceUrl} target='_blank' rel='external noopener'>{image.source.sourceUrl}</a>\r\n                                </p>\r\n                                {image.source.description ? <p>{image.source.description}</p> : null}\r\n                            </Col>\r\n                        </Row>\r\n                    </ModalBody>\r\n                ); \r\n            }\r\n\r\n        return(\r\n            <Modal toggle={this.props.toggleModal} isOpen={this.props.isOpen} centered={true}> \r\n                <ModalHeader toggle={this.props.toggleModal}>Image details</ModalHeader>\r\n                {body}\r\n            </Modal>\r\n        );  \r\n    }\r\n}","import { Component } from 'react';\r\nimport DetailsModal from './DetailsModal';\r\n\r\n\r\nexport default class PuzzleTitle extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.state = {modalOpen: false};\r\n    }\r\n\r\n    toggleModal() {\r\n        this.setState((state) => { return {modalOpen: !state.modalOpen} });\r\n    }\r\n\r\n    render() {\r\n        const puzzleImage = this.props.puzzleImage;\r\n        if (!puzzleImage) {\r\n            return null;\r\n        }\r\n\r\n        const isPhoto = puzzleImage.source && puzzleImage.source.isPhoto;\r\n        const nameIsTitle = puzzleImage.source && puzzleImage.source.nameIsTitle;\r\n\r\n        const title = nameIsTitle ? <em>{puzzleImage.name}</em> : '';\r\n        let author = '';\r\n        if (puzzleImage.author) {\r\n            if (nameIsTitle) {\r\n                author += `, ${isPhoto ? ' photo' : ''} by `;\r\n            } else if (isPhoto) {\r\n                author += 'Photo by ';\r\n            } else {\r\n                author += 'By '\r\n            }\r\n            author += puzzleImage.author;\r\n        }\r\n        const info = puzzleImage.source ? <button type='button' className='btn btn-link btn-sm text-muted px-1' onClick={this.toggleModal}>more info</button> : '';\r\n\r\n        return (\r\n            <div className='container-fluid container-md mt-3'>\r\n                <div className='row justify-content-center flex-sm-nowrap mx-n2'>\r\n                    <div className='col-2 d-none d-md-block px-2'> </div> \r\n                    <div className='col-auto flex-shrink-1 px-2'>\r\n                        <p className='h5'>{title}{author}</p>\r\n                    </div>\r\n                    <div className='col-auto col-sm-2 px-2'>{info}</div>\r\n                </div>\r\n                <DetailsModal toggleModal={this.toggleModal} isOpen={this.state.modalOpen} image={puzzleImage} />\r\n            </div>);\r\n    }\r\n}","export class ImageInfo {\r\n    constructor(name, url, defaultRows, defaultCols, author, source, shortName) {\r\n        this.name = name;\r\n        this.url = url;\r\n        this.defaultRows = defaultRows;\r\n        this.defaultCols = defaultCols;\r\n        this.author = author;\r\n        this.source = source;\r\n        this.shortName = shortName ?? name;\r\n    }\r\n}\r\n\r\nexport class ImageSource {\r\n    constructor(sourceName, nameIsTitle=false, isPhoto=false, sourceUrl='', description='') {\r\n        this.sourceName = sourceName;\r\n        this.nameIsTitle = nameIsTitle;\r\n        this.sourceUrl = sourceUrl;\r\n        this.isPhoto = isPhoto;\r\n        this.description = description;\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/ito-jakuchu-red-parrot-on-the-branch-of-a-tree.a8f36cd5.jpg\";","export default __webpack_public_path__ + \"static/media/david-clode-eOSqRq2Qm1c-unsplash.42540cb6.jpg\";","export default __webpack_public_path__ + \"static/media/casey-horner-80UR4DM2Rz0-unsplash.001ae9f7.jpg\";","export default __webpack_public_path__ + \"static/media/van-gogh-roses-nga.8fa9d120.jpg\";","export default __webpack_public_path__ + \"static/media/scott-webb-lYzgtps0UtQ-unsplash.509dd0a5.jpg\";","export default __webpack_public_path__ + \"static/media/travel-sourced-FsmcD6uKcHk-unsplash.97041d06.jpg\";","import { ImageInfo, ImageSource } from './ImageInfo';\r\n\r\nimport img1 from './images/ito-jakuchu-red-parrot-on-the-branch-of-a-tree.jpg';\r\nimport img2 from './images/david-clode-eOSqRq2Qm1c-unsplash.jpg';\r\nimport img3 from './images/casey-horner-80UR4DM2Rz0-unsplash.jpg';\r\nimport img4 from './images/van-gogh-roses-nga.jpg';\r\nimport img5 from './images/scott-webb-lYzgtps0UtQ-unsplash.jpg';\r\nimport img6 from './images/travel-sourced-FsmcD6uKcHk-unsplash.jpg';\r\n\r\n\r\nconst providedImages = [\r\n    new ImageInfo('Red Parrot on the Branch of a Tree', img1, 6, 8, 'Itō Jakuchū', \r\n        new ImageSource('Metropolitan Museum of Art', true, false, 'https://www.metmuseum.org/art/collection/search/57123'), 'Red Parrot'),\r\n    new ImageInfo('Coral', img2, 7, 10, 'David Clode',\r\n        new ImageSource('Unsplash', false, true, 'https://unsplash.com/photos/eOSqRq2Qm1c')),\r\n    new ImageInfo('Starry Sky', img3, 7, 10, 'Casey Horner',\r\n        new ImageSource('Unsplash', false, true, 'https://unsplash.com/photos/80UR4DM2Rz0')),\r\n    new ImageInfo('Roses', img4, 8, 10, 'Vincent van Gogh',\r\n        new ImageSource('National Gallery of Art', true, false, 'https://www.nga.gov/collection/art-object-page.72328.html')),\r\n    new ImageInfo('Succulents', img5, 8, 5, 'Scott Webb',\r\n        new ImageSource('Unsplash', false, true, 'https://unsplash.com/photos/lYzgtps0UtQ')),\r\n    new ImageInfo('Jellyfish', img6, 7, 10, 'Travel Sourced',\r\n        new ImageSource('Unsplash', false, true, 'https://unsplash.com/photos/FsmcD6uKcHk'))\r\n];\r\n\r\nexport default providedImages;","import React, { Component } from 'react';\r\nimport { CustomInput } from 'reactstrap';\r\nimport { ImageInfo } from './ImageInfo';\r\n\r\nimport { clamp } from './util';\r\n\r\nimport presetImages from './providedImages';\r\n\r\n\r\nconst minPuzzleDimension = 2;\r\nconst maxPuzzleDimension = 25;\r\n\r\nexport default class PuzzleControls extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.fileInput = React.createRef();\r\n\r\n        this.selectedPreset = presetImages[0];\r\n        this.userImage = null;\r\n        \r\n        this.handleSelectChange = this.handleSelectChange.bind(this);\r\n        this.handleFileChange = this.handleFileChange.bind(this);\r\n        this.handleDimensionsChange = this.handleDimensionsChange.bind(this);\r\n        this.handleDimensionsBlur = this.handleDimensionsBlur.bind(this);\r\n        this.handleRadioKeyDown = this.handleRadioKeyDown.bind(this);\r\n        this.useUserImage = this.useUserImage.bind(this);\r\n        this.usePresetImage = this.usePresetImage.bind(this);\r\n        this.newPuzzle = this.newPuzzle.bind(this);\r\n        \r\n        this.state = {\r\n            usingUserImage: false,\r\n            invalidUserImage: false,\r\n            rows: presetImages[0].defaultRows,\r\n            cols: presetImages[0].defaultCols\r\n        };\r\n    }\r\n\r\n    get selectedImage () {\r\n        return this.state.usingUserImage ? this.userImage : this.selectedPreset;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.newPuzzle();\r\n    }\r\n\r\n    usePresetImage() {\r\n        this.setState({usingUserImage: false});\r\n    }\r\n\r\n    useUserImage() {\r\n        this.setState({usingUserImage: true});\r\n    }\r\n\r\n    // Maintain arrow key navigation between the radio buttons even though they aren't\r\n    // actually part of the same radio group (so that they can be separate tab stops).\r\n    handleRadioKeyDown(e) {\r\n        switch(e.key) {\r\n            case 'ArrowLeft':\r\n            case 'ArrowUp':\r\n            case 'Left':\r\n            case 'Up':\r\n                if (e.target.id === 'radioBtn2') {\r\n                    document.getElementById('radioBtn1').focus();\r\n                    e.preventDefault();\r\n                }\r\n                return;\r\n            case 'ArrowRight':\r\n            case 'ArrowDown':\r\n            case 'Down':\r\n            case 'Right':\r\n                if (e.target.id === 'radioBtn1') {\r\n                    document.getElementById('radioBtn2').focus();\r\n                    e.preventDefault();\r\n                }\r\n                return;\r\n        }\r\n    }\r\n\r\n    handleSelectChange(e) {\r\n        this.usePresetImage();\r\n\r\n        const select = e.target;\r\n        if (select.selectedIndex !== -1) {\r\n            const img = presetImages[select.selectedIndex];\r\n            this.selectedPreset = img;\r\n            this.setState({rows: img.defaultRows, cols: img.defaultCols});\r\n        }\r\n    }\r\n\r\n    handleFileChange() {\r\n        this.useUserImage();\r\n\r\n        const file = this.fileInput.current.files[0];\r\n        const fileUrl = URL.createObjectURL(file);\r\n\r\n        const testLoader = new Image();\r\n        testLoader.onerror = () => {\r\n            URL.revokeObjectURL(fileUrl);\r\n            this.setState({invalidUserImage: true});\r\n        };\r\n        testLoader.onload = () => {\r\n            if (this.userImage) {\r\n                URL.revokeObjectURL(this.userImage.url);\r\n            }\r\n            const dim = this.generateDefaultDimensions(testLoader.naturalWidth, testLoader.naturalHeight);\r\n            this.userImage = new ImageInfo(file.name, fileUrl, dim.rows, dim.cols);\r\n            this.setState({invalidUserImage: false, rows: dim.rows, cols: dim.cols});\r\n        };\r\n        testLoader.src = fileUrl;\r\n    }\r\n\r\n    // Tries to choose a good default based on the image aspect ratio;\r\n    // could go further and tailor the target rows+columns to the viewport size\r\n    generateDefaultDimensions(width, height) {\r\n        const target = 15;\r\n        const aspect = width / height;\r\n\r\n        // cols = (width / height) * rows\r\n        // cols + rows = target\r\n        const rows = clamp(Math.round(target / (aspect + 1)), minPuzzleDimension, target - minPuzzleDimension);\r\n        const cols = target - rows;\r\n\r\n        return {rows: rows, cols: cols};\r\n    }\r\n\r\n    handleDimensionsChange(e) {\r\n        this.setState({[e.target.name]: e.target.valueAsNumber});\r\n    }\r\n\r\n    handleDimensionsBlur(e) {\r\n        this.setState({[e.target.name]: this.validateDimension(e.target.value)});\r\n    }\r\n\r\n    validateDimension(val) {\r\n        let result = parseInt(val, 10);\r\n        if (isNaN(result) || result < minPuzzleDimension) {\r\n            result = minPuzzleDimension;\r\n        } else if (result > maxPuzzleDimension) {\r\n            result = maxPuzzleDimension;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    newPuzzle() {\r\n        if (this.state.usingUserImage && (!this.userImage || this.state.invalidUserImage)) {\r\n            return;\r\n        }\r\n\r\n        const rows = this.validateDimension(this.state.rows);\r\n        const cols = this.validateDimension(this.state.cols);\r\n\r\n        const img = this.selectedImage;\r\n        document.documentElement.style.setProperty('--puzzle-img', `url(${img.url})`);\r\n        \r\n        const sizeTester = new Image();\r\n        sizeTester.onerror = () => console.log(\"Failed to load image\");\r\n        sizeTester.onload = () => this.props.newPuzzle(sizeTester.naturalWidth, sizeTester.naturalHeight, rows, cols, img);\r\n        sizeTester.src = img.url;\r\n    };\r\n\r\n    renderSelectOptions() {\r\n        const options = [];\r\n        for (let i = 0; i < presetImages.length; i++) {\r\n            const img = presetImages[i];\r\n            options.push(<option key={i} value={img.url}>{img.shortName}</option>);\r\n        }\r\n        return options;\r\n    }\r\n\r\n    render() {\r\n        const rowsVal = isNaN(this.state.rows) ? '' : this.state.rows;\r\n        const colsVal = isNaN(this.state.cols) ? '' : this.state.cols;\r\n\r\n        const presetBtnStyle = this.state.usingUserImage ? 'btn-outline-dark' : 'btn-dark';\r\n        const userBtnStyle = this.state.usingUserImage ? 'btn-dark' : 'btn-outline-dark';\r\n\r\n        return (\r\n            <form className='container mt-4'>\r\n                <div className='form-group row'>\r\n                    <div className='input-group'>\r\n                        <div className='input-group-prepend col-12 col-lg-6 pr-lg-0'>\r\n                            <div className={`btn ${presetBtnStyle} d-flex flex-wrap flex-sm-nowrap align-items-center w-100`} onClick={this.usePresetImage}>\r\n                                <input readOnly className='col-auto' id='radioBtn1' type='radio'\r\n                                    checked={!this.state.usingUserImage} onKeyDown={this.handleRadioKeyDown}/>\r\n                                <label className='col col-sm-4 col-md-3 col-lg-auto col-form-label' htmlFor='radioBtn1'>Choose an image:</label>\r\n                                <div className='w-100 d-sm-none'></div>\r\n                                <label className='sr-only' htmlFor='puzzle-image-select'>Select image</label>\r\n                                <select className='custom-select col mr-lg-4' id='puzzle-image-select' onChange={this.handleSelectChange}>\r\n                                    {this.renderSelectOptions()}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                            \r\n                        <div className='input-group-append col-12 col-lg-6 pl-lg-0'>\r\n                            <div className={`btn ${userBtnStyle} d-flex flex-wrap flex-sm-nowrap align-items-center w-100`} onClick={this.useUserImage}>\r\n                                <input readOnly className='col-auto order-first order-lg-last ml-lg-3' id='radioBtn2' type='radio'\r\n                                    checked={this.state.usingUserImage} onKeyDown={this.handleRadioKeyDown}/>\r\n                                <label className='col col-sm-4 col-md-3 col-lg-auto col-form-label' htmlFor='radioBtn2'>Or use your own:</label>\r\n                                <div className='w-100 d-sm-none'></div>\r\n                                <CustomInput className='col text-left' id='file-input' type='file' accept='image/*' innerRef={this.fileInput}\r\n                                    invalid={this.state.invalidUserImage} onChange={this.handleFileChange}/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className='form-group row justify-content-center'>\r\n                    <label className='mr-2 my-2 col-form-label' htmlFor='row-input'>Rows:</label>\r\n                    <input className='mr-2 my-2' id={'row-input'} type='number' min={minPuzzleDimension} max={maxPuzzleDimension}\r\n                        name='rows' value={rowsVal} onChange={this.handleDimensionsChange} onBlur={this.handleDimensionsBlur}/>\r\n                    \r\n                    <label className='mr-2 my-2 col-form-label' htmlFor='col-input'>Columns:</label>\r\n                    <input className='mr-4 my-2' id='col-input' type='number' min={minPuzzleDimension} max={maxPuzzleDimension} \r\n                        name='cols' value={colsVal} onChange={this.handleDimensionsChange} onBlur={this.handleDimensionsBlur}/>\r\n                    \r\n                    <button className='btn btn-dark btn-lg' type='button' disabled={this.state.usingUserImage && this.state.invalidUserImage} onClick={this.newPuzzle}>New puzzle</button>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Puzzle from './Puzzle';\nimport PuzzleTitle from './PuzzleTitle';\nimport PuzzleControls from './PuzzleControls';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\n\nlet puzzleKey = 1;\n\nfunction renderPuzzle(width, height, rows, columns, image) {\n    ReactDOM.render(\n        <React.StrictMode>\n            <PuzzleControls newPuzzle={renderPuzzle} />\n            <PuzzleTitle puzzleImage={image} />\n            <Puzzle key={++puzzleKey} imgWidth={width} imgHeight={height} rows={rows} cols={columns} />\n        </React.StrictMode>,\n        document.getElementById('react-root')\n    );\n}\n\n// Initial render so that PuzzleControls can set up, which then calls renderPuzzle() when loaded (is there a better way to design this?)\nReactDOM.render(\n    <React.StrictMode>\n        <PuzzleControls newPuzzle={renderPuzzle} />\n    </React.StrictMode>,\n    document.getElementById('react-root')\n);\n"],"sourceRoot":""}