{"version":3,"sources":["util.js","Edges.js","Sides.js","EdgePathDrawer.js","EdgeStyleInfo.js","Piece.js","PieceModel.js","Puzzle.js","DetailsModal.js","PuzzleTitle.js","ImageInfo.js","images/ito-jakuchu-red-parrot-on-the-branch-of-a-tree.jpg","images/david-clode-eOSqRq2Qm1c-unsplash.jpg","images/casey-horner-80UR4DM2Rz0-unsplash.jpg","images/van-gogh-roses-nga.jpg","images/scott-webb-lYzgtps0UtQ-unsplash.jpg","images/travel-sourced-FsmcD6uKcHk-unsplash.jpg","providedImages.js","PuzzleControls.js","index.js"],"names":["range","i","Array","from","keys","randomInt","max","Math","floor","random","BUMP","RECESS","FLAT","getRandomEdgeType","types","length","LEFT","TOP","RIGHT","BOTTOM","Sides","Symbol","iterator","EdgePathDrawer","pieceWidth","pieceHeight","borderSize","this","START","templates","makeTemplates","pW","pH","b","w","o","c1","c2","side","edgeStyleInfo","start","end","mid","type","key","EdgeStyleInfo","neckWidth","offset","control1","control2","other","edge","Error","getOppositeEdge","Piece","props","bgPos","model","backgroundPositionString","left","top","clipPathString","getClipPathString","edgeDrawer","getPathString","edges","className","blockPointerEvents","tempid","onMouseDown","e","style","backgroundPosition","clipPath","width","height","pos","zIndex","PureComponent","PieceModel","col","row","neighbors","group","Puzzle","innerWidth","imgWidth","cols","innerHeight","imgHeight","rows","min","mouseDownHandlers","map","handleMouseDown","bind","nextzIndex","pieces","createPieces","groups","keyToValueFunc","obj","objectMap","state","gameComplete","draggedPiece","setScaleFactor","resizeListener","window","addEventListener","removeEventListener","widthScale","document","documentElement","clientWidth","heightScale","clientHeight","setState","scaleFactor","spacing","availableKeys","keysByGridPos","fill","keyIndex","splice","getRandomPosition","getBackgroundPosition","createEdge","opposite","piece","alignWith","abs","g1","g2","concat","refPiece","k","p","alignPiece","button","slice","offsetX","clientX","offsetY","clientY","neighbor","isTouching","mergeGroups","Object","board","boardStyle","transform","children","renderPiece","onMouseMove","handleMouseMove","onMouseUp","handleMouseUp","Component","DetailsModal","image","body","source","credit","nameIsTitle","name","author","ModalBody","Row","Col","md","src","url","sourceName","href","sourceUrl","target","rel","description","Modal","toggle","toggleModal","isOpen","centered","ModalHeader","PuzzleTitle","modalOpen","puzzleImage","isPhoto","title","info","onClick","ImageInfo","defaultRows","defaultCols","shortName","ImageSource","providedImages","img1","img2","img3","img4","img5","img6","PuzzleControls","handleSelectChange","handleDimensionsChange","handleDimensionsBlur","newPuzzle","selectedImage","presetImages","select","selectedIndex","option","options","img","getAttribute","valueAsNumber","validateDimension","value","val","result","parseInt","isNaN","imageUrl","setProperty","sizeTester","Image","onload","push","data-index","selectId","rowInputId","colInputId","rowsVal","colsVal","htmlFor","id","onChange","renderSelectOptions","onBlur","puzzleKey","ReactDOM","render","StrictMode","renderPuzzle","columns","getElementById"],"mappings":"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","file":"static/js/main.cc69c4cf.chunk.js","sourcesContent":["// Returns an array containing int values from 0 (inclusive) to i (exclusive).\r\nexport function range(i) {\r\n    return Array.from(Array(i).keys());\r\n}\r\n\r\n// Returns a random integer between 0 (inclusive) and max (exclusive).\r\nexport function randomInt(max) {\r\n    return Math.floor(Math.random() * Math.floor(max));\r\n}\r\n\r\n// Creates an object where the \"keys\" iterable provides the keys\r\n// and each value is the result of passing its corresponding key to keyToValueFunc.\r\nexport function objectMap(keys, keyToValueFunc) {\r\n    const obj = {};\r\n    for (const i of keys) {\r\n        obj[i] = keyToValueFunc(i);\r\n    }\r\n    return obj;\r\n}","import { randomInt } from './util';\r\n\r\n\r\nexport const BUMP = 'b';\r\nexport const RECESS = 'r';\r\nexport const FLAT = 'f';\r\n\r\n// Excludes FLAT since that edge type isn't assigned randomly.\r\nexport function getRandomEdgeType() {\r\n\tconst types = [BUMP, RECESS];\r\n\treturn types[randomInt(types.length)];\r\n}\r\n\r\nexport function getOppositeEdge(edge) {\r\n\tswitch(edge) {\r\n\t\tcase BUMP:\r\n\t\t\treturn RECESS;\r\n\t\tcase RECESS:\r\n\t\t\treturn BUMP;\r\n\t\tdefault:\r\n\t\t\tthrow Error(`getOppositeEdge: ${edge} does not have an opposite edge type`);\r\n\t}\r\n}","export const LEFT = 'Left';\r\nexport const TOP = 'Top';\r\nexport const RIGHT = 'Right';\r\nexport const BOTTOM = 'Bottom';\r\n\r\n// Use this to iterate through all four sides in a consistent order.\r\nexport const Sides = {\r\n    *[Symbol.iterator]() {\r\n        yield LEFT;\r\n        yield TOP;\r\n        yield RIGHT;\r\n        yield BOTTOM;\r\n    }\r\n}","import { BUMP, RECESS, FLAT } from './Edges';\r\nimport { LEFT, TOP, RIGHT, BOTTOM } from './Sides';\r\n\r\n\r\nexport default class EdgePathDrawer {\r\n\tconstructor(pieceWidth, pieceHeight, borderSize) {\r\n\t\tthis.START = 'START';\r\n\t\tthis.templates = this.makeTemplates(pieceWidth, pieceHeight, borderSize)\r\n\t}\r\n\r\n\tmakeTemplates(pW, pH, b) {\r\n\t\tconst templates = {};\r\n\r\n\t\ttemplates[this.START] = `M ${b} ${pH - b} `;\r\n\r\n\t\ttemplates[BUMP + LEFT] = (w, o, c1, c2) => `V ${(pH + w) / 2}`\t\r\n\t\t\t+ `C ${b - o} ${pH / 2 + c1} ${0} ${pH / 2 + c2} ${0} ${pH / 2} `\r\n\t\t\t+ `C ${0} ${pH / 2 - c2} ${b - o} ${pH / 2 - c1} ${b} ${(pH - w) / 2} `;\r\n\t\ttemplates[RECESS + LEFT] = (w, o, c1, c2) => `V ${(pH + w) / 2}`\r\n\t\t\t+ `C ${b + o} ${pH / 2 + c1} ${b * 2} ${pH / 2 + c2} ${b * 2} ${pH / 2} `\r\n\t\t\t+ `C ${b * 2} ${pH / 2 - c2} ${b + o} ${pH / 2 - c1} ${b} ${(pH - w) / 2} `;\r\n\t\ttemplates[LEFT] = `V ${b} `;\r\n\r\n\t\ttemplates[BUMP + TOP] = (w, o, c1, c2) => `H ${(pW - w) / 2} `\r\n\t\t\t+ `C ${pW / 2 - c1} ${b - o} ${pW / 2 - c2} ${0} ${pW / 2} ${0} `\r\n\t\t\t+ `C ${pW / 2 + c2} ${0} ${pW / 2 + c1} ${b - o} ${(pW + w) / 2} ${b} `;\r\n\t\ttemplates[RECESS + TOP] = (w, o, c1, c2) => `H ${(pW - w) / 2} `\r\n\t\t\t+ `C ${pW / 2 - c1} ${b + o}  ${pW / 2 - c2} ${b * 2} ${pW / 2} ${b * 2} `\r\n\t\t\t+ `C ${pW / 2 + c2} ${b * 2} ${pW / 2 + c1} ${b + o} ${(pW + w) / 2} ${b} `;\r\n\t\ttemplates[TOP] = `H ${pW - b} `;\r\n\r\n\t\ttemplates[BUMP + RIGHT] = (w, o, c1, c2) => `V ${(pH - w) / 2} `\r\n\t\t\t+ `C ${pW - b + o} ${pH / 2 - c1} ${pW} ${pH / 2 - c2} ${pW} ${pH / 2} `\r\n\t\t\t+ `C ${pW} ${pH / 2 + c2} ${pW - b + o} ${pH / 2 + c1} ${pW - b} ${(pH + w) / 2} `;\r\n\t\ttemplates[RECESS + RIGHT] = (w, o, c1, c2) => `V ${(pH - w) / 2} `\r\n\t\t\t+ `C ${pW - b - o} ${pH / 2 - c1} ${pW - b * 2} ${pH / 2 - c2} ${pW - b * 2} ${pH / 2} `\r\n\t\t\t+ `C ${pW - b * 2} ${pH / 2 + c2} ${pW - b - o} ${pH / 2 + c1} ${pW - b} ${(pH + w) / 2} `;\r\n\t\ttemplates[RIGHT] = `V ${pH - b} `;\r\n\r\n\t\ttemplates[BUMP + BOTTOM] = (w, o, c1, c2) => `H ${(pW + w) / 2} `\r\n\t\t\t+ `C ${pW / 2 + c1} ${pH - b + o} ${pW / 2 + c2} ${pH} ${pW / 2} ${pH} `\r\n\t\t\t+ `C ${pW / 2 - c2} ${pH} ${pW / 2 - c1} ${pH - b + o} ${(pW - w) / 2} ${pH - b} `;\r\n\t\ttemplates[RECESS + BOTTOM] = (w, o, c1, c2) => `H ${(pW + w) / 2} `\r\n\t\t\t+ `C ${pW / 2 + c1} ${pH - b - o}  ${pW / 2 + c2} ${pH - b * 2} ${pW / 2} ${pH - b * 2} `\r\n\t\t\t+ `C ${pW / 2 - c2} ${pH - b * 2} ${pW / 2 - c1} ${pH - b - o} ${(pW - w) / 2} ${pH - b} `;\r\n\t\ttemplates[BOTTOM] = `Z`;\r\n\r\n\t\treturn templates;\r\n\t}\r\n\r\n\tgetPathString(side, edgeStyleInfo) {\r\n\t\tconst start = (side === LEFT) ? this.templates[this.START] : '';\r\n\t\tconst end = this.templates[side];\r\n\r\n\t\tlet mid = '';\r\n\t\tif (edgeStyleInfo.type !== FLAT) {\r\n\t\t\tconst key = edgeStyleInfo.type + side;\r\n\t\t\tmid = this.templates[key](edgeStyleInfo.w, edgeStyleInfo.o, edgeStyleInfo.c1, edgeStyleInfo.c2);\r\n\t\t}\r\n\r\n\t\treturn start + mid + end;\r\n\t}\r\n}","import { getOppositeEdge } from './Edges';\r\n\r\n\r\n// Contains the properties needed to draw a specific puzzle piece edge:\r\n// its overall type (bump, recess, flat) and any constants needed to define its shape.\r\nexport default class EdgeStyleInfo {\r\n\tconstructor(type, neckWidth, offset, control1, control2) {\r\n\t\tthis.type = type;\r\n\t\tthis.w = neckWidth;\t\t// The width of the area where the bump meets the edge of the piece.\r\n\t\tthis.o = offset;\t\t// Controls the distance between the widest part of the bump and the edge of the piece.\r\n\t\tthis.c1 = control1;\t\t// Controls the width of the widest part of the bump.\r\n\t\tthis.c2 = control2;\t\t// Controls the width near the tallest part of the bump (affects the smoothness/pointiness of the curve).\r\n\t}\r\n\r\n    // Returns an EdgeStyleInfo object for an edge that fits with this one:\r\n    // if this is a bump edge, opposite() returns a matching recess edge, and vice-versa.\r\n    // Will fail if called on a flat edge.\r\n\topposite() {\r\n\t\tconst other = {...this};\r\n\t\tother.type = getOppositeEdge(this.type);\r\n\t\treturn other;\r\n\t}\r\n}","import { PureComponent } from 'react';\r\nimport { Sides } from './Sides';\r\n\r\n\r\nexport default class Piece extends PureComponent {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst bgPos = this.props.model.bgPos;\r\n\t\t// These will never change over the lifetime of the object, so just calculate them once\r\n\t\tthis.backgroundPositionString = `${bgPos.left}px ${bgPos.top}px`;\r\n\t\tthis.clipPathString = this.getClipPathString(this.props.edgeDrawer);\r\n\t}\r\n\t\r\n\tgetClipPathString(edgeDrawer) {\r\n\t\tlet clipPathString = 'path(\\'';\r\n\t\tfor (const side of Sides) {\r\n\t\t\tclipPathString += edgeDrawer.getPathString(side, this.props.model.edges[side]);\r\n\t\t}\r\n\t\treturn clipPathString + '\\')';\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst model = this.props.model;\r\n\t\tconst className = 'puzzle-piece' + (this.props.blockPointerEvents ? ' block-pointer-events' : '');\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tclassName={className}\r\n\t\t\t\ttempid={model.key}\r\n\t\t\t\tonMouseDown={(e) => this.props.onMouseDown(e)}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackgroundPosition: this.backgroundPositionString,\r\n\t\t\t\t\tclipPath: this.clipPathString,\r\n\t\t\t\t\twidth: this.props.width,\r\n\t\t\t\t\theight: this.props.height,\r\n\t\t\t\t\tleft: model.pos.left,\r\n\t\t\t\t\ttop: model.pos.top,\r\n\t\t\t\t\tzIndex: (model.zIndex > 0 ? model.zIndex : 'auto')\r\n\t\t\t\t}}>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","export default class PieceModel {\r\n\t// By default, a new piece is inserted into the group with the same id as its key\r\n\tconstructor(key, col, row, pos, bgPos, zIndex, edges, neighbors) {\r\n\t\tthis.key = key;\r\n\t\tthis.group = key;\r\n\t\tthis.col = col;\r\n\t\tthis.row = row;\r\n\t\tthis.pos = pos;\r\n\t\tthis.bgPos = bgPos;\r\n\t\tthis.zIndex = zIndex;\r\n\t\tthis.edges = edges;\r\n\t\tthis.neighbors = neighbors;\r\n\t}\r\n}","import { Component } from 'react';\r\nimport EdgePathDrawer from './EdgePathDrawer';\r\nimport EdgeStyleInfo from './EdgeStyleInfo';\r\nimport Piece from './Piece';\r\nimport PieceModel from './PieceModel';\r\n\r\nimport { getRandomEdgeType, getOppositeEdge } from './Edges';\r\nimport { BUMP, RECESS, FLAT } from './Edges';\r\nimport { LEFT, TOP, RIGHT, BOTTOM, Sides } from './Sides';\r\nimport { range, randomInt, objectMap } from './util';\r\n\r\nimport './Puzzle.css';\r\n\r\n\r\nconst MAX_WIDTH_SCALE = .7;  // The maximum percentage of the window width that the puzzle image should take up. \r\nconst MAX_HEIGHT_SCALE = .7;  // The maximum percentage of the window height that the puzzle image should take up. \r\n\r\nexport default class Puzzle extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.innerWidth =  this.props.imgWidth / this.props.cols;\t\r\n\t\tthis.innerHeight = this.props.imgHeight / this.props.rows;\r\n\t\tthis.borderSize = Math.min(this.innerHeight, this.innerWidth) / 4;\r\n\t\tthis.pieceWidth = 2 * this.borderSize + this.innerWidth;\r\n\t\tthis.pieceHeight = 2 * this.borderSize + this.innerHeight;\r\n\r\n\t\tthis.mouseDownHandlers = range(this.props.rows * this.props.cols).map(i => this.handleMouseDown.bind(this, i));\r\n\t\tthis.edgeDrawer = new EdgePathDrawer(this.pieceWidth, this.pieceHeight, this.borderSize);\r\n\t\tthis.nextzIndex = 1;\r\n\r\n\t\tconst pieces = this.createPieces();\r\n\t\tconst groups = objectMap(range(pieces.length), (i) => [i]);\r\n\r\n\t\tthis.state = {\r\n\t\t\tpieces: pieces,\r\n\t\t\tgroups: groups,\r\n\t\t\tgameComplete: false,\r\n\t\t\tdraggedPiece: null,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setScaleFactor();\r\n\r\n\t\tthis.resizeListener = this.setScaleFactor.bind(this);\r\n\t\twindow.addEventListener('resize', this.resizeListener);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener('resize', this.resizeListener);\r\n\t}\r\n\r\n\tsetScaleFactor() {\r\n\t\tconst widthScale = MAX_WIDTH_SCALE * document.documentElement.clientWidth / this.props.imgWidth;\r\n\t\tconst heightScale = MAX_HEIGHT_SCALE * document.documentElement.clientHeight / this.props.imgHeight;\r\n\t\tthis.setState({scaleFactor: Math.min(widthScale, heightScale)});\r\n\t}\r\n\r\n\tgetGridPosition(col, row, spacing) {\r\n\t\tconst left = (this.innerWidth + spacing) * col - this.borderSize;\r\n\t\tconst top = (this.innerHeight + spacing) * row - this.borderSize;\r\n\t\treturn {left: left, top: top};\r\n\t}\r\n\t\r\n\tgetRandomPosition() {\r\n\t\tconst left = Math.random() * (.2 * this.props.imgWidth);\r\n\t\tconst top = Math.random() * (this.props.imgHeight - this.pieceHeight);\r\n\t\treturn {left: left, top: top};\r\n\t}\r\n\t\r\n\tgetBackgroundPosition(col, row) {\r\n\t\tconst left = - (this.innerWidth * col) + this.borderSize;\r\n\t\tconst top = -(this.innerHeight * row) + this.borderSize;\r\n\t\treturn {left: left, top: top};\r\n\t}\r\n\t\r\n\tcreateEdge(type) {\r\n\t\tconst neckWidth = this.borderSize * (.8 + Math.random() * .45);\r\n\t\tconst offset = this.borderSize * (.4 + Math.random() * .1);\r\n\t\tconst c1 = (neckWidth > this.borderSize) ? neckWidth * (.75 + Math.random() * .25)\r\n\t\t\t\t\t: this.borderSize * (.85 + Math.random() * .35);\r\n\t\tconst c2 = neckWidth * (.5 + Math.random() * .15);\r\n\t\treturn new EdgeStyleInfo(type, neckWidth, offset, c1, c2);\r\n\t}\r\n\r\n\tcreatePieces() {\r\n\t\tconst pieces = [];\r\n\t\tconst availableKeys = range(this.props.cols * this.props.rows);\r\n\t\t// Use map() instead of fill() to ensure that each inner array is a unique object.\r\n\t\tconst keysByGridPos = Array(this.props.cols).fill(null).map(() => Array(this.props.rows));\r\n\t\t\r\n\t\tfor (let col = 0; col < this.props.cols; col++) {\r\n\t\t\tfor (let row = 0; row < this.props.rows; row++) {\r\n\t\t\t\tconst keyIndex = randomInt(availableKeys.length);\r\n\t\t\t\tconst key = availableKeys.splice(keyIndex, 1)[0];\r\n\t\t\t\tkeysByGridPos[col][row] = key;\r\n\t\t\t\t\r\n\t\t\t\t// const pos = this.getGridPosition(col, row, 0);\r\n\t\t\t\tconst pos = this.getRandomPosition();\r\n\t\t\t\tconst bgPos = this.getBackgroundPosition(col, row);\r\n\r\n\t\t\t\tconst neighbors = {};\r\n\t\t\t\tif (col > 0) {\r\n\t\t\t\t\tneighbors[LEFT] = keysByGridPos[col - 1][row];\r\n\t\t\t\t\tpieces[neighbors[LEFT]].neighbors[RIGHT] = key;\r\n\t\t\t\t}\r\n\t\t\t\tif (row > 0) {\r\n\t\t\t\t\tneighbors[TOP] = keysByGridPos[col][row - 1];\r\n\t\t\t\t\tpieces[neighbors[TOP]].neighbors[BOTTOM] = key;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst edges = {};\r\n\t\t\t\tedges[LEFT] = (col === 0) ? this.createEdge(FLAT) : pieces[neighbors[LEFT]].edges[RIGHT].opposite();\r\n\t\t\t\tedges[TOP] = (row === 0) ? this.createEdge(FLAT) : pieces[neighbors[TOP]].edges[BOTTOM].opposite();\r\n\t\t\t\tedges[RIGHT] = (col === this.props.cols - 1) ? this.createEdge(FLAT) : this.createEdge(getRandomEdgeType());\r\n\t\t\t\tedges[BOTTOM] = (row === this.props.rows - 1) ? this.createEdge(FLAT) : this.createEdge(getRandomEdgeType());\r\n\t\t\t\t\r\n\t\t\t\tpieces[key] = new PieceModel(key, col, row, pos, bgPos, 0, edges, neighbors);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn pieces;\r\n\t}\r\n\r\n\talignPiece(piece, alignWith) {\r\n\t\tpiece.pos = {left: alignWith.pos.left + this.innerWidth * (piece.col - alignWith.col),\r\n\t\t\t\t\t top: alignWith.pos.top + this.innerHeight * (piece.row - alignWith.row)};\r\n\t}\r\n\t\r\n\tisTouching(piece, side, other) {\r\n\t\tconst snapRange = 7;\r\n\t\tif (side === RIGHT) {\r\n\t\t\treturn Math.abs(piece.pos.top - other.pos.top) <= snapRange\r\n\t\t\t\t&& Math.abs((other.pos.left - piece.pos.left) - this.innerWidth) <= snapRange;\r\n\t\t} else if (side === LEFT) {\r\n\t\t\treturn Math.abs(piece.pos.top - other.pos.top) <= snapRange\r\n\t\t\t\t&& Math.abs((piece.pos.left - other.pos.left) - this.innerWidth) <= snapRange;\r\n\t\t} else if (side === TOP) {\r\n\t\t\treturn Math.abs(piece.pos.left - other.pos.left) <= snapRange\r\n\t\t\t\t&& Math.abs((piece.pos.top - other.pos.top) - this.innerHeight) <= snapRange;\r\n\t\t} else if (side === BOTTOM) {\r\n\t\t\treturn Math.abs(piece.pos.left - other.pos.left) <= snapRange\r\n\t\t\t\t&& Math.abs((other.pos.top - piece.pos.top) - this.innerHeight) <= snapRange;\r\n\t\t}\r\n\t}\r\n\r\n\tmergeGroups(pieces, groups, g1, g2) {\r\n\t\tgroups[g1] = groups[g1].concat(groups[g2]);\r\n\t\tconst refPiece = pieces[groups[g1][0]];\r\n\t\tfor (const k of groups[g2]) {\r\n\t\t\tconst p = {...pieces[k]};\r\n\t\t\tp.group = g1;\r\n\t\t\tp.zIndex = refPiece.zIndex;\r\n\t\t\tthis.alignPiece(p, refPiece);\r\n\t\t\tpieces[k] = p;\r\n\t\t}\r\n\t\tdelete groups[g2];\r\n\t}\r\n\r\n\thandleMouseDown(key, e) {\r\n\t\tif (e.button !== 0 || this.state.draggedPiece !== null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst pieces = this.state.pieces.slice();\r\n\t\tfor (const k of this.state.groups[pieces[key].group]) {\r\n\t\t\tpieces[k] = {...pieces[k]};\r\n\t\t\tpieces[k].zIndex = this.nextzIndex;\r\n\t\t}\r\n\t\tthis.nextzIndex++;\r\n\r\n\t\tthis.setState({\r\n\t\t\tpieces: pieces,\r\n\t\t\tdraggedPiece: key,\r\n\t\t\toffsetX: e.clientX - (this.state.pieces[key].pos.left * this.state.scaleFactor),\r\n\t\t\toffsetY: e.clientY - (this.state.pieces[key].pos.top * this.state.scaleFactor)\r\n\t\t});\r\n\t}\r\n\r\n\thandleMouseMove(e) {\r\n\t\tif (this.state.draggedPiece === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst key = this.state.draggedPiece;\r\n\t\tconst pieces = this.state.pieces.slice();\r\n\t\t\r\n\t\tconst p = {...pieces[key]};\r\n\t\tpieces[key] = p;\r\n\t\t\r\n\t\tconst left = (e.clientX - this.state.offsetX) / this.state.scaleFactor;\r\n\t\tconst top = (e.clientY - this.state.offsetY) / this.state.scaleFactor;\r\n\t\tp.pos = {left: left, top: top };\r\n\r\n\t\tfor (const k of this.state.groups[p.group]) {\r\n\t\t\tpieces[k] = {...pieces[k]};\r\n\t\t\tthis.alignPiece(pieces[k], p);\r\n\t\t}\r\n\t\tthis.setState({pieces: pieces});\r\n\t}\r\n\r\n\thandleMouseUp() {\r\n\t\tif (this.state.draggedPiece === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst key = this.state.draggedPiece;\r\n\t\tconst groups = {...this.state.groups};\r\n\t\tconst pieces = this.state.pieces.slice();\r\n\r\n\t\tfor (const k of this.state.groups[pieces[key].group]) {\r\n\t\t\tconst p = pieces[k];\r\n\t\t\tfor (const side of Sides) {\r\n\t\t\t\tconst neighbor = pieces[p.neighbors[side]];\r\n\t\t\t\tif (neighbor && neighbor.group !== p.group && this.isTouching(p, side, neighbor)) {\r\n\t\t\t\t\tthis.mergeGroups(pieces, groups, p.group, neighbor.group);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst gameComplete = Object.keys(groups).length === 1;\r\n\t\tthis.setState({groups: groups, pieces: pieces, draggedPiece: null, gameComplete: gameComplete});\r\n\t}\r\n\r\n\trenderPiece(model) {\r\n\t\treturn (\r\n\t\t\t<Piece key={model.key}\r\n\t\t\t\tmodel={model}\r\n\t\t\t\twidth={this.pieceWidth}\r\n\t\t\t\theight={this.pieceHeight}\r\n\t\t\t\t// isDragged={model.group === this.state.pieces[this.state.draggedPiece].group}\r\n\t\t\t\tblockPointerEvents={this.state.draggedPiece !== null}\r\n\t\t\t\tedgeDrawer={this.edgeDrawer}\r\n\t\t\t\tonMouseDown={this.mouseDownHandlers[model.key]}/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst boardStyle = {transform: `scale(${this.state.scaleFactor})`, width: (100 / this.state.scaleFactor) + '%', height: (100 / this.state.scaleFactor) + '%'};\r\n\r\n\t\tlet board;\r\n\t\tif (this.state.gameComplete) {\r\n\t\t\tboard = (<div className='puzzle-area puzzle-complete' style={boardStyle}></div>);\r\n\t\t} else {\r\n\t\t\tconst children = this.state.pieces.map(model => this.renderPiece(model));\r\n\t\t\tboard = (\r\n\t\t\t\t<div \r\n\t\t\t\t\tclassName='puzzle-area'\r\n\t\t\t\t\tonMouseMove={(e) => this.handleMouseMove(e)}\r\n\t\t\t\t\tonMouseUp={() => this.handleMouseUp()}\r\n\t\t\t\t\tstyle={boardStyle}>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</div>);\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className='puzzle-container mt-2 pb-3'>\r\n\t\t\t\t<div className='puzzle-background'></div>\r\n\t\t\t\t{board}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import { Component } from 'react';\r\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\r\nimport { Container, Row, Col } from 'reactstrap';\r\n\r\n\r\nexport default class DetailsModal extends Component {\r\n    render() {\r\n        const image = this.props.image;\r\n        \r\n        let body = '';\r\n        if (image && image.source) {\r\n                const credit = (image.source.nameIsTitle ? image.name : 'Photo') + ' by ' + image.author;\r\n                body = ( \r\n                    <ModalBody>\r\n                        <Row>\r\n                            <Col md='8'><img src={image.url} width='100%'/></Col>\r\n                            <Col md='4' className='mt-3 mt-md-0 pl-md-0'>\r\n                                <p>{credit}</p>\r\n                                <p>Source: {image.source.sourceName}</p>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className='mt-md-3'>\r\n                            <Col>\r\n                                <p>See the original at: <a href={image.source.sourceUrl} target='_blank' rel='external noopener'>{image.source.sourceUrl}</a></p>\r\n                                {image.source.description ? <p>{image.source.description}</p> : null}\r\n                            </Col>\r\n                        </Row>\r\n                    </ModalBody>\r\n                ); \r\n            }\r\n\r\n        return(\r\n            <Modal toggle={this.props.toggleModal} isOpen={this.props.isOpen} centered={true}> \r\n                <ModalHeader toggle={this.props.toggleModal}>Image details</ModalHeader>\r\n                {body}\r\n            </Modal>\r\n        );  \r\n    }\r\n}","import { Component } from 'react';\r\nimport DetailsModal from './DetailsModal';\r\n\r\n\r\nexport default class PuzzleTitle extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.state = {modalOpen: false};\r\n    }\r\n\r\n    toggleModal() {\r\n        this.setState((state) => { return {modalOpen: !state.modalOpen} });\r\n    }\r\n\r\n    render() {\r\n        const puzzleImage = this.props.puzzleImage;\r\n        if (!puzzleImage) {\r\n            return null;\r\n        }\r\n\r\n        const isPhoto = puzzleImage.source && puzzleImage.source.isPhoto;\r\n        const nameIsTitle = puzzleImage.source && puzzleImage.source.nameIsTitle;\r\n\r\n        const title = nameIsTitle ? <em>{puzzleImage.name}</em> : '';\r\n        let author = '';\r\n        if (puzzleImage.author) {\r\n            if (nameIsTitle) {\r\n                author += `, ${isPhoto ? ' photo' : ''} by `;\r\n            } else if (isPhoto) {\r\n                author += 'Photo by ';\r\n            } else {\r\n                author += 'By '\r\n            }\r\n            author += puzzleImage.author;\r\n        }\r\n        const info = puzzleImage.source ? <button type='button' className='btn btn-link btn-sm text-muted px-1' onClick={this.toggleModal}>more info</button> : '';\r\n\r\n        return (\r\n            <div className='container mt-3'>\r\n                <div className='row justify-content-center mx-n2'>\r\n                    <div className='col-0 col-sm px-2'> </div> \r\n                    <div className='col-auto px-2'>\r\n                        <p className='h5'>{title}{author}</p>\r\n                    </div>\r\n                    <div className='col-auto col-sm px-2'>{info}</div>\r\n                </div>\r\n                <DetailsModal toggleModal={this.toggleModal} isOpen={this.state.modalOpen} image={puzzleImage} />\r\n            </div>);\r\n    }\r\n}","export class ImageInfo {\r\n    constructor(name, url, defaultRows, defaultCols, author, source, shortName) {\r\n        this.name = name;\r\n        this.url = url;\r\n        this.defaultRows = defaultRows;\r\n        this.defaultCols = defaultCols;\r\n        this.author = author;\r\n        this.source = source;\r\n        this.shortName = shortName ?? name;\r\n    }\r\n}\r\n\r\nexport class ImageSource {\r\n    constructor(sourceName, nameIsTitle=false, isPhoto=false, sourceUrl='', description='') {\r\n        this.sourceName = sourceName;\r\n        this.nameIsTitle = nameIsTitle;\r\n        this.sourceUrl = sourceUrl;\r\n        this.isPhoto = isPhoto;\r\n        this.description = description;\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/ito-jakuchu-red-parrot-on-the-branch-of-a-tree.a8f36cd5.jpg\";","export default __webpack_public_path__ + \"static/media/david-clode-eOSqRq2Qm1c-unsplash.42540cb6.jpg\";","export default __webpack_public_path__ + \"static/media/casey-horner-80UR4DM2Rz0-unsplash.001ae9f7.jpg\";","export default __webpack_public_path__ + \"static/media/van-gogh-roses-nga.8fa9d120.jpg\";","export default __webpack_public_path__ + \"static/media/scott-webb-lYzgtps0UtQ-unsplash.509dd0a5.jpg\";","export default __webpack_public_path__ + \"static/media/travel-sourced-FsmcD6uKcHk-unsplash.97041d06.jpg\";","import { ImageInfo, ImageSource } from './ImageInfo';\r\nimport img1 from './images/ito-jakuchu-red-parrot-on-the-branch-of-a-tree.jpg';\r\nimport img2 from './images/david-clode-eOSqRq2Qm1c-unsplash.jpg';\r\nimport img3 from './images/casey-horner-80UR4DM2Rz0-unsplash.jpg';\r\nimport img4 from './images/van-gogh-roses-nga.jpg';\r\nimport img5 from './images/scott-webb-lYzgtps0UtQ-unsplash.jpg';\r\nimport img6 from './images/travel-sourced-FsmcD6uKcHk-unsplash.jpg';\r\n\r\n\r\n\r\nconst providedImages = [\r\n    new ImageInfo('Red Parrot on the Branch of a Tree', img1, 6, 8, 'Itō Jakuchū', \r\n        new ImageSource('Metropolitan Museum of Art', true, false, 'https://www.metmuseum.org/art/collection/search/57123'), 'Red Parrot'),\r\n    new ImageInfo('Coral', img2, 7, 10, 'David Clode',\r\n        new ImageSource('Unsplash', false, true, 'https://unsplash.com/photos/eOSqRq2Qm1c')),\r\n    new ImageInfo('Starry Sky', img3, 7, 10, 'Casey Horner',\r\n        new ImageSource('Unsplash', false, true, 'https://unsplash.com/photos/80UR4DM2Rz0')),\r\n    new ImageInfo('Roses', img4, 8, 10, 'Vincent van Gogh',\r\n        new ImageSource('National Gallery of Art', true, false, 'https://www.nga.gov/collection/art-object-page.72328.html')),\r\n    new ImageInfo('Succulents', img5, 11, 7, 'Scott Webb',\r\n        new ImageSource('Unsplash', false, true, 'https://unsplash.com/photos/lYzgtps0UtQ')),\r\n    new ImageInfo('Jellyfish', img6, 7, 10, 'Travel Sourced',\r\n        new ImageSource('Unsplash', false, true, 'https://unsplash.com/photos/FsmcD6uKcHk'))\r\n];\r\n\r\nexport default providedImages;","import { Component } from 'react';\r\nimport presetImages from './providedImages';\r\n\r\n\r\nconst minPuzzleDimension = 2;\r\nconst maxPuzzleDimension = 25;\r\n\r\nexport default class PuzzleControls extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.handleSelectChange = this.handleSelectChange.bind(this);\r\n        this.handleDimensionsChange = this.handleDimensionsChange.bind(this);\r\n        this.handleDimensionsBlur = this.handleDimensionsBlur.bind(this);\r\n        this.newPuzzle = this.newPuzzle.bind(this);\r\n\r\n        this.state = {\r\n            selectedImage: presetImages[0],\r\n            rows: presetImages[0].defaultRows,\r\n            cols: presetImages[0].defaultCols\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.newPuzzle();\r\n    }\r\n\r\n    handleSelectChange(e) {\r\n        const select = e.target;\r\n        if (select.selectedIndex !== -1) {\r\n            const option = select.options[select.selectedIndex];\r\n            const img = presetImages[option.getAttribute('data-index')];\r\n            this.setState({selectedImage: img, rows: img.defaultRows, cols: img.defaultCols});\r\n        }\r\n    }\r\n\r\n    handleDimensionsChange(e) {\r\n        this.setState({[e.target.name]: e.target.valueAsNumber});\r\n    }\r\n\r\n    handleDimensionsBlur(e) {\r\n        this.setState({[e.target.name]: this.validateDimension(e.target.value)});\r\n    }\r\n\r\n    validateDimension(val) {\r\n        let result = parseInt(val, 10);\r\n        if (isNaN(result) || result < minPuzzleDimension) {\r\n            result = minPuzzleDimension;\r\n        } else if (result > maxPuzzleDimension) {\r\n            result = maxPuzzleDimension;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    newPuzzle() {\r\n        const rows = this.validateDimension(this.state.rows);\r\n        const cols = this.validateDimension(this.state.cols);\r\n\r\n        const imageUrl = this.state.selectedImage.url;\r\n        document.documentElement.style.setProperty('--puzzle-img', `url(${imageUrl})`);\r\n        \r\n        const sizeTester = new Image();\r\n        sizeTester.onload = () => this.props.newPuzzle(sizeTester.width, sizeTester.height, rows, cols, this.state.selectedImage);\r\n        sizeTester.src = imageUrl;\r\n    };\r\n\r\n    renderSelectOptions() {\r\n        const options = [];\r\n        for (let i = 0; i < presetImages.length; i++) {\r\n            const img = presetImages[i];\r\n            options.push(<option key={i} value={img.url} data-index={i}>{img.shortName}</option>);\r\n        }\r\n        return options;\r\n    }\r\n\r\n    render() {\r\n        const selectId = 'puzzle-image-select';\r\n        const rowInputId = 'row-input';\r\n        const colInputId = 'col-input';\r\n\r\n        const rowsVal = isNaN(this.state.rows) ? '' : this.state.rows;\r\n        const colsVal = isNaN(this.state.cols) ? '' : this.state.cols;\r\n\r\n        return (\r\n            <div className='container mt-4'>\r\n                <form className='form-inline justify-content-center'>\r\n                    <label className='mr-2' htmlFor={selectId}>Choose an image:</label>\r\n                    <select id={selectId} className='custom-select mr-sm-4 mb-2 mb-md-0' onChange={this.handleSelectChange}>\r\n                        {this.renderSelectOptions()}\r\n                    </select>\r\n                    <div className='w-100 d-md-none'></div>\r\n                    <label className='mr-2' htmlFor={rowInputId}>Rows:</label>\r\n                    <input id={rowInputId} className='mr-2' type='number' min={minPuzzleDimension} max={maxPuzzleDimension}\r\n                           name='rows' value={rowsVal} onChange={this.handleDimensionsChange} onBlur={this.handleDimensionsBlur}/>\r\n                    <label className='mr-2' htmlFor={colInputId}>Columns:</label>\r\n                    <input id={colInputId} className='mr-4' type='number' min={minPuzzleDimension} max={maxPuzzleDimension} \r\n                           name='cols' value={colsVal} onChange={this.handleDimensionsChange} onBlur={this.handleDimensionsBlur}/>\r\n                    <button className='btn btn-dark' type='button' onClick={this.newPuzzle}>New puzzle</button>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Puzzle from './Puzzle';\nimport PuzzleTitle from './PuzzleTitle';\nimport PuzzleControls from './PuzzleControls';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\n\nlet puzzleKey = 1;\n\nfunction renderPuzzle(width, height, rows, columns, image) {\n    ReactDOM.render(\n        <React.StrictMode>\n            <PuzzleControls newPuzzle={renderPuzzle} />\n            <PuzzleTitle puzzleImage={image} />\n            <Puzzle key={++puzzleKey} imgWidth={width} imgHeight={height} rows={rows} cols={columns} />\n        </React.StrictMode>,\n        document.getElementById('react-root')\n    );\n}\n\n// Initial render so that PuzzleControls can set up, which then calls renderPuzzle() when loaded (is there a better way to design this?)\nReactDOM.render(\n    <React.StrictMode>\n        <PuzzleControls newPuzzle={renderPuzzle} />\n    </React.StrictMode>,\n    document.getElementById('react-root')\n);\n"],"sourceRoot":""}