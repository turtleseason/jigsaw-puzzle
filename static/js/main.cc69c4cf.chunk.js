(this["webpackJsonpjigsaw-puzzle"]=this["webpackJsonpjigsaw-puzzle"]||[]).push([[0],{30:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var a=n(3),o=n.n(a),s=n(14),c=n.n(s),i=n(13),r=n(12),l=n(4),h=n(6),u=n(8),p=n(11),d=n(10);function m(t){return Array.from(Array(t).keys())}function g(t){return Math.floor(Math.random()*Math.floor(t))}var b="b",f="r",j="f";function v(){var t=[b,f];return t[g(t.length)]}var O=n(15),y=n(18),w=n.n(y),x="Left",z="Top",k="Right",S="Bottom",M=Object(O.a)({},Symbol.iterator,w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x;case 2:return t.next=4,z;case 4:return t.next=6,k;case 6:return t.next=8,S;case 8:case"end":return t.stop()}}),t)}))),P=function(){function t(e,n,a){Object(l.a)(this,t),this.START="START",this.templates=this.makeTemplates(e,n,a)}return Object(h.a)(t,[{key:"makeTemplates",value:function(t,e,n){var a={};return a[this.START]="M ".concat(n," ").concat(e-n," "),a.bLeft=function(t,a,o,s){return"V ".concat((e+t)/2)+"C ".concat(n-a," ").concat(e/2+o," ",0," ").concat(e/2+s," ",0," ").concat(e/2," ")+"C ".concat(0," ",e/2-s," ").concat(n-a," ").concat(e/2-o," ").concat(n," ").concat((e-t)/2," ")},a.rLeft=function(t,a,o,s){return"V ".concat((e+t)/2)+"C ".concat(n+a," ").concat(e/2+o," ").concat(2*n," ").concat(e/2+s," ").concat(2*n," ").concat(e/2," ")+"C ".concat(2*n," ").concat(e/2-s," ").concat(n+a," ").concat(e/2-o," ").concat(n," ").concat((e-t)/2," ")},a.Left="V ".concat(n," "),a.bTop=function(e,a,o,s){return"H ".concat((t-e)/2," ")+"C ".concat(t/2-o," ").concat(n-a," ").concat(t/2-s," ",0," ").concat(t/2," ",0," ")+"C ".concat(t/2+s," ",0," ").concat(t/2+o," ").concat(n-a," ").concat((t+e)/2," ").concat(n," ")},a.rTop=function(e,a,o,s){return"H ".concat((t-e)/2," ")+"C ".concat(t/2-o," ").concat(n+a,"  ").concat(t/2-s," ").concat(2*n," ").concat(t/2," ").concat(2*n," ")+"C ".concat(t/2+s," ").concat(2*n," ").concat(t/2+o," ").concat(n+a," ").concat((t+e)/2," ").concat(n," ")},a.Top="H ".concat(t-n," "),a.bRight=function(a,o,s,c){return"V ".concat((e-a)/2," ")+"C ".concat(t-n+o," ").concat(e/2-s," ").concat(t," ").concat(e/2-c," ").concat(t," ").concat(e/2," ")+"C ".concat(t," ").concat(e/2+c," ").concat(t-n+o," ").concat(e/2+s," ").concat(t-n," ").concat((e+a)/2," ")},a.rRight=function(a,o,s,c){return"V ".concat((e-a)/2," ")+"C ".concat(t-n-o," ").concat(e/2-s," ").concat(t-2*n," ").concat(e/2-c," ").concat(t-2*n," ").concat(e/2," ")+"C ".concat(t-2*n," ").concat(e/2+c," ").concat(t-n-o," ").concat(e/2+s," ").concat(t-n," ").concat((e+a)/2," ")},a.Right="V ".concat(e-n," "),a.bBottom=function(a,o,s,c){return"H ".concat((t+a)/2," ")+"C ".concat(t/2+s," ").concat(e-n+o," ").concat(t/2+c," ").concat(e," ").concat(t/2," ").concat(e," ")+"C ".concat(t/2-c," ").concat(e," ").concat(t/2-s," ").concat(e-n+o," ").concat((t-a)/2," ").concat(e-n," ")},a.rBottom=function(a,o,s,c){return"H ".concat((t+a)/2," ")+"C ".concat(t/2+s," ").concat(e-n-o,"  ").concat(t/2+c," ").concat(e-2*n," ").concat(t/2," ").concat(e-2*n," ")+"C ".concat(t/2-c," ").concat(e-2*n," ").concat(t/2-s," ").concat(e-n-o," ").concat((t-a)/2," ").concat(e-n," ")},a.Bottom="Z",a}},{key:"getPathString",value:function(t,e){var n=t===x?this.templates[this.START]:"",a=this.templates[t],o="";if(e.type!==j){var s=e.type+t;o=this.templates[s](e.w,e.o,e.c1,e.c2)}return n+o+a}}]),t}(),C=function(){function t(e,n,a,o,s){Object(l.a)(this,t),this.type=e,this.w=n,this.o=a,this.c1=o,this.c2=s}return Object(h.a)(t,[{key:"opposite",value:function(){var t=Object(i.a)({},this);return t.type=function(t){switch(t){case b:return f;case f:return b;default:throw Error("getOppositeEdge: ".concat(t," does not have an opposite edge type"))}}(this.type),t}}]),t}(),N=n(1),D=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(t){var a;Object(l.a)(this,n);var o=(a=e.call(this,t)).props.model.bgPos;return a.backgroundPositionString="".concat(o.left,"px ").concat(o.top,"px"),a.clipPathString=a.getClipPathString(a.props.edgeDrawer),a}return Object(h.a)(n,[{key:"getClipPathString",value:function(t){var e,n="path('",a=Object(r.a)(M);try{for(a.s();!(e=a.n()).done;){var o=e.value;n+=t.getPathString(o,this.props.model.edges[o])}}catch(s){a.e(s)}finally{a.f()}return n+"')"}},{key:"render",value:function(){var t=this,e=this.props.model,n="puzzle-piece"+(this.props.blockPointerEvents?" block-pointer-events":"");return Object(N.jsx)("div",{className:n,tempid:e.key,onMouseDown:function(e){return t.props.onMouseDown(e)},style:{backgroundPosition:this.backgroundPositionString,clipPath:this.clipPathString,width:this.props.width,height:this.props.height,left:e.pos.left,top:e.pos.top,zIndex:e.zIndex>0?e.zIndex:"auto"}})}}]),n}(a.PureComponent),H=function t(e,n,a,o,s,c,i,r){Object(l.a)(this,t),this.key=e,this.group=e,this.col=n,this.row=a,this.pos=o,this.bgPos=s,this.zIndex=c,this.edges=i,this.neighbors=r},I=(n(30),function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(t){var a;Object(l.a)(this,n),(a=e.call(this,t)).innerWidth=a.props.imgWidth/a.props.cols,a.innerHeight=a.props.imgHeight/a.props.rows,a.borderSize=Math.min(a.innerHeight,a.innerWidth)/4,a.pieceWidth=2*a.borderSize+a.innerWidth,a.pieceHeight=2*a.borderSize+a.innerHeight,a.mouseDownHandlers=m(a.props.rows*a.props.cols).map((function(t){return a.handleMouseDown.bind(Object(u.a)(a),t)})),a.edgeDrawer=new P(a.pieceWidth,a.pieceHeight,a.borderSize),a.nextzIndex=1;var o=a.createPieces(),s=function(t,e){var n,a={},o=Object(r.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;a[s]=e(s)}}catch(c){o.e(c)}finally{o.f()}return a}(m(o.length),(function(t){return[t]}));return a.state={pieces:o,groups:s,gameComplete:!1,draggedPiece:null},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setScaleFactor(),this.resizeListener=this.setScaleFactor.bind(this),window.addEventListener("resize",this.resizeListener)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeListener)}},{key:"setScaleFactor",value:function(){var t=.7*document.documentElement.clientWidth/this.props.imgWidth,e=.7*document.documentElement.clientHeight/this.props.imgHeight;this.setState({scaleFactor:Math.min(t,e)})}},{key:"getGridPosition",value:function(t,e,n){return{left:(this.innerWidth+n)*t-this.borderSize,top:(this.innerHeight+n)*e-this.borderSize}}},{key:"getRandomPosition",value:function(){return{left:Math.random()*(.2*this.props.imgWidth),top:Math.random()*(this.props.imgHeight-this.pieceHeight)}}},{key:"getBackgroundPosition",value:function(t,e){return{left:-this.innerWidth*t+this.borderSize,top:-this.innerHeight*e+this.borderSize}}},{key:"createEdge",value:function(t){var e=this.borderSize*(.8+.45*Math.random()),n=this.borderSize*(.4+.1*Math.random()),a=e>this.borderSize?e*(.75+.25*Math.random()):this.borderSize*(.85+.35*Math.random()),o=e*(.5+.15*Math.random());return new C(t,e,n,a,o)}},{key:"createPieces",value:function(){for(var t=this,e=[],n=m(this.props.cols*this.props.rows),a=Array(this.props.cols).fill(null).map((function(){return Array(t.props.rows)})),o=0;o<this.props.cols;o++)for(var s=0;s<this.props.rows;s++){var c=g(n.length),i=n.splice(c,1)[0];a[o][s]=i;var r=this.getRandomPosition(),l=this.getBackgroundPosition(o,s),h={};o>0&&(h.Left=a[o-1][s],e[h.Left].neighbors.Right=i),s>0&&(h.Top=a[o][s-1],e[h.Top].neighbors.Bottom=i);var u={};u.Left=0===o?this.createEdge(j):e[h.Left].edges.Right.opposite(),u.Top=0===s?this.createEdge(j):e[h.Top].edges.Bottom.opposite(),u.Right=o===this.props.cols-1?this.createEdge(j):this.createEdge(v()),u.Bottom=s===this.props.rows-1?this.createEdge(j):this.createEdge(v()),e[i]=new H(i,o,s,r,l,0,u,h)}return e}},{key:"alignPiece",value:function(t,e){t.pos={left:e.pos.left+this.innerWidth*(t.col-e.col),top:e.pos.top+this.innerHeight*(t.row-e.row)}}},{key:"isTouching",value:function(t,e,n){return e===k?Math.abs(t.pos.top-n.pos.top)<=7&&Math.abs(n.pos.left-t.pos.left-this.innerWidth)<=7:e===x?Math.abs(t.pos.top-n.pos.top)<=7&&Math.abs(t.pos.left-n.pos.left-this.innerWidth)<=7:e===z?Math.abs(t.pos.left-n.pos.left)<=7&&Math.abs(t.pos.top-n.pos.top-this.innerHeight)<=7:e===S?Math.abs(t.pos.left-n.pos.left)<=7&&Math.abs(n.pos.top-t.pos.top-this.innerHeight)<=7:void 0}},{key:"mergeGroups",value:function(t,e,n,a){e[n]=e[n].concat(e[a]);var o,s=t[e[n][0]],c=Object(r.a)(e[a]);try{for(c.s();!(o=c.n()).done;){var l=o.value,h=Object(i.a)({},t[l]);h.group=n,h.zIndex=s.zIndex,this.alignPiece(h,s),t[l]=h}}catch(u){c.e(u)}finally{c.f()}delete e[a]}},{key:"handleMouseDown",value:function(t,e){if(0===e.button&&null===this.state.draggedPiece){var n,a=this.state.pieces.slice(),o=Object(r.a)(this.state.groups[a[t].group]);try{for(o.s();!(n=o.n()).done;){var s=n.value;a[s]=Object(i.a)({},a[s]),a[s].zIndex=this.nextzIndex}}catch(c){o.e(c)}finally{o.f()}this.nextzIndex++,this.setState({pieces:a,draggedPiece:t,offsetX:e.clientX-this.state.pieces[t].pos.left*this.state.scaleFactor,offsetY:e.clientY-this.state.pieces[t].pos.top*this.state.scaleFactor})}}},{key:"handleMouseMove",value:function(t){if(null!==this.state.draggedPiece){var e=this.state.draggedPiece,n=this.state.pieces.slice(),a=Object(i.a)({},n[e]);n[e]=a;var o=(t.clientX-this.state.offsetX)/this.state.scaleFactor,s=(t.clientY-this.state.offsetY)/this.state.scaleFactor;a.pos={left:o,top:s};var c,l=Object(r.a)(this.state.groups[a.group]);try{for(l.s();!(c=l.n()).done;){var h=c.value;n[h]=Object(i.a)({},n[h]),this.alignPiece(n[h],a)}}catch(u){l.e(u)}finally{l.f()}this.setState({pieces:n})}}},{key:"handleMouseUp",value:function(){if(null!==this.state.draggedPiece){var t,e=this.state.draggedPiece,n=Object(i.a)({},this.state.groups),a=this.state.pieces.slice(),o=Object(r.a)(this.state.groups[a[e].group]);try{for(o.s();!(t=o.n()).done;){var s,c=a[t.value],l=Object(r.a)(M);try{for(l.s();!(s=l.n()).done;){var h=s.value,u=a[c.neighbors[h]];u&&u.group!==c.group&&this.isTouching(c,h,u)&&this.mergeGroups(a,n,c.group,u.group)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}var p=1===Object.keys(n).length;this.setState({groups:n,pieces:a,draggedPiece:null,gameComplete:p})}}},{key:"renderPiece",value:function(t){return Object(N.jsx)(D,{model:t,width:this.pieceWidth,height:this.pieceHeight,blockPointerEvents:null!==this.state.draggedPiece,edgeDrawer:this.edgeDrawer,onMouseDown:this.mouseDownHandlers[t.key]},t.key)}},{key:"render",value:function(){var t,e=this,n={transform:"scale(".concat(this.state.scaleFactor,")"),width:100/this.state.scaleFactor+"%",height:100/this.state.scaleFactor+"%"};if(this.state.gameComplete)t=Object(N.jsx)("div",{className:"puzzle-area puzzle-complete",style:n});else{var a=this.state.pieces.map((function(t){return e.renderPiece(t)}));t=Object(N.jsx)("div",{className:"puzzle-area",onMouseMove:function(t){return e.handleMouseMove(t)},onMouseUp:function(){return e.handleMouseUp()},style:n,children:a})}return Object(N.jsxs)("div",{className:"puzzle-container mt-2 pb-3",children:[Object(N.jsx)("div",{className:"puzzle-background"}),t]})}}]),n}(a.Component)),R=n(43),T=n(47),B=n(46),E=n(44),W=n(45),F=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var t=this.props.image,e="";if(t&&t.source){var n=(t.source.nameIsTitle?t.name:"Photo")+" by "+t.author;e=Object(N.jsxs)(R.a,{children:[Object(N.jsxs)(E.a,{children:[Object(N.jsx)(W.a,{md:"8",children:Object(N.jsx)("img",{src:t.url,width:"100%"})}),Object(N.jsxs)(W.a,{md:"4",className:"mt-3 mt-md-0 pl-md-0",children:[Object(N.jsx)("p",{children:n}),Object(N.jsxs)("p",{children:["Source: ",t.source.sourceName]})]})]}),Object(N.jsx)(E.a,{className:"mt-md-3",children:Object(N.jsxs)(W.a,{children:[Object(N.jsxs)("p",{children:["See the original at: ",Object(N.jsx)("a",{href:t.source.sourceUrl,target:"_blank",rel:"external noopener",children:t.source.sourceUrl})]}),t.source.description?Object(N.jsx)("p",{children:t.source.description}):null]})})]})}return Object(N.jsxs)(T.a,{toggle:this.props.toggleModal,isOpen:this.props.isOpen,centered:!0,children:[Object(N.jsx)(B.a,{toggle:this.props.toggleModal,children:"Image details"}),e]})}}]),n}(a.Component),U=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).toggleModal=a.toggleModal.bind(Object(u.a)(a)),a.state={modalOpen:!1},a}return Object(h.a)(n,[{key:"toggleModal",value:function(){this.setState((function(t){return{modalOpen:!t.modalOpen}}))}},{key:"render",value:function(){var t=this.props.puzzleImage;if(!t)return null;var e=t.source&&t.source.isPhoto,n=t.source&&t.source.nameIsTitle,a=n?Object(N.jsx)("em",{children:t.name}):"",o="";t.author&&(o+=n?", ".concat(e?" photo":""," by "):e?"Photo by ":"By ",o+=t.author);var s=t.source?Object(N.jsx)("button",{type:"button",className:"btn btn-link btn-sm text-muted px-1",onClick:this.toggleModal,children:"more info"}):"";return Object(N.jsxs)("div",{className:"container mt-3",children:[Object(N.jsxs)("div",{className:"row justify-content-center mx-n2",children:[Object(N.jsx)("div",{className:"col-0 col-sm px-2",children:" "}),Object(N.jsx)("div",{className:"col-auto px-2",children:Object(N.jsxs)("p",{className:"h5",children:[a,o]})}),Object(N.jsx)("div",{className:"col-auto col-sm px-2",children:s})]}),Object(N.jsx)(F,{toggleModal:this.toggleModal,isOpen:this.state.modalOpen,image:t})]})}}]),n}(a.Component),L=function t(e,n,a,o,s,c,i){Object(l.a)(this,t),this.name=e,this.url=n,this.defaultRows=a,this.defaultCols=o,this.author=s,this.source=c,this.shortName=null!==i&&void 0!==i?i:e},A=function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(l.a)(this,t),this.sourceName=e,this.nameIsTitle=n,this.sourceUrl=o,this.isPhoto=a,this.description=s},V=n.p+"static/media/ito-jakuchu-red-parrot-on-the-branch-of-a-tree.a8f36cd5.jpg",Y=n.p+"static/media/david-clode-eOSqRq2Qm1c-unsplash.42540cb6.jpg",G=n.p+"static/media/casey-horner-80UR4DM2Rz0-unsplash.001ae9f7.jpg",q=n.p+"static/media/van-gogh-roses-nga.8fa9d120.jpg",J=n.p+"static/media/scott-webb-lYzgtps0UtQ-unsplash.509dd0a5.jpg",Q=n.p+"static/media/travel-sourced-FsmcD6uKcHk-unsplash.97041d06.jpg",X=[new L("Red Parrot on the Branch of a Tree",V,6,8,"It\u014d Jakuch\u016b",new A("Metropolitan Museum of Art",!0,!1,"https://www.metmuseum.org/art/collection/search/57123"),"Red Parrot"),new L("Coral",Y,7,10,"David Clode",new A("Unsplash",!1,!0,"https://unsplash.com/photos/eOSqRq2Qm1c")),new L("Starry Sky",G,7,10,"Casey Horner",new A("Unsplash",!1,!0,"https://unsplash.com/photos/80UR4DM2Rz0")),new L("Roses",q,8,10,"Vincent van Gogh",new A("National Gallery of Art",!0,!1,"https://www.nga.gov/collection/art-object-page.72328.html")),new L("Succulents",J,11,7,"Scott Webb",new A("Unsplash",!1,!0,"https://unsplash.com/photos/lYzgtps0UtQ")),new L("Jellyfish",Q,7,10,"Travel Sourced",new A("Unsplash",!1,!0,"https://unsplash.com/photos/FsmcD6uKcHk"))],K=function(t){Object(p.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).handleSelectChange=a.handleSelectChange.bind(Object(u.a)(a)),a.handleDimensionsChange=a.handleDimensionsChange.bind(Object(u.a)(a)),a.handleDimensionsBlur=a.handleDimensionsBlur.bind(Object(u.a)(a)),a.newPuzzle=a.newPuzzle.bind(Object(u.a)(a)),a.state={selectedImage:X[0],rows:X[0].defaultRows,cols:X[0].defaultCols},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.newPuzzle()}},{key:"handleSelectChange",value:function(t){var e=t.target;if(-1!==e.selectedIndex){var n=e.options[e.selectedIndex],a=X[n.getAttribute("data-index")];this.setState({selectedImage:a,rows:a.defaultRows,cols:a.defaultCols})}}},{key:"handleDimensionsChange",value:function(t){this.setState(Object(O.a)({},t.target.name,t.target.valueAsNumber))}},{key:"handleDimensionsBlur",value:function(t){this.setState(Object(O.a)({},t.target.name,this.validateDimension(t.target.value)))}},{key:"validateDimension",value:function(t){var e=parseInt(t,10);return isNaN(e)||e<2?e=2:e>25&&(e=25),e}},{key:"newPuzzle",value:function(){var t=this,e=this.validateDimension(this.state.rows),n=this.validateDimension(this.state.cols),a=this.state.selectedImage.url;document.documentElement.style.setProperty("--puzzle-img","url(".concat(a,")"));var o=new Image;o.onload=function(){return t.props.newPuzzle(o.width,o.height,e,n,t.state.selectedImage)},o.src=a}},{key:"renderSelectOptions",value:function(){for(var t=[],e=0;e<X.length;e++){var n=X[e];t.push(Object(N.jsx)("option",{value:n.url,"data-index":e,children:n.shortName},e))}return t}},{key:"render",value:function(){var t="puzzle-image-select",e="row-input",n="col-input",a=isNaN(this.state.rows)?"":this.state.rows,o=isNaN(this.state.cols)?"":this.state.cols;return Object(N.jsx)("div",{className:"container mt-4",children:Object(N.jsxs)("form",{className:"form-inline justify-content-center",children:[Object(N.jsx)("label",{className:"mr-2",htmlFor:t,children:"Choose an image:"}),Object(N.jsx)("select",{id:t,className:"custom-select mr-sm-4 mb-2 mb-md-0",onChange:this.handleSelectChange,children:this.renderSelectOptions()}),Object(N.jsx)("div",{className:"w-100 d-md-none"}),Object(N.jsx)("label",{className:"mr-2",htmlFor:e,children:"Rows:"}),Object(N.jsx)("input",{id:e,className:"mr-2",type:"number",min:2,max:25,name:"rows",value:a,onChange:this.handleDimensionsChange,onBlur:this.handleDimensionsBlur}),Object(N.jsx)("label",{className:"mr-2",htmlFor:n,children:"Columns:"}),Object(N.jsx)("input",{id:n,className:"mr-4",type:"number",min:2,max:25,name:"cols",value:o,onChange:this.handleDimensionsChange,onBlur:this.handleDimensionsBlur}),Object(N.jsx)("button",{className:"btn btn-dark",type:"button",onClick:this.newPuzzle,children:"New puzzle"})]})})}}]),n}(a.Component),Z=(n(40),n(41),1);c.a.render(Object(N.jsx)(o.a.StrictMode,{children:Object(N.jsx)(K,{newPuzzle:function t(e,n,a,s,i){c.a.render(Object(N.jsxs)(o.a.StrictMode,{children:[Object(N.jsx)(K,{newPuzzle:t}),Object(N.jsx)(U,{puzzleImage:i}),Object(N.jsx)(I,{imgWidth:e,imgHeight:n,rows:a,cols:s},++Z)]}),document.getElementById("react-root"))}})}),document.getElementById("react-root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.cc69c4cf.chunk.js.map