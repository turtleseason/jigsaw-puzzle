(this["webpackJsonpjigsaw-puzzle"]=this["webpackJsonpjigsaw-puzzle"]||[]).push([[0],{58:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},87:function(e,t,s){},88:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s.n(n),i=s(19),o=s.n(i),r=s(15),c=s(50),l=s(17),h=s(4),u=s(5),d=s(11),p=s(10),g=s(9);function m(e){return Array.from(Array(e).keys())}function b(e){return Math.floor(Math.random()*Math.floor(e))}function j(e,t,s){if(t>s)throw Error("clamp: min (".concat(t,") is greater than max (").concat(s,")."));return Math.max(Math.min(e,s),t)}var f="b",O="r",v="f";function y(){var e=[f,O];return e[b(e.length)]}function x(e){switch(e){case f:return O;case O:return f;case v:throw Error("getOppositeEdge: Flat edge has no opposite type");default:throw Error("getOppositeEdge: Unknown edge type ".concat(e))}}var w=function(){function e(t,s,n,a,i){Object(h.a)(this,e),this.type=t,this.w=s,this.o=n,this.c1=a,this.c2=i}return Object(u.a)(e,[{key:"opposite",value:function(){return Object.assign(new e,this,{type:x(this.type)})}}]),e}(),k=s(31),P=s.n(k),I="Left",C="Top",z="Right",N="Bottom",S=Object(r.a)({},Symbol.iterator,P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I;case 2:return e.next=4,C;case 4:return e.next=6,z;case 6:return e.next=8,N;case 8:case"end":return e.stop()}}),e)}))),D=function(){function e(t){var s;Object(h.a)(this,e),this.key=t.key,this.pieces=[t.key],this.bounds=(s={},Object(r.a)(s,I,t.col),Object(r.a)(s,C,t.row),Object(r.a)(s,z,t.col),Object(r.a)(s,N,t.row),s)}return Object(u.a)(e,[{key:"mergeWith",value:function(e){this.pieces=this.pieces.concat(e.pieces),this.bounds.Left=Math.min(this.bounds.Left,e.bounds.Left),this.bounds.Right=Math.max(this.bounds.Right,e.bounds.Right),this.bounds.Top=Math.min(this.bounds.Top,e.bounds.Top),this.bounds.Bottom=Math.max(this.bounds.Bottom,e.bounds.Bottom)}}]),e}(),M=function(){function e(t,s,n,a,i,o,r,c){Object(h.a)(this,e),this.group=t,this.key=t,this.col=s,this.row=n,this.imageOffset=i,this.zIndex=o,this.edges=r,this.neighbors=c,this.setPos(a)}return Object(u.a)(e,[{key:"pos",get:function(){return this.actualPos},set:function(e){throw Error('PieceModel: Don\'t set "pos" directly - use setPos() instead.')}},{key:"setPos",value:function(e){var t=e.left,s=e.top;this.actualPos={left:t,top:s},this.displayPos=this.actualPos}},{key:"setDisplayPos",value:function(e){var t=e.left,s=e.top;this.displayPos={left:t,top:s}}},{key:"clone",value:function(){var t=new e(this.key,this.col,this.row,this.pos,this.imageOffset,this.zIndex,this.edges,this.neighbors);return t.group=this.group,t.setDisplayPos(this.displayPos),t}}]),e}(),U=s(1),B=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"getClipPathString",value:function(e){var t,s="",n=Object(l.a)(S);try{for(n.s();!(t=n.n()).done;){var a=t.value;s+=this.props.edgeDrawer.getPathString(a,e[a])}}catch(i){n.e(i)}finally{n.f()}return s}},{key:"render",value:function(){return Object(U.jsx)("clipPath",{id:"clip-"+this.props.pieceKey,children:Object(U.jsx)("path",{d:this.getClipPathString(this.props.edges)})})}}]),s}(n.PureComponent),R=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"renderClipPath",value:function(e){return Object(U.jsx)(B,{edgeDrawer:this.props.edgeDrawer,pieceKey:e.key,edges:e.edges},e.key)}},{key:"render",value:function(){var e,t=this,s=null===(e=this.props.pieces)||void 0===e?void 0:e.map((function(e){return t.renderClipPath(e)}));return Object(U.jsx)("svg",{width:"0",height:"0",children:s})}}]),s}(n.PureComponent),F=function(){function e(t,s,n){Object(h.a)(this,e),this.templates=this.makeTemplates(t,s,n)}return Object(u.a)(e,[{key:"makeTemplates",value:function(e,t,s){var n={};return n.START="M ".concat(s," ").concat(t-s," "),n.bLeft=function(e,n,a,i){return"V ".concat((t+e)/2)+"C ".concat(s-n," ").concat(t/2+a," ",0," ").concat(t/2+i," ",0," ").concat(t/2," ")+"C ".concat(0," ",t/2-i," ").concat(s-n," ").concat(t/2-a," ").concat(s," ").concat((t-e)/2," ")},n.rLeft=function(e,n,a,i){return"V ".concat((t+e)/2)+"C ".concat(s+n," ").concat(t/2+a," ").concat(2*s," ").concat(t/2+i," ").concat(2*s," ").concat(t/2," ")+"C ".concat(2*s," ").concat(t/2-i," ").concat(s+n," ").concat(t/2-a," ").concat(s," ").concat((t-e)/2," ")},n.Left="V ".concat(s," "),n.bTop=function(t,n,a,i){return"H ".concat((e-t)/2," ")+"C ".concat(e/2-a," ").concat(s-n," ").concat(e/2-i," ",0," ").concat(e/2," ",0," ")+"C ".concat(e/2+i," ",0," ").concat(e/2+a," ").concat(s-n," ").concat((e+t)/2," ").concat(s," ")},n.rTop=function(t,n,a,i){return"H ".concat((e-t)/2," ")+"C ".concat(e/2-a," ").concat(s+n,"  ").concat(e/2-i," ").concat(2*s," ").concat(e/2," ").concat(2*s," ")+"C ".concat(e/2+i," ").concat(2*s," ").concat(e/2+a," ").concat(s+n," ").concat((e+t)/2," ").concat(s," ")},n.Top="H ".concat(e-s," "),n.bRight=function(n,a,i,o){return"V ".concat((t-n)/2," ")+"C ".concat(e-s+a," ").concat(t/2-i," ").concat(e," ").concat(t/2-o," ").concat(e," ").concat(t/2," ")+"C ".concat(e," ").concat(t/2+o," ").concat(e-s+a," ").concat(t/2+i," ").concat(e-s," ").concat((t+n)/2," ")},n.rRight=function(n,a,i,o){return"V ".concat((t-n)/2," ")+"C ".concat(e-s-a," ").concat(t/2-i," ").concat(e-2*s," ").concat(t/2-o," ").concat(e-2*s," ").concat(t/2," ")+"C ".concat(e-2*s," ").concat(t/2+o," ").concat(e-s-a," ").concat(t/2+i," ").concat(e-s," ").concat((t+n)/2," ")},n.Right="V ".concat(t-s," "),n.bBottom=function(n,a,i,o){return"H ".concat((e+n)/2," ")+"C ".concat(e/2+i," ").concat(t-s+a," ").concat(e/2+o," ").concat(t," ").concat(e/2," ").concat(t," ")+"C ".concat(e/2-o," ").concat(t," ").concat(e/2-i," ").concat(t-s+a," ").concat((e-n)/2," ").concat(t-s," ")},n.rBottom=function(n,a,i,o){return"H ".concat((e+n)/2," ")+"C ".concat(e/2+i," ").concat(t-s-a,"  ").concat(e/2+o," ").concat(t-2*s," ").concat(e/2," ").concat(t-2*s," ")+"C ".concat(e/2-o," ").concat(t-2*s," ").concat(e/2-i," ").concat(t-s-a," ").concat((e-n)/2," ").concat(t-s," ")},n.Bottom="Z",n}},{key:"getPathString",value:function(e,t){var s=e===I?this.templates.START:"",n=this.templates[e],a="";if(t.type!==v){var i=t.type+e;a=this.templates[i](t.w,t.o,t.c1,t.c2)}return s+a+n}}]),e}(),H=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){var e=this.props.model;return Object(U.jsx)("div",{style:{left:e.displayPos.left,top:e.displayPos.top,position:"absolute"},children:Object(U.jsx)("svg",{className:"puzzle-piece","data-id":e.key,width:this.props.width,height:this.props.height,clipPath:"url(#clip-".concat(e.key,")"),style:{zIndex:e.zIndex>0?e.zIndex:"auto"},onPointerDown:this.props.onPointerDown,children:Object(U.jsx)("image",{href:this.props.imgUrl,x:this.props.model.imageOffset.left,y:this.props.model.imageOffset.top,onDragStart:function(e){return e.preventDefault()}})})})}}]),s}(n.PureComponent),L=s(23),E=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){var e;Object(h.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state=Object(L.a)({},e.props.startPos),e.handleTransitionEnd=function(){e.setState({animationComplete:!0})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame((function(){return requestAnimationFrame((function(){return e.setState({top:0,left:0})}))}))}},{key:"render",value:function(){return Object(U.jsx)("img",{className:"puzzle-complete-img",src:this.props.imgUrl,alt:"Completed puzzle",width:this.props.width,height:this.props.height,style:this.state,onTransitionEnd:this.handleTransitionEnd})}}]),s}(n.Component),T=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){var e;Object(h.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).imgUrl=e.props.imgUrl,e.imgWidth=e.props.imgWidth,e.imgHeight=e.props.imgHeight,e.pieceWidth=e.props.pieceWidth,e.pieceHeight=e.props.pieceHeight,e.edgeDrawer=new F(e.props.pieceWidth,e.props.pieceHeight,e.props.borderSize),e}return Object(u.a)(s,[{key:"getPuzzleOffsetFromCenter",value:function(){var e=this.props.getBoardDimensions(),t=this.props.pieces[this.props.topLeftKey].pos,s=(e.width/this.props.scaleFactor-this.props.imgWidth)/2,n=(e.height/this.props.scaleFactor-this.props.imgHeight)/2;return{left:t.left+this.props.borderSize-s,top:t.top+this.props.borderSize-n}}},{key:"renderPiece",value:function(e){return Object(U.jsx)(H,{model:e,width:this.pieceWidth,height:this.pieceHeight,imgUrl:this.imgUrl,onPointerDown:this.props.pointerDownHandlers[e.key]},e.key)}},{key:"render",value:function(){var e=this,t=this.props,s=t.scaleFactor,n=t.pieces,a=t.draggedPiece,i=t.gameComplete,o=t.onPointerMove,r=t.onPointerUp,c={transform:"scale(".concat(s,")"),width:100/s+"%",height:100/s+"%"},l=i?Object(U.jsx)("div",{className:"puzzle-area",style:c,children:Object(U.jsx)(E,{imgUrl:this.imgUrl,startPos:this.getPuzzleOffsetFromCenter(),width:this.imgWidth,height:this.imgHeight})}):Object(U.jsxs)("div",{className:"puzzle-area"+(null!==a?" no-scroll":""),style:c,onPointerMove:o,onPointerUp:r,children:[Object(U.jsx)(R,{edgeDrawer:this.edgeDrawer,pieces:n}),null===n||void 0===n?void 0:n.map((function(t){return e.renderPiece(t)}))]});return Object(U.jsxs)("div",{className:"puzzle-container pt-2 pb-3",children:[Object(U.jsx)("div",{className:"puzzle-background"}),l]})}}]),s}(n.Component),W=(s(58),function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).innerWidth=n.props.imgWidth/n.props.cols,n.innerHeight=n.props.imgHeight/n.props.rows,n.borderSize=Math.min(n.innerHeight,n.innerWidth)/4,n.pieceWidth=2*n.borderSize+n.innerWidth,n.pieceHeight=2*n.borderSize+n.innerHeight,n.nextzIndex=1,n.state={scaleFactor:void 0,offsetX:void 0,offsetY:void 0,pieces:void 0,draggedPiece:null,gameComplete:!1,endAnimationComplete:!1},n.handlePointerDown=function(e,t){if(null===n.state.draggedPiece&&t.isPrimary&&("mouse"!==t.pointerType||0===t.button)){var s,a=n.state.pieces.slice(),i=a[e].group,o=Object(l.a)(n.groups.get(i).pieces);try{for(o.s();!(s=o.n()).done;){var r=s.value;a[r]=a[r].clone(),a[r].zIndex=n.nextzIndex,a[r].setPos(a[r].displayPos)}}catch(c){o.e(c)}finally{o.f()}n.nextzIndex++,n.setState({pieces:a,draggedPiece:e,offsetX:t.clientX-a[e].pos.left*n.state.scaleFactor,offsetY:t.clientY-a[e].pos.top*n.state.scaleFactor})}},n.handlePointerMove=function(e){if(null!==n.state.draggedPiece&&e.isPrimary&&document.elementsFromPoint(e.clientX,e.clientY).some((function(e){return e.classList.contains("puzzle-area")}))){var t=n.state.pieces.slice(),s=t[n.state.draggedPiece].clone();t[n.state.draggedPiece]=s;var a=(e.clientX-n.state.offsetX)/n.state.scaleFactor,i=(e.clientY-n.state.offsetY)/n.state.scaleFactor;s.setPos({left:a,top:i});var o,r=n.groups.get(s.group),c=Object(l.a)(r.pieces);try{for(c.s();!(o=c.n()).done;){var h=o.value;h!==n.state.draggedPiece&&(t[h]=t[h].clone(),n.alignPiece(t[h],s))}}catch(u){c.e(u)}finally{c.f()}n.setState({pieces:t})}},n.handlePointerUp=function(){if(null!==n.state.draggedPiece){var e,t=n.state.pieces.slice(),s=t[n.state.draggedPiece].group,a=Object(l.a)(n.groups.get(s).pieces);try{for(a.s();!(e=a.n()).done;){var i,o=t[e.value],r=Object(l.a)(S);try{for(r.s();!(i=r.n()).done;){var c=i.value,h=t[o.neighbors[c]];h&&h.group!==o.group&&n.isTouching(o,c,h)&&n.mergeGroups(t,o.group,h.group)}}catch(d){r.e(d)}finally{r.f()}}}catch(d){a.e(d)}finally{a.f()}var u=1===n.groups.size;n.setState({pieces:t,gameComplete:u,draggedPiece:null})}},n.handleResize=function(){var e=n.setScaleFactor();n.clampPiecesToBoardBounds(e)},n.pointerDownHandlers=m(n.props.rows*n.props.cols).map((function(e){return n.handlePointerDown.bind(Object(d.a)(n),e)})),n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this.setScaleFactor();window.addEventListener("resize",this.handleResize);var t=this.createPieces(e);this.groups=this.createGroups(t),this.setState({pieces:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"setScaleFactor",value:function(){var e=.7*document.documentElement.clientWidth/this.props.imgWidth,t=.7*document.documentElement.clientHeight/this.props.imgHeight,s=Math.min(e,t);return this.setState({scaleFactor:s}),s}},{key:"getBoardDimensions",value:function(){var e=document.querySelector(".puzzle-background");return{width:e.clientWidth,height:e.clientHeight}}},{key:"clampPiecesToBoardBounds",value:function(e){var t,s=this.getBoardDimensions(),n=s.width/e-this.pieceWidth,a=s.height/e-this.pieceHeight,i=this.state.pieces.slice(),o=Object(l.a)(i.entries());try{for(o.s();!(t=o.n()).done;){var r=Object(c.a)(t.value,2),h=r[0],u=r[1],d=this.groups.get(u.group),p=n-this.innerWidth*(d.bounds.Right-u.col),g=a-this.innerHeight*(d.bounds.Bottom-u.row);i[h]=u.clone(),i[h].setDisplayPos({left:u.pos.left>p?p:u.pos.left,top:u.pos.top>g?g:u.pos.top})}}catch(m){o.e(m)}finally{o.f()}this.setState({pieces:i})}},{key:"getGridPosition",value:function(e,t,s){return{left:(this.innerWidth+s)*e-this.borderSize,top:(this.innerHeight+s)*t-this.borderSize}}},{key:"getRandomPosition",value:function(e){var t=this.getBoardDimensions();return t.width>t.height?{left:Math.random()*(.15*t.width/e),top:Math.random()*(t.height/e-this.pieceHeight)}:{left:Math.random()*(t.width/e-this.pieceWidth),top:Math.random()*(.15*t.height)/e}}},{key:"getPieceImageOffset",value:function(e,t){return{left:-this.innerWidth*e+this.borderSize,top:-this.innerHeight*t+this.borderSize}}},{key:"createEdge",value:function(e){var t=this.borderSize*(.8+.45*Math.random()),s=this.borderSize*(.4+.1*Math.random()),n=t>this.borderSize?t*(.75+.25*Math.random()):this.borderSize*(.85+.35*Math.random()),a=t*(.5+.15*Math.random());return new w(e,t,s,n,a)}},{key:"createPieces",value:function(e){for(var t=this,s=[],n=m(this.props.cols*this.props.rows),a=Array(this.props.cols).fill(null).map((function(){return Array(t.props.rows)})),i=0;i<this.props.cols;i++)for(var o=0;o<this.props.rows;o++){var c,l=n.splice(b(n.length),1)[0];a[i][o]=l;var h=this.getRandomPosition(e),u=this.getPieceImageOffset(i,o),d={};i>0&&(d.Left=a[i-1][o],s[d.Left].neighbors.Right=l),o>0&&(d.Top=a[i][o-1],s[d.Top].neighbors.Bottom=l);var p=(c={},Object(r.a)(c,I,0===i?this.createEdge(v):s[d.Left].edges.Right.opposite()),Object(r.a)(c,C,0===o?this.createEdge(v):s[d.Top].edges.Bottom.opposite()),Object(r.a)(c,z,i===this.props.cols-1?this.createEdge(v):this.createEdge(y())),Object(r.a)(c,N,o===this.props.rows-1?this.createEdge(v):this.createEdge(y())),c);s[l]=new M(l,i,o,h,u,0,p,d)}return this.topLeftKey=a[0][0],s}},{key:"createGroups",value:function(e){var t=new Map;return e.forEach((function(e){return t.set(e.key,new D(e))})),t}},{key:"alignPiece",value:function(e,t){e.setPos({left:t.displayPos.left+this.innerWidth*(e.col-t.col),top:t.displayPos.top+this.innerHeight*(e.row-t.row)})}},{key:"isTouching",value:function(e,t,s){var n=7/this.state.scaleFactor;return t===z?Math.abs(e.displayPos.top-s.displayPos.top)<=n&&Math.abs(s.displayPos.left-e.displayPos.left-this.innerWidth)<=n:t===I?Math.abs(e.displayPos.top-s.displayPos.top)<=n&&Math.abs(e.displayPos.left-s.displayPos.left-this.innerWidth)<=n:t===C?Math.abs(e.displayPos.left-s.displayPos.left)<=n&&Math.abs(e.displayPos.top-s.displayPos.top-this.innerHeight)<=n:t===N?Math.abs(e.displayPos.left-s.displayPos.left)<=n&&Math.abs(s.displayPos.top-e.displayPos.top-this.innerHeight)<=n:void 0}},{key:"mergeGroups",value:function(e,t,s){var n,a=e[this.groups.get(t).pieces[0]],i=Object(l.a)(this.groups.get(s).pieces);try{for(i.s();!(n=i.n()).done;){var o=n.value,r=e[o].clone();r.group=t,r.zIndex=a.zIndex,this.alignPiece(r,a),e[o]=r}}catch(c){i.e(c)}finally{i.f()}this.groups.get(t).mergeWith(this.groups.get(s)),this.groups.delete(s)}},{key:"render",value:function(){return Object(U.jsx)(T,{imgUrl:this.props.imgUrl,imgWidth:this.props.imgWidth,imgHeight:this.props.imgHeight,pieceWidth:this.pieceWidth,pieceHeight:this.pieceHeight,borderSize:this.borderSize,topLeftKey:this.topLeftKey,scaleFactor:this.state.scaleFactor,gameComplete:this.state.gameComplete,pieces:this.state.pieces,draggedPiece:this.state.draggedPiece,getBoardDimensions:this.getBoardDimensions,onPointerMove:this.handlePointerMove,onPointerUp:this.handlePointerUp,pointerDownHandlers:this.pointerDownHandlers})}}]),s}(n.Component)),A=s(90),K=s(97),V=s(93),G=s(91),q=s(92),Y=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){var e=this.props.image,t="";if(e&&e.source){var s=(e.source.nameIsTitle?e.name:"Photo")+" by "+e.author;t=Object(U.jsxs)(A.a,{children:[Object(U.jsxs)(G.a,{children:[Object(U.jsx)(q.a,{md:"8",children:Object(U.jsx)("img",{src:e.url,alt:"Thumbnail",width:"100%"})}),Object(U.jsxs)(q.a,{md:"4",className:"mt-3 mt-md-0 pl-md-0",children:[Object(U.jsx)("p",{children:s}),Object(U.jsxs)("p",{children:["Source: ",e.source.sourceName]})]})]}),Object(U.jsx)(G.a,{className:"mt-md-3",children:Object(U.jsxs)(q.a,{children:[Object(U.jsxs)("p",{className:"text-break",children:["See the original at: ",Object(U.jsx)("a",{href:e.source.sourceUrl,target:"_blank",rel:"external noreferrer",children:e.source.sourceUrl})]}),e.source.description?Object(U.jsx)("p",{children:e.source.description}):null]})})]})}return Object(U.jsxs)(K.a,{toggle:this.props.toggleModal,isOpen:this.props.isOpen,centered:!0,children:[Object(U.jsx)(V.a,{toggle:this.props.toggleModal,children:"Image details"}),t]})}}]),s}(n.Component),_=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).toggleModal=n.toggleModal.bind(Object(d.a)(n)),n.state={modalOpen:!1},n}return Object(u.a)(s,[{key:"toggleModal",value:function(){this.setState((function(e){return{modalOpen:!e.modalOpen}}))}},{key:"render",value:function(){var e=this.props.puzzleImage;if(!e)return null;var t=e.source&&e.source.isPhoto,s=e.source&&e.source.nameIsTitle,n=s?Object(U.jsx)("em",{children:e.name}):"",a="";e.author&&(a+=s?", ".concat(t?" photo":""," by "):t?"Photo by ":"By ",a+=e.author);var i=e.source?Object(U.jsx)("button",{type:"button",className:"btn btn-link btn-sm text-muted px-1",onClick:this.toggleModal,children:"more info"}):"";return Object(U.jsxs)("div",{className:"container-fluid container-md mt-3",children:[Object(U.jsxs)("div",{className:"row justify-content-center flex-sm-nowrap mx-n2",children:[Object(U.jsx)("div",{className:"col-2 d-none d-md-block px-2",children:" "}),Object(U.jsx)("div",{className:"col-auto flex-shrink-1 px-2",children:Object(U.jsxs)("p",{className:"h5",children:[n,a]})}),Object(U.jsx)("div",{className:"col-auto col-sm-2 px-2",children:i})]}),Object(U.jsx)(Y,{toggleModal:this.toggleModal,isOpen:this.state.modalOpen,image:e})]})}}]),s}(n.Component),X=s(98),Q=s(96),J=s(94),Z=function e(t,s,n,a,i,o,r){Object(h.a)(this,e),this.name=t,this.url=s,this.defaultRows=n,this.defaultCols=a,this.author=i,this.source=o,this.shortName=null!==r&&void 0!==r?r:t},$=function e(t){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(h.a)(this,e),this.sourceName=t,this.nameIsTitle=s,this.sourceUrl=a,this.isPhoto=n,this.description=i},ee=function e(t,s,n){Object(h.a)(this,e),this.type=t,this.statusCode=s,this.details=n},te=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"getErrorDisplay",value:function(){var e=this.props.error;if(429===e.statusCode&&"upstream"===e.type)return{title:"Rate limit exceeded (API)",text:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("p",{children:"The hourly limit for requests from this site to the Unsplash server has been reached."}),Object(U.jsxs)("p",{children:["Feel free to ",Object(U.jsx)("a",{className:"alert-link",href:"https://github.com/turtleseason/jigsaw-puzzle/issues",rel:"external",children:"open an issue on GitHub"})," ","to let me know - ",Object(U.jsx)("br",{}),"if this happens often, I can look into applying for a higher rate limit."]})]})};if(429===e.statusCode&&"proxy"===e.type)return{title:"Rate limit exceeded (API Proxy)",text:Object(U.jsxs)("p",{children:["Please try again in a moment.",Object(U.jsx)("br",{}),"(If you get this error frequently, feel free to "," ",Object(U.jsx)("a",{className:"alert-link",href:"https://github.com/turtleseason/jigsaw-puzzle/issues",rel:"external",children:"open an issue on GitHub"})," ","and let me know.)"]})};var t="network"===e.type?"Network error":"Status code ".concat(e.statusCode," (").concat(e.type,")"),s=e.details?" - "+e.details:null;return{title:"Something went wrong :0",text:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("p",{children:Object(U.jsxs)("small",{className:"",children:["Error details: ",t,s]})}),Object(U.jsxs)("p",{children:["Please try again. If you keep getting an error, feel free to "," ",Object(U.jsx)("a",{className:"alert-link",href:"https://github.com/turtleseason/jigsaw-puzzle/issues",rel:"external",children:"open an issue on GitHub"})," ","and let me know."]})]})}}},{key:"render",value:function(){if(!this.props.error)return null;var e=this.getErrorDisplay();return Object(U.jsxs)("div",{className:"search-error alert alert-warning text-center",role:"alert",children:[Object(U.jsx)("h6",{className:"alert-heading",children:e.title}),e.text,Object(U.jsxs)("p",{className:"mt-n2",children:["You can still search photos directly on ",Object(U.jsx)("a",{href:"https://unsplash.com/",target:"_blank",rel:"external noreferrer",children:"Unsplash.com"}),","," ","download an image to your computer, and load it using the file selector."]})]})}}]),s}(n.Component),se=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"handleImageClick",value:function(e){this.props.chooseImage(this.props.images[this.props.page][e])}},{key:"handleKeyDown",value:function(e,t){"Enter"!==t.key&&"Space"!==t.key||"A"===t.target.tagName||(this.props.chooseImage(this.props.images[this.props.page][e]),t.preventDefault())}},{key:"renderImage",value:function(e,t){var s=this,n=this.props.selectedImage===e;return Object(U.jsx)("div",{"data-testid":"result",className:"result-container mb-2",tabIndex:"0",onClick:function(){return s.handleImageClick(t)},onKeyDown:function(e){return s.handleKeyDown(t,e)},children:Object(U.jsx)("div",{className:"result ".concat(n?"result-selected":""),children:Object(U.jsxs)("div",{className:"placeholder",style:{paddingTop:e.height/e.width*100+"%"},children:[Object(U.jsx)("img",{src:e.urls.small,alt:e.alt_description}),Object(U.jsxs)("span",{className:"badge badge-dark",children:["By ",Object(U.jsx)("a",{className:"text-light",href:e.user.links.html,rel:"external noreferrer",target:"_blank",children:e.user.name})," ","on ",Object(U.jsx)("a",{className:"text-light",href:e.links.html,rel:"external noreferrer",target:"_blank",children:"Unsplash"})]})]})})},e.id)}},{key:"render",value:function(){var e=this,t=this.props.images[this.props.page],s=Object(U.jsx)("div",{className:"text-secondary",children:"Image results will go here, and it will be very cool."}),n=Object(U.jsx)("div",{className:"text-secondary",children:"No results found. :("}),a=Object(U.jsx)("div",{className:"spinner-border my-1",role:"status",children:Object(U.jsx)("span",{className:"sr-only",children:"Loading..."})});return Object(U.jsxs)("div",{className:"search-results-container text-center",children:[this.props.isLoading||t?null:s,!this.props.isLoading&&t&&0===t.length?n:null,this.props.isLoading?a:null,Object(U.jsx)("div",{className:"search-results",children:t?t.map((function(t,s){return e.renderImage(t,s)})):null})]})}}]),s}(n.Component),ne=s(51),ae=["currentPage","minPage","maxPage","numPageLinks","onPageChange","className","ariaLabel"],ie=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"handleNavigate",value:function(e,t){e.preventDefault(),this.props.onPageChange&&this.props.onPageChange(t)}},{key:"renderPageLinks",value:function(){var e=this,t=[],s=this.props.currentPage-this.props.numPageLinks-1,n=this.props.currentPage+this.props.numPageLinks+1;s>=this.props.minPage?t.push(Object(U.jsx)("li",{children:Object(U.jsx)("span",{className:"btn",style:{cursor:"default"},children:"..."})},s)):t.push(Object(U.jsx)("li",{className:"invisible"},s));for(var a=function(s){var n=null;s===e.props.currentPage?n=Object(U.jsx)("span",{className:"btn",style:{cursor:"default"},children:s}):s>=e.props.minPage&&s<=e.props.maxPage&&(n=Object(U.jsx)("button",{className:"btn btn-link",type:"button",onClick:function(t){return e.handleNavigate(t,s)},children:s})),t.push(Object(U.jsx)("li",{className:n?null:"invisible",children:n},s))},i=s+1;i<n;i++)a(i);return n<=this.props.maxPage?t.push(Object(U.jsx)("li",{children:Object(U.jsx)("span",{className:"btn",style:{cursor:"default"},children:"..."})},n)):t.push(Object(U.jsx)("li",{className:"invisible"},n)),Object(U.jsx)("ul",{children:t})}},{key:"render",value:function(){var e=this,t=this.props,s=(t.currentPage,t.minPage,t.maxPage,t.numPageLinks,t.onPageChange,t.className),n=t.ariaLabel,a=Object(ne.a)(t,ae),i="custom-pagination container "+(s||""),o=n||"Search results pages",r=!(this.props.currentPage>this.props.minPage),c=!(this.props.currentPage<this.props.maxPage),l=this.renderPageLinks();return Object(U.jsx)("nav",Object(L.a)(Object(L.a)({className:i,"aria-label":o},a),{},{children:Object(U.jsxs)("div",{className:"row justify-content-between align-items-center",children:[Object(U.jsx)("div",{className:"col-auto p-0",children:Object(U.jsx)("button",{className:"btn btn-link"+(r?" invisible":""),type:"button",onClick:r?null:function(t){return e.handleNavigate(t,e.props.currentPage-1)},children:"< Back"})}),Object(U.jsx)("div",{className:"col-auto",children:l}),Object(U.jsx)("div",{className:"col-auto p-0",children:Object(U.jsx)("button",{className:"btn btn-link"+(c?" invisible":""),type:"button",onClick:c?null:function(t){return e.handleNavigate(t,e.props.currentPage+1)},children:"More >"})})]})}))}}]),s}(n.Component);ie.defaultProps={minPage:1,maxPage:Number.MAX_SAFE_INTEGER,numPageLinks:1};s(68);var oe=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).handleInputChange=n.handleInputChange.bind(Object(d.a)(n)),n.handleInputKeyDown=n.handleInputKeyDown.bind(Object(d.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(d.a)(n)),n.handleSearchButtonClick=n.handleSearchButtonClick.bind(Object(d.a)(n)),n.handleChooseButtonClick=n.handleChooseButtonClick.bind(Object(d.a)(n)),n.selectImage=n.selectImage.bind(Object(d.a)(n)),n.proxyUrl="https://ni8jay6n41.execute-api.us-west-2.amazonaws.com",n.searchBoxRef=a.a.createRef(),n.state={images:[],page:1,maxPage:1,searchString:"",isSearchStringValid:!0,isSearchLoading:!1,error:null,selectedImage:null},n}return Object(u.a)(s,[{key:"handleInputChange",value:function(e){this.setState({searchString:e.target.value})}},{key:"handleInputKeyDown",value:function(e){"Enter"===e.key&&(this.handleSearchButtonClick(),e.preventDefault())}},{key:"handlePageChange",value:function(e){var t=this;this.state.isSearchLoading||(e=j(e=Math.floor(e),1,10),requestAnimationFrame((function(){return t.searchBoxRef.current.scrollIntoView()})),this.state.images[e-1]?this.setState({page:e}):this.searchImages(e))}},{key:"handleSearchButtonClick",value:function(){var e=this;this.setState({images:[]},(function(){return e.searchImages(1)}))}},{key:"handleChooseButtonClick",value:function(){this.chooseImage(),this.props.toggleModal()}},{key:"selectImage",value:function(e){this.setState({selectedImage:e})}},{key:"getSearchUrl",value:function(e,t){return"".concat(this.proxyUrl,"/search/").concat(encodeURIComponent(e),"/page/").concat(t)}},{key:"getDownloadUrl",value:function(e){return"".concat(this.proxyUrl,"/download/").concat(e)}},{key:"addImages",value:function(e,t,s){var n=this.state.images.slice();n[t-1]=e;var a=Math.min(s,10);this.setState({images:n,page:t,maxPage:a})}},{key:"chooseImage",value:function(){var e=this.state.selectedImage,t=this.props.generateDefaultDimensions(e.width,e.height);this.props.setImage(new Z("Unsplash Photo (".concat(e.id,")"),e.urls.regular,t.rows,t.cols,e.user.name,new $("Unsplash",!1,!0,e.links.html))),this.trackDownload(e.id)}},{key:"validateQuery",value:function(e){var t=e&&!/^\s*$/.test(e);return this.setState({isSearchStringValid:t}),t}},{key:"searchImages",value:function(e){var t=this,s=this.state.searchString;this.validateQuery(s)&&(this.setState({isSearchLoading:!0}),fetch(this.getSearchUrl(s,e)).then((function(e){if(!e.ok)throw console.warn("Proxy server returned an error: ".concat(e.status,", ").concat(e.statusText)),t.setState({error:new ee("proxy",e.status,e.statusText)}),new Error("Failed response: ".concat(e.status,", ").concat(e.statusText));return e.json()})).then((function(s){if(s.errors)throw console.warn("Upstream server returned an error (status code ".concat(s.status,"):\n                    ").concat(s.errors.join(", "))),t.setState({error:new ee("upstream",s.status,s.errors.join(", "))}),new Error("Upstream failed response (status code ".concat(s.status,"):\n                    ").concat(s.errors.join(", ")));t.setState({error:null}),t.addImages(s.response.results,e,s.response.total_pages)})).catch((function(e){e instanceof TypeError&&t.setState({error:new ee("network")}),console.warn("".concat(e.name,": ").concat(e.message))})).finally((function(){t.setState({isSearchLoading:!1})})))}},{key:"trackDownload",value:function(e){fetch(this.getDownloadUrl(e)).then((function(e){if(e.ok)return e.json();throw new Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){if("success"!==e.type)throw new Error("".concat(e.status," - ").concat(e.errors.join(", ")," (upstream)"))})).catch((function(t){return console.warn("Image ".concat(e," download failed. Error:"),t.message)}))}},{key:"render",value:function(){var e=this.state.images[this.state.page-1]&&this.state.images[this.state.page-1].length>0;return Object(U.jsxs)(K.a,{toggle:this.props.toggleModal,isOpen:this.props.isOpen,scrollable:!0,size:"lg",centered:!0,children:[Object(U.jsx)(V.a,{toggle:this.props.toggleModal,children:"Find images"}),Object(U.jsxs)(A.a,{children:[Object(U.jsx)("p",{children:"Browse images from Unsplash.com by searching below."}),Object(U.jsxs)("div",{className:"form-group row mx-0",ref:this.searchBoxRef,children:[Object(U.jsx)("label",{className:"col-form-label mr-2",htmlFor:"img-search-input",children:"Search by keyword"}),Object(U.jsx)("input",{className:"col col-lg-4 form-control ".concat(this.state.isSearchStringValid?"":"is-invalid"," px-2 mr-2"),id:"img-search-input",type:"text",value:this.state.searchString,"aria-describedby":"searchValidationFeedback",onKeyDown:this.handleInputKeyDown,onChange:this.handleInputChange}),Object(U.jsx)("button",{className:"btn btn-dark mr-auto",type:"button",onClick:this.handleSearchButtonClick,children:"Search"}),Object(U.jsx)("div",{className:"w-100 d-lg-none"}),Object(U.jsx)("div",{className:"col invalid-feedback align-self-center",id:"searchValidationFeedback",children:"Please enter a search term."})]}),Object(U.jsx)(te,{error:this.state.error}),Object(U.jsx)(se,{images:this.state.images,page:this.state.page-1,isLoading:this.state.isSearchLoading,selectedImage:this.state.selectedImage,chooseImage:this.selectImage})]}),Object(U.jsxs)(J.a,{className:"flex-sm-nowrap",children:[e?Object(U.jsx)(ie,{className:"mr-sm-3",currentPage:this.state.page,maxPage:this.state.maxPage,onPageChange:this.handlePageChange}):null,Object(U.jsx)("button",{className:"btn btn-dark flex-shrink-0",type:"button",disabled:!this.state.selectedImage,onClick:this.handleChooseButtonClick,children:"Use selected image"})]})]})}}]),s}(n.Component),re=s.p+"static/media/ito-jakuchu-red-parrot-on-the-branch-of-a-tree.a8f36cd5.jpg",ce=s.p+"static/media/david-clode-eOSqRq2Qm1c-unsplash.42540cb6.jpg",le=s.p+"static/media/casey-horner-80UR4DM2Rz0-unsplash.001ae9f7.jpg",he=s.p+"static/media/van-gogh-roses-nga.8fa9d120.jpg",ue=s.p+"static/media/scott-webb-lYzgtps0UtQ-unsplash.509dd0a5.jpg",de=s.p+"static/media/travel-sourced-FsmcD6uKcHk-unsplash.97041d06.jpg",pe=[new Z("Red Parrot on the Branch of a Tree",re,6,8,"It\u014d Jakuch\u016b",new $("Metropolitan Museum of Art",!0,!1,"https://www.metmuseum.org/art/collection/search/57123"),"Red Parrot"),new Z("Coral",ce,7,10,"David Clode",new $("Unsplash",!1,!0,"https://unsplash.com/photos/eOSqRq2Qm1c")),new Z("Starry Sky",le,7,10,"Casey Horner",new $("Unsplash",!1,!0,"https://unsplash.com/photos/80UR4DM2Rz0")),new Z("Roses",he,8,10,"Vincent van Gogh",new $("National Gallery of Art",!0,!1,"https://www.nga.gov/collection/art-object-page.72328.html")),new Z("Succulents",ue,8,5,"Scott Webb",new $("Unsplash",!1,!0,"https://unsplash.com/photos/lYzgtps0UtQ")),new Z("Jellyfish",de,7,10,"Travel Sourced",new $("Unsplash",!1,!0,"https://unsplash.com/photos/FsmcD6uKcHk"))],ge=(s(69),function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).fileInput=a.a.createRef(),n.selectedPreset=pe[0],n.userImage=null,n.useUserImage=n.useUserImage.bind(Object(d.a)(n)),n.usePresetImage=n.usePresetImage.bind(Object(d.a)(n)),n.setPresetImage=n.setPresetImage.bind(Object(d.a)(n)),n.setUnsplashImage=n.setUnsplashImage.bind(Object(d.a)(n)),n.handleSelectChange=n.handleSelectChange.bind(Object(d.a)(n)),n.handleFileChange=n.handleFileChange.bind(Object(d.a)(n)),n.handleRadioKeyDown=n.handleRadioKeyDown.bind(Object(d.a)(n)),n.generateDefaultDimensions=n.generateDefaultDimensions.bind(Object(d.a)(n)),n.toggleModal=n.toggleModal.bind(Object(d.a)(n)),n.state={selectedOption:"preset0",usingUserImage:!1,invalidUserImage:!1,unsplashImage:null,modalOpen:!1},n}return Object(u.a)(s,[{key:"usePresetImage",value:function(){this.setState({usingUserImage:!1}),this.props.setSelectedImage(this.selectedPreset)}},{key:"useUserImage",value:function(){this.setState({usingUserImage:!0}),this.props.setSelectedImage(this.userImage)}},{key:"setPresetImage",value:function(e){this.selectedPreset=e,this.props.setSelectedImage(e)}},{key:"setUnsplashImage",value:function(e){this.setState({unsplashImage:e,selectedOption:"unsplash"}),this.setPresetImage(e)}},{key:"handleRadioKeyDown",value:function(e){switch(e.key){case"ArrowLeft":case"ArrowUp":case"Left":case"Up":return void("radioBtn2"===e.target.id&&(document.getElementById("radioBtn1").focus(),e.preventDefault()));case"ArrowRight":case"ArrowDown":case"Down":case"Right":return void("radioBtn1"===e.target.id&&(document.getElementById("radioBtn2").focus(),e.preventDefault()));default:return}}},{key:"handleSelectChange",value:function(e){this.usePresetImage();var t=e.target;t.selectedIndex===t.length-1?this.toggleModal():t.selectedIndex===t.length-2&&this.state.unsplashImage?(this.setPresetImage(this.state.unsplashImage),this.setState({selectedOption:"unsplash"})):-1!==t.selectedIndex&&(this.setPresetImage(pe[t.selectedIndex]),this.setState({selectedOption:"preset"+t.selectedIndex}))}},{key:"handleFileChange",value:function(){var e=this;this.useUserImage();var t=this.fileInput.current.files[0],s=URL.createObjectURL(t),n=new Image;n.onerror=function(){URL.revokeObjectURL(s),e.userImage&&URL.revokeObjectURL(e.userImage.url),e.userImage=null,e.setState({invalidUserImage:!0}),e.props.setSelectedImage(null)},n.onload=function(){e.userImage&&URL.revokeObjectURL(e.userImage.url);var a=e.generateDefaultDimensions(n.naturalWidth,n.naturalHeight);e.userImage=new Z(t.name,s,a.rows,a.cols),e.setState({invalidUserImage:!1}),e.props.setSelectedImage(e.userImage)},n.src=s}},{key:"generateDefaultDimensions",value:function(e,t){var s=this.props.minPuzzleDimension,n=e/t,a=j(Math.round(12/(n+1)),s,12-s);return{rows:a,cols:12-a}}},{key:"toggleModal",value:function(){this.setState({modalOpen:!this.state.modalOpen})}},{key:"renderSelectOptions",value:function(){for(var e=[],t=0;t<pe.length;t++){var s=pe[t];e.push(Object(U.jsx)("option",{value:"preset"+t,children:s.shortName},t))}return e.push(Object(U.jsx)("option",{disabled:!0,children:"\u2015\u2015\u2015\u2015\u2015\u2015\u2015"},-1)),this.state.unsplashImage&&e.push(Object(U.jsx)("option",{value:"unsplash",children:"Unsplash photo by ".concat(this.state.unsplashImage.author)},-2)),e.push(Object(U.jsx)("option",{children:"More..."},-3)),e}},{key:"render",value:function(){var e=this.state.usingUserImage?"btn-outline-dark":"btn-dark",t=this.state.usingUserImage?"btn-dark":"btn-outline-dark";return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"input-group",children:[Object(U.jsx)("div",{className:"input-group-prepend col-12 col-lg-6 pr-lg-0",children:Object(U.jsxs)("div",{className:"btn ".concat(e," d-flex flex-wrap flex-sm-nowrap align-items-center w-100 br-when-stacked"),onClick:this.usePresetImage,children:[Object(U.jsx)("input",{readOnly:!0,className:"col-auto",id:"radioBtn1",type:"radio",checked:!this.state.usingUserImage,onKeyDown:this.handleRadioKeyDown}),Object(U.jsx)("label",{className:"col col-sm-4 col-md-3 col-lg-auto col-form-label",htmlFor:"radioBtn1",children:"Choose an image:"}),Object(U.jsx)("div",{className:"w-100 d-sm-none"}),Object(U.jsx)("label",{className:"sr-only",htmlFor:"puzzle-image-select",children:"Select image"}),Object(U.jsx)("select",{className:"custom-select col",id:"puzzle-image-select",value:this.state.selectedOption,onChange:this.handleSelectChange,children:this.renderSelectOptions()}),Object(U.jsx)("button",{className:"btn btn-link p-0 ml-2",type:"button","aria-label":"Find more images",style:{color:"inherit"},onClick:this.toggleModal,children:Object(U.jsx)("i",{className:"bi-search icon-lg"})})]})}),Object(U.jsx)("div",{className:"input-group-append col-12 col-lg-6 pl-lg-0",children:Object(U.jsxs)("div",{className:"btn ".concat(t," d-flex flex-wrap flex-sm-nowrap align-items-center w-100 br-when-stacked"),onClick:this.useUserImage,children:[Object(U.jsx)("input",{readOnly:!0,className:"col-auto order-first order-lg-last ml-lg-3",id:"radioBtn2",type:"radio",checked:this.state.usingUserImage,onKeyDown:this.handleRadioKeyDown}),Object(U.jsx)("label",{className:"col col-sm-4 col-md-3 col-lg-auto col-form-label",htmlFor:"radioBtn2",children:"Or use your own:"}),Object(U.jsx)("div",{className:"w-100 d-sm-none"}),Object(U.jsx)(X.a,{className:"col text-left",id:"file-input",type:"file",accept:"image/*",innerRef:this.fileInput,invalid:this.state.invalidUserImage,onChange:this.handleFileChange}),Object(U.jsx)("button",{className:"btn btn-link p-0 ml-2",id:"show-tooltip",type:"button",style:{color:"inherit"},onClick:function(e){e.preventDefault(),e.stopPropagation()},children:Object(U.jsx)("i",{className:"bi-info-circle icon-lg"})})]})})]}),Object(U.jsx)(Q.a,{placement:"top",target:"show-tooltip",children:"Images are only used locally in your browser and are never uploaded or sent over the Internet."}),Object(U.jsx)(oe,{toggleModal:this.toggleModal,isOpen:this.state.modalOpen,setImage:this.setUnsplashImage,generateDefaultDimensions:this.generateDefaultDimensions})]})}}]),s}(n.Component)),me=s(95),be=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).handleDimensionsChange=n.handleDimensionsChange.bind(Object(d.a)(n)),n.handleDimensionsBlur=n.handleDimensionsBlur.bind(Object(d.a)(n)),n.handleColorChange=n.handleColorChange.bind(Object(d.a)(n)),n.state={},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=document.documentElement.style.getPropertyValue("--puzzle-bg");this.setState({color:e||"#adb5bd"})}},{key:"handleDimensionsChange",value:function(e){this.props.setDimension(e.target.name,e.target.valueAsNumber)}},{key:"handleDimensionsBlur",value:function(e){this.props.setDimension(e.target.name,this.validateDimension(e.target.value))}},{key:"handleColorChange",value:function(e){var t=e.target.value;this.setState({color:t}),document.documentElement.style.setProperty("--puzzle-bg",t)}},{key:"validateDimension",value:function(e){var t=parseInt(e,10);return isNaN(t)||t<this.props.minPuzzleDimension?t=this.props.minPuzzleDimension:t>this.props.maxPuzzleDimension&&(t=this.props.maxPuzzleDimension),t}},{key:"render",value:function(){var e=isNaN(this.props.rows)?"":this.props.rows,t=isNaN(this.props.cols)?"":this.props.cols;return Object(U.jsxs)(K.a,{toggle:this.props.toggleModal,isOpen:this.props.isOpen,centered:!0,children:[Object(U.jsx)(V.a,{toggle:this.props.toggleModal,children:"Settings"}),Object(U.jsx)(A.a,{children:Object(U.jsxs)("form",{className:"container",children:[Object(U.jsxs)("div",{className:"form-group row mb-4",children:[Object(U.jsx)("label",{className:"col-form-label mr-2 my-2",htmlFor:"row-input",children:"Rows:"}),Object(U.jsx)("input",{className:"mr-2 my-2",id:"row-input",type:"number",min:this.props.minPuzzleDimension,max:this.props.maxPuzzleDimension,name:"rows",value:e,onChange:this.handleDimensionsChange,onBlur:this.handleDimensionsBlur}),Object(U.jsx)("label",{className:"col-form-label mr-2 my-2",htmlFor:"col-input",children:"Columns:"}),Object(U.jsx)("input",{className:"mr-2 my-2",id:"col-input",type:"number",min:this.props.minPuzzleDimension,max:this.props.maxPuzzleDimension,name:"cols",value:t,onChange:this.handleDimensionsChange,onBlur:this.handleDimensionsBlur}),Object(U.jsx)("small",{className:"col text-muted",children:"Changes to rows and columns take effect the next time a new puzzle is started."})]}),Object(U.jsxs)("div",{className:"form-group row mb-4",children:[Object(U.jsx)("label",{className:"col-auto col-form-label pl-0",htmlFor:"color-input",children:"Background color:"}),Object(U.jsx)(me.a,{className:"col",id:"color-input",type:"color",value:this.state.color,onChange:this.handleColorChange})]}),Object(U.jsx)("div",{className:"form-group row justify-content-end",children:Object(U.jsx)("button",{className:"btn btn-dark btn-lg px-4",type:"button",onClick:this.props.toggleModal,children:"Done"})})]})})]})}}]),s}(n.Component),je=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).toggleModal=n.toggleModal.bind(Object(d.a)(n)),n.setSelectedImage=n.setSelectedImage.bind(Object(d.a)(n)),n.setDimension=n.setDimension.bind(Object(d.a)(n)),n.newPuzzle=n.newPuzzle.bind(Object(d.a)(n)),n.state={modalOpen:!1,selectedImage:pe[0],rows:pe[0].defaultRows,cols:pe[0].defaultCols},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.newPuzzle()}},{key:"toggleModal",value:function(){this.setState((function(e){return{modalOpen:!e.modalOpen}}))}},{key:"setSelectedImage",value:function(e){if(e!==this.state.selectedImage){var t=e?e.defaultRows:this.state.rows,s=e?e.defaultCols:this.state.cols;this.setState({selectedImage:e,rows:t,cols:s})}}},{key:"setDimension",value:function(e,t){this.setState(Object(r.a)({},e,t))}},{key:"newPuzzle",value:function(){var e=this;if(this.state.selectedImage){var t=this.state.selectedImage;document.documentElement.style.setProperty("--puzzle-img","url(".concat(t.url,")"));var s=new Image;s.onerror=function(){return console.log("Failed to load image")},s.onload=function(){return e.props.newPuzzle(s.naturalWidth,s.naturalHeight,e.state.rows,e.state.cols,t)},s.src=t.url}}},{key:"render",value:function(){return Object(U.jsxs)("div",{className:"container mt-4",children:[Object(U.jsx)("div",{className:"row mb-3",children:Object(U.jsx)(ge,{setSelectedImage:this.setSelectedImage,minPuzzleDimension:2})}),Object(U.jsxs)("div",{className:"row justify-content-center align-items-end mx-n1",children:[Object(U.jsx)("div",{className:"col d-none d-md-block px-2"}),Object(U.jsx)("div",{className:"col-auto px-2",children:Object(U.jsx)("button",{className:"btn btn-dark btn-lg px-4",type:"button",onClick:this.newPuzzle,disabled:!this.state.selectedImage,children:"New puzzle"})}),Object(U.jsx)("div",{className:"col-auto col-md px-2",children:Object(U.jsxs)("button",{className:"btn btn-outline-dark",type:"button",onClick:this.toggleModal,children:[Object(U.jsx)("i",{className:"bi bi-gear-fill pr-2"}),"Settings"]})}),Object(U.jsx)(be,{toggleModal:this.toggleModal,isOpen:this.state.modalOpen,rows:this.state.rows,cols:this.state.cols,setDimension:this.setDimension,minPuzzleDimension:2,maxPuzzleDimension:25})]})]})}}]),s}(n.Component),fe=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return Object(U.jsxs)(K.a,{isOpen:this.props.isOpen,toggle:this.props.toggle,centered:!0,children:[Object(U.jsx)(V.a,{toggle:this.props.toggle,children:"Browser compatibility"}),Object(U.jsxs)(A.a,{children:[Object(U.jsxs)("p",{children:["For the best experience, it's recommended to view this website in a recent version of ",Object(U.jsx)("b",{children:"Firefox"}),", ",Object(U.jsx)("b",{children:"Chrome"}),", or ",Object(U.jsx)("b",{children:"Edge"})," on desktop,"," ","or ",Object(U.jsx)("b",{children:"Chrome"})," on mobile."]}),Object(U.jsxs)("p",{children:["Safari is mostly supported, but there is an issue where the clickable area of each puzzle piece extends past the visible image"," ","(due to the clip-path property not masking the mouse hit area)."]}),Object(U.jsx)("p",{children:"This site does not work in Internet Explorer."})]})]})}}]),s}(n.Component),Oe=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).toggleModal=n.toggleModal.bind(Object(d.a)(n)),n.state={modalOpen:!1},n}return Object(u.a)(s,[{key:"toggleModal",value:function(){this.setState({modalOpen:!this.state.modalOpen})}},{key:"render",value:function(){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("button",{className:"btn btn-link text-light",type:"button",onClick:this.toggleModal,children:[Object(U.jsx)("i",{className:"bi bi-list-check text-light mr-2"}),Object(U.jsx)("small",{className:"align-text-top",children:"Browser support"})]}),Object(U.jsx)(fe,{toggle:this.toggleModal,isOpen:this.state.modalOpen})]})}}]),s}(n.Component),ve=(s(85),s(86),s(87),1);o.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(je,{newPuzzle:function e(t,s,n,i,r){o.a.render(Object(U.jsxs)(a.a.StrictMode,{children:[Object(U.jsx)(je,{newPuzzle:e}),Object(U.jsx)(_,{puzzleImage:r}),Object(U.jsx)(W,{imgUrl:r.url,imgWidth:t,imgHeight:s,rows:n,cols:i},++ve)]}),document.getElementById("react-root"))}})}),document.getElementById("react-root")),o.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(Oe,{})}),document.getElementById("compatibility-info-root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.152b1c3f.chunk.js.map