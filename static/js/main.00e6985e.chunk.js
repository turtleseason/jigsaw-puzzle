(this["webpackJsonpjigsaw-puzzle"]=this["webpackJsonpjigsaw-puzzle"]||[]).push([[0],{58:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},87:function(e,t,s){},88:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s.n(n),i=s(19),o=s.n(i),r=s(50),c=s(16),l=s(4),h=s(5),u=s(7),d=s(10),p=s(9),g=s(17),m=s(32),b=s.n(m),j="Left",f="Top",O="Right",v="Bottom",y=Object(g.a)({},Symbol.iterator,b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j;case 2:return e.next=4,f;case 4:return e.next=6,O;case 6:return e.next=8,v;case 8:case"end":return e.stop()}}),e)}))),x=s(1),k=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"getClipPathString",value:function(e){var t,s="",n=Object(c.a)(y);try{for(n.s();!(t=n.n()).done;){var a=t.value;s+=this.props.edgeDrawer.getPathString(a,e[a])}}catch(i){n.e(i)}finally{n.f()}return s}},{key:"render",value:function(){return Object(x.jsx)("clipPath",{id:"clip-"+this.props.pieceKey,children:Object(x.jsx)("path",{d:this.getClipPathString(this.props.edges)})})}}]),s}(n.PureComponent),w=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"renderClipPath",value:function(e){return Object(x.jsx)(k,{edgeDrawer:this.props.edgeDrawer,pieceKey:e.key,edges:e.edges},e.key)}},{key:"render",value:function(){var e=this,t=this.props.pieces?this.props.pieces.map((function(t){return e.renderClipPath(t)})):null;return Object(x.jsx)("svg",{width:"0",height:"0",children:t})}}]),s}(n.PureComponent);function P(e){return Array.from(Array(e).keys())}function I(e){return Math.floor(Math.random()*Math.floor(e))}function C(e,t,s){if(t>s)throw Error("clamp: min (".concat(t,") is greater than max (").concat(s,")."));return Math.max(Math.min(e,s),t)}var z="b",S="r",N="f";function D(){var e=[z,S];return e[I(e.length)]}var M=function(){function e(t,s,n){Object(l.a)(this,e),this.START="START",this.templates=this.makeTemplates(t,s,n)}return Object(h.a)(e,[{key:"makeTemplates",value:function(e,t,s){var n={};return n[this.START]="M ".concat(s," ").concat(t-s," "),n.bLeft=function(e,n,a,i){return"V ".concat((t+e)/2)+"C ".concat(s-n," ").concat(t/2+a," ",0," ").concat(t/2+i," ",0," ").concat(t/2," ")+"C ".concat(0," ",t/2-i," ").concat(s-n," ").concat(t/2-a," ").concat(s," ").concat((t-e)/2," ")},n.rLeft=function(e,n,a,i){return"V ".concat((t+e)/2)+"C ".concat(s+n," ").concat(t/2+a," ").concat(2*s," ").concat(t/2+i," ").concat(2*s," ").concat(t/2," ")+"C ".concat(2*s," ").concat(t/2-i," ").concat(s+n," ").concat(t/2-a," ").concat(s," ").concat((t-e)/2," ")},n.Left="V ".concat(s," "),n.bTop=function(t,n,a,i){return"H ".concat((e-t)/2," ")+"C ".concat(e/2-a," ").concat(s-n," ").concat(e/2-i," ",0," ").concat(e/2," ",0," ")+"C ".concat(e/2+i," ",0," ").concat(e/2+a," ").concat(s-n," ").concat((e+t)/2," ").concat(s," ")},n.rTop=function(t,n,a,i){return"H ".concat((e-t)/2," ")+"C ".concat(e/2-a," ").concat(s+n,"  ").concat(e/2-i," ").concat(2*s," ").concat(e/2," ").concat(2*s," ")+"C ".concat(e/2+i," ").concat(2*s," ").concat(e/2+a," ").concat(s+n," ").concat((e+t)/2," ").concat(s," ")},n.Top="H ".concat(e-s," "),n.bRight=function(n,a,i,o){return"V ".concat((t-n)/2," ")+"C ".concat(e-s+a," ").concat(t/2-i," ").concat(e," ").concat(t/2-o," ").concat(e," ").concat(t/2," ")+"C ".concat(e," ").concat(t/2+o," ").concat(e-s+a," ").concat(t/2+i," ").concat(e-s," ").concat((t+n)/2," ")},n.rRight=function(n,a,i,o){return"V ".concat((t-n)/2," ")+"C ".concat(e-s-a," ").concat(t/2-i," ").concat(e-2*s," ").concat(t/2-o," ").concat(e-2*s," ").concat(t/2," ")+"C ".concat(e-2*s," ").concat(t/2+o," ").concat(e-s-a," ").concat(t/2+i," ").concat(e-s," ").concat((t+n)/2," ")},n.Right="V ".concat(t-s," "),n.bBottom=function(n,a,i,o){return"H ".concat((e+n)/2," ")+"C ".concat(e/2+i," ").concat(t-s+a," ").concat(e/2+o," ").concat(t," ").concat(e/2," ").concat(t," ")+"C ".concat(e/2-o," ").concat(t," ").concat(e/2-i," ").concat(t-s+a," ").concat((e-n)/2," ").concat(t-s," ")},n.rBottom=function(n,a,i,o){return"H ".concat((e+n)/2," ")+"C ".concat(e/2+i," ").concat(t-s-a,"  ").concat(e/2+o," ").concat(t-2*s," ").concat(e/2," ").concat(t-2*s," ")+"C ".concat(e/2-o," ").concat(t-2*s," ").concat(e/2-i," ").concat(t-s-a," ").concat((e-n)/2," ").concat(t-s," ")},n.Bottom="Z",n}},{key:"getPathString",value:function(e,t){var s=e===j?this.templates[this.START]:"",n=this.templates[e],a="";if(t.type!==N){var i=t.type+e;a=this.templates[i](t.w,t.o,t.c1,t.c2)}return s+a+n}}]),e}(),U=s(21),B=function(){function e(t,s,n,a,i){Object(l.a)(this,e),this.type=t,this.w=s,this.o=n,this.c1=a,this.c2=i}return Object(h.a)(e,[{key:"opposite",value:function(){var e=Object(U.a)({},this);return e.type=function(e){switch(e){case z:return S;case S:return z;default:throw Error("getOppositeEdge: ".concat(e," does not have an opposite edge type"))}}(this.type),e}}]),e}(),R=function(){function e(t){var s;Object(l.a)(this,e),this.key=t,this.pieces=[],this.bounds=(s={},Object(g.a)(s,j,-1),Object(g.a)(s,f,-1),Object(g.a)(s,O,-1),Object(g.a)(s,v,-1),s)}return Object(h.a)(e,[{key:"addPiece",value:function(e,t,s){this.pieces.push(e),(this.bounds.Left<0||s<this.bounds.Left)&&(this.bounds.Left=s),(this.bounds.Right<0||s>this.bounds.Right)&&(this.bounds.Right=s),(this.bounds.Top<0||t<this.bounds.Top)&&(this.bounds.Top=t),(this.bounds.Bottom<0||t>this.bounds.Bottom)&&(this.bounds.Bottom=t)}},{key:"mergeWith",value:function(e){this.pieces=this.pieces.concat(e.pieces),e.bounds.Left<this.bounds.Left&&(this.bounds.Left=e.bounds.Left),e.bounds.Right>this.bounds.Right&&(this.bounds.Right=e.bounds.Right),e.bounds.Top<this.bounds.Top&&(this.bounds.Top=e.bounds.Top),e.bounds.Bottom>this.bounds.Bottom&&(this.bounds.Bottom=e.bounds.Bottom)}}]),e}(),T=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){var e=this.props.model,t="puzzle-piece"+(this.props.blockPointerEvents?" block-pointer-events":"");return Object(x.jsx)("div",{style:{left:e.displayPos.left,top:e.displayPos.top,position:"absolute"},children:Object(x.jsx)("svg",{className:t,"data-id":e.key,width:this.props.width,height:this.props.height,clipPath:"url(#clip-"+e.key+")",style:{zIndex:e.zIndex>0?e.zIndex:"auto"},onPointerDown:this.props.onPointerDown,children:Object(x.jsx)("image",{href:this.props.imgUrl,x:this.props.model.bgPos.left,y:this.props.model.bgPos.top,onDragStart:function(e){return e.preventDefault()}})})})}}]),s}(n.PureComponent),L=function(){function e(t,s,n,a,i,o,r,c){Object(l.a)(this,e),this.group=t,this.key=t,this.col=s,this.row=n,this.bgPos=i,this.zIndex=o,this.edges=r,this.neighbors=c,this.setPos(a.left,a.top)}return Object(h.a)(e,[{key:"pos",get:function(){return this.actualPos},set:function(e){throw Error('PieceModel: Don\'t set "pos" directly - use setPos() instead.')}},{key:"setPos",value:function(e,t){this.actualPos={left:e,top:t},this.displayPos=this.actualPos}},{key:"setDisplayPos",value:function(e,t){this.displayPos={left:e,top:t}}},{key:"clone",value:function(){var t=new e(this.key,this.col,this.row,this.pos,this.bgPos,this.zIndex,this.edges,this.neighbors);return t.group=this.group,t.setDisplayPos(this.displayPos.left,this.displayPos.top),t}}]),e}(),E=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state=Object(U.a)({},n.props.startPos),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame((function(){return requestAnimationFrame((function(){return e.setState(Object(U.a)({},e.props.destPos))}))}))}},{key:"render",value:function(){return Object(x.jsx)("img",{className:"puzzle-complete-img",src:this.props.imgUrl,width:this.props.width,height:this.props.height,style:{left:this.state.left,top:this.state.top},onTransitionEnd:this.props.onTransitionEnd})}}]),s}(n.Component),F=(s(58),function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).innerWidth=n.props.imgWidth/n.props.cols,n.innerHeight=n.props.imgHeight/n.props.rows,n.borderSize=Math.min(n.innerHeight,n.innerWidth)/4,n.pieceWidth=2*n.borderSize+n.innerWidth,n.pieceHeight=2*n.borderSize+n.innerHeight,n.pointerDownHandlers=P(n.props.rows*n.props.cols).map((function(e){return n.handlePointerDown.bind(Object(u.a)(n),e)})),n.handlePointerMove=n.handlePointerMove.bind(Object(u.a)(n)),n.handlePointerUp=n.handlePointerUp.bind(Object(u.a)(n)),n.handleResize=n.handleResize.bind(Object(u.a)(n)),n.handleTransitionEnd=n.handleTransitionEnd.bind(Object(u.a)(n)),n.edgeDrawer=new M(n.pieceWidth,n.pieceHeight,n.borderSize),n.nextzIndex=1,n.state={gameComplete:!1,draggedPiece:null},n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=this.setScaleFactor();window.addEventListener("resize",this.handleResize);var t=this.createPieces(e);this.groups=this.createGroups(t),this.setState({pieces:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"setScaleFactor",value:function(){var e=.7*document.documentElement.clientWidth/this.props.imgWidth,t=.7*document.documentElement.clientHeight/this.props.imgHeight,s=Math.min(e,t);return this.setState({scaleFactor:s}),s}},{key:"getBoardDimensions",value:function(){var e=document.querySelector(".puzzle-background");return{width:e.clientWidth,height:e.clientHeight}}},{key:"clampPiecesToBoardBounds",value:function(e){var t,s=this.getBoardDimensions(),n=s.width/e-this.pieceWidth,a=s.height/e-this.pieceHeight,i=this.state.pieces.slice(),o=Object(c.a)(i.entries());try{for(o.s();!(t=o.n()).done;){var l=Object(r.a)(t.value,2),h=l[0],u=l[1],d=this.groups[u.group],p=n-this.innerWidth*(d.bounds.Right-u.col),g=a-this.innerHeight*(d.bounds.Bottom-u.row);i[h]=u.clone(),i[h].setDisplayPos(u.pos.left>p?p:u.pos.left,u.pos.top>g?g:u.pos.top)}}catch(m){o.e(m)}finally{o.f()}this.setState({pieces:i})}},{key:"getGridPosition",value:function(e,t,s){return{left:(this.innerWidth+s)*e-this.borderSize,top:(this.innerHeight+s)*t-this.borderSize}}},{key:"getRandomPosition",value:function(e){var t,s,n=this.getBoardDimensions();return n.width>n.height?(t=Math.random()*(.15*n.width/e),s=Math.random()*(n.height/e-this.pieceHeight)):(t=Math.random()*(n.width/e-this.pieceWidth),s=Math.random()*(.15*n.height)/e),{left:t,top:s}}},{key:"getBackgroundPosition",value:function(e,t){return{left:-this.innerWidth*e+this.borderSize,top:-this.innerHeight*t+this.borderSize}}},{key:"createEdge",value:function(e){var t=this.borderSize*(.8+.45*Math.random()),s=this.borderSize*(.4+.1*Math.random()),n=t>this.borderSize?t*(.75+.25*Math.random()):this.borderSize*(.85+.35*Math.random()),a=t*(.5+.15*Math.random());return new B(e,t,s,n,a)}},{key:"createPieces",value:function(e){for(var t=this,s=[],n=P(this.props.cols*this.props.rows),a=Array(this.props.cols).fill(null).map((function(){return Array(t.props.rows)})),i=0;i<this.props.cols;i++)for(var o=0;o<this.props.rows;o++){var r=I(n.length),c=n.splice(r,1)[0];a[i][o]=c;var l=this.getRandomPosition(e),h=this.getBackgroundPosition(i,o),u={};i>0&&(u.Left=a[i-1][o],s[u.Left].neighbors.Right=c),o>0&&(u.Top=a[i][o-1],s[u.Top].neighbors.Bottom=c);var d={};d.Left=0===i?this.createEdge(N):s[u.Left].edges.Right.opposite(),d.Top=0===o?this.createEdge(N):s[u.Top].edges.Bottom.opposite(),d.Right=i===this.props.cols-1?this.createEdge(N):this.createEdge(D()),d.Bottom=o===this.props.rows-1?this.createEdge(N):this.createEdge(D()),s[c]=new L(c,i,o,l,h,0,d,u)}return this.topLeftKey=a[0][0],s}},{key:"createGroups",value:function(e){var t,s={},n=Object(c.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=new R(a.key);i.addPiece(a.key,a.row,a.col),s[a.key]=i}}catch(o){n.e(o)}finally{n.f()}return s}},{key:"alignPiece",value:function(e,t){e.setPos(t.displayPos.left+this.innerWidth*(e.col-t.col),t.displayPos.top+this.innerHeight*(e.row-t.row))}},{key:"isTouching",value:function(e,t,s){var n=7/this.state.scaleFactor;return t===O?Math.abs(e.displayPos.top-s.displayPos.top)<=n&&Math.abs(s.displayPos.left-e.displayPos.left-this.innerWidth)<=n:t===j?Math.abs(e.displayPos.top-s.displayPos.top)<=n&&Math.abs(e.displayPos.left-s.displayPos.left-this.innerWidth)<=n:t===f?Math.abs(e.displayPos.left-s.displayPos.left)<=n&&Math.abs(e.displayPos.top-s.displayPos.top-this.innerHeight)<=n:t===v?Math.abs(e.displayPos.left-s.displayPos.left)<=n&&Math.abs(s.displayPos.top-e.displayPos.top-this.innerHeight)<=n:void 0}},{key:"mergeGroups",value:function(e,t,s){var n,a=e[this.groups[t].pieces[0]],i=Object(c.a)(this.groups[s].pieces);try{for(i.s();!(n=i.n()).done;){var o=n.value,r=e[o].clone();r.group=t,r.zIndex=a.zIndex,this.alignPiece(r,a),e[o]=r}}catch(l){i.e(l)}finally{i.f()}this.groups[t].mergeWith(this.groups[s]),delete this.groups[s]}},{key:"handlePointerDown",value:function(e,t){if(null===this.state.draggedPiece&&t.isPrimary&&("mouse"!==t.pointerType||0===t.button)){var s,n=this.state.pieces.slice(),a=n[e].group,i=Object(c.a)(this.groups[a].pieces);try{for(i.s();!(s=i.n()).done;){var o=s.value;n[o]=n[o].clone(),n[o].zIndex=this.nextzIndex,n[o].setPos(n[o].displayPos.left,n[o].displayPos.top)}}catch(r){i.e(r)}finally{i.f()}this.nextzIndex++,this.setState({pieces:n,draggedPiece:e,offsetX:t.clientX-n[e].pos.left*this.state.scaleFactor,offsetY:t.clientY-n[e].pos.top*this.state.scaleFactor})}}},{key:"handlePointerMove",value:function(e){if(null!==this.state.draggedPiece&&e.isPrimary){var t=document.elementFromPoint(e.clientX,e.clientY);if(t&&t.classList.contains("puzzle-area")){var s=this.state.draggedPiece,n=this.state.pieces.slice(),a=n[s].clone();n[s]=a;var i=(e.clientX-this.state.offsetX)/this.state.scaleFactor,o=(e.clientY-this.state.offsetY)/this.state.scaleFactor;a.setPos(i,o);var r,l=this.groups[a.group],h=Object(c.a)(l.pieces);try{for(h.s();!(r=h.n()).done;){var u=r.value;n[u]=n[u].clone(),this.alignPiece(n[u],a)}}catch(d){h.e(d)}finally{h.f()}this.setState({pieces:n})}}}},{key:"handlePointerUp",value:function(){if(null!==this.state.draggedPiece){var e,t=this.state.draggedPiece,s=this.state.pieces.slice(),n=s[t].group,a=Object(c.a)(this.groups[n].pieces);try{for(a.s();!(e=a.n()).done;){var i,o=s[e.value],r=Object(c.a)(y);try{for(r.s();!(i=r.n()).done;){var l=i.value,h=s[o.neighbors[l]];h&&h.group!==o.group&&this.isTouching(o,l,h)&&this.mergeGroups(s,o.group,h.group)}}catch(d){r.e(d)}finally{r.f()}}}catch(d){a.e(d)}finally{a.f()}var u=1===Object.keys(this.groups).length;this.setState({pieces:s,draggedPiece:null,gameComplete:u})}}},{key:"handleResize",value:function(){var e=this.setScaleFactor();this.clampPiecesToBoardBounds(e)}},{key:"handleTransitionEnd",value:function(){this.setState({endAnimationComplete:!0})}},{key:"getTopLeftPos",value:function(){var e=this.state.pieces[this.topLeftKey].displayPos;return{left:e.left+this.borderSize,top:e.top+this.borderSize}}},{key:"getCenteredImagePos",value:function(){var e=this.getBoardDimensions();return{left:(e.width/this.state.scaleFactor-this.props.imgWidth)/2,top:(e.height/this.state.scaleFactor-this.props.imgHeight)/2}}},{key:"renderPiece",value:function(e){return Object(x.jsx)(T,{model:e,width:this.pieceWidth,height:this.pieceHeight,imgUrl:this.props.imgUrl,blockPointerEvents:null!==this.state.draggedPiece,onPointerDown:this.pointerDownHandlers[e.key]},e.key)}},{key:"render",value:function(){var e,t=this,s={transform:"scale(".concat(this.state.scaleFactor,")"),width:100/this.state.scaleFactor+"%",height:100/this.state.scaleFactor+"%"};if(this.state.gameComplete&&this.state.endAnimationComplete)e=Object(x.jsx)("div",{className:"puzzle-area puzzle-complete",style:s});else if(this.state.gameComplete)e=Object(x.jsx)("div",{className:"puzzle-area",style:s,children:Object(x.jsx)(E,{imgUrl:this.props.imgUrl,startPos:this.getTopLeftPos(),destPos:this.getCenteredImagePos(),width:this.props.imgWidth,height:this.props.imgHeight,onTransitionEnd:this.handleTransitionEnd})});else{var n=this.state.pieces?this.state.pieces.map((function(e){return t.renderPiece(e)})):null;e=Object(x.jsxs)("div",{className:"puzzle-area"+(null!==this.state.draggedPiece?" no-scroll":""),onPointerMove:this.handlePointerMove,onPointerUp:this.handlePointerUp,style:s,children:[Object(x.jsx)(w,{edgeDrawer:this.edgeDrawer,pieces:this.state.pieces}),n]})}return Object(x.jsxs)("div",{className:"puzzle-container mt-2",children:[Object(x.jsx)("div",{className:"puzzle-background"}),e,Object(x.jsx)("div",{className:"pb-3"})]})}}]),s}(n.Component)),H=s(90),W=s(97),A=s(93),K=s(91),V=s(92),G=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){var e=this.props.image,t="";if(e&&e.source){var s=(e.source.nameIsTitle?e.name:"Photo")+" by "+e.author;t=Object(x.jsxs)(H.a,{children:[Object(x.jsxs)(K.a,{children:[Object(x.jsx)(V.a,{md:"8",children:Object(x.jsx)("img",{src:e.url,alt:"Image preview",width:"100%"})}),Object(x.jsxs)(V.a,{md:"4",className:"mt-3 mt-md-0 pl-md-0",children:[Object(x.jsx)("p",{children:s}),Object(x.jsxs)("p",{children:["Source: ",e.source.sourceName]})]})]}),Object(x.jsx)(K.a,{className:"mt-md-3",children:Object(x.jsxs)(V.a,{children:[Object(x.jsxs)("p",{className:"text-break",children:["See the original at: ",Object(x.jsx)("a",{href:e.source.sourceUrl,target:"_blank",rel:"external noopener",children:e.source.sourceUrl})]}),e.source.description?Object(x.jsx)("p",{children:e.source.description}):null]})})]})}return Object(x.jsxs)(W.a,{toggle:this.props.toggleModal,isOpen:this.props.isOpen,centered:!0,children:[Object(x.jsx)(A.a,{toggle:this.props.toggleModal,children:"Image details"}),t]})}}]),s}(n.Component),q=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).toggleModal=n.toggleModal.bind(Object(u.a)(n)),n.state={modalOpen:!1},n}return Object(h.a)(s,[{key:"toggleModal",value:function(){this.setState((function(e){return{modalOpen:!e.modalOpen}}))}},{key:"render",value:function(){var e=this.props.puzzleImage;if(!e)return null;var t=e.source&&e.source.isPhoto,s=e.source&&e.source.nameIsTitle,n=s?Object(x.jsx)("em",{children:e.name}):"",a="";e.author&&(a+=s?", ".concat(t?" photo":""," by "):t?"Photo by ":"By ",a+=e.author);var i=e.source?Object(x.jsx)("button",{type:"button",className:"btn btn-link btn-sm text-muted px-1",onClick:this.toggleModal,children:"more info"}):"";return Object(x.jsxs)("div",{className:"container-fluid container-md mt-3",children:[Object(x.jsxs)("div",{className:"row justify-content-center flex-sm-nowrap mx-n2",children:[Object(x.jsx)("div",{className:"col-2 d-none d-md-block px-2",children:" "}),Object(x.jsx)("div",{className:"col-auto flex-shrink-1 px-2",children:Object(x.jsxs)("p",{className:"h5",children:[n,a]})}),Object(x.jsx)("div",{className:"col-auto col-sm-2 px-2",children:i})]}),Object(x.jsx)(G,{toggleModal:this.toggleModal,isOpen:this.state.modalOpen,image:e})]})}}]),s}(n.Component),Y=s(98),_=s(96),Q=s(94),X=function e(t,s,n,a,i,o,r){Object(l.a)(this,e),this.name=t,this.url=s,this.defaultRows=n,this.defaultCols=a,this.author=i,this.source=o,this.shortName=null!==r&&void 0!==r?r:t},J=function e(t){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(l.a)(this,e),this.sourceName=t,this.nameIsTitle=s,this.sourceUrl=a,this.isPhoto=n,this.description=i},Z=function e(t,s,n){Object(l.a)(this,e),this.type=t,this.statusCode=s,this.details=n},$=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"getErrorDisplay",value:function(){var e=this.props.error;if(429===e.statusCode&&"upstream"===e.type)return{title:"Rate limit exceeded (API)",text:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:"The hourly limit for requests from this site to the Unsplash server has been reached."}),Object(x.jsxs)("p",{children:["Feel free to ",Object(x.jsx)("a",{className:"alert-link",href:"https://github.com/turtleseason/jigsaw-puzzle/issues",rel:"external",children:"open an issue on GitHub"})," ","to let me know - ",Object(x.jsx)("br",{}),"if this happens often, I can look into applying for a higher rate limit."]})]})};if(429===e.statusCode&&"proxy"===e.type)return{title:"Rate limit exceeded (API Proxy)",text:Object(x.jsxs)("p",{children:["Please try again in a moment.",Object(x.jsx)("br",{}),"(If you get this error frequently, feel free to "," ",Object(x.jsx)("a",{className:"alert-link",href:"https://github.com/turtleseason/jigsaw-puzzle/issues",rel:"external",children:"open an issue on GitHub"})," ","and let me know.)"]})};var t="network"===e.type?"Network error":"Status code ".concat(e.statusCode," (").concat(e.type,")"),s=e.details?" - "+e.details:null;return{title:"Something went wrong :0",text:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:Object(x.jsxs)("small",{className:"",children:["Error details: ",t,s]})}),Object(x.jsxs)("p",{children:["Please try again. If you keep getting an error, feel free to "," ",Object(x.jsx)("a",{className:"alert-link",href:"https://github.com/turtleseason/jigsaw-puzzle/issues",rel:"external",children:"open an issue on GitHub"})," ","and let me know."]})]})}}},{key:"render",value:function(){if(!this.props.error)return null;var e=this.getErrorDisplay();return Object(x.jsxs)("div",{className:"search-error alert alert-warning text-center",role:"alert",children:[Object(x.jsx)("h6",{className:"alert-heading",children:e.title}),e.text,Object(x.jsxs)("p",{className:"mt-n2",children:["You can still search photos directly on ",Object(x.jsx)("a",{children:"Unsplash.com"})," and ",Object(x.jsx)("a",{children:"enter an image's ID here"}),", or download an image to your computer and load it using the file selector."]})]})}}]),s}(n.Component),ee=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"handleImageClick",value:function(e){this.props.chooseImage(this.props.images[this.props.page][e])}},{key:"handleKeyDown",value:function(e,t){"Enter"!==t.key&&"Space"!==t.key||"A"===t.target.tagName||(this.props.chooseImage(this.props.images[this.props.page][e]),t.preventDefault())}},{key:"renderImage",value:function(e,t){var s=this,n=this.props.selectedImage===e;return Object(x.jsx)("div",{"data-testid":"result",className:"result-container mb-2",tabIndex:"0",onClick:function(){return s.handleImageClick(t)},onKeyDown:function(e){return s.handleKeyDown(t,e)},children:Object(x.jsx)("div",{className:"result ".concat(n?"result-selected":""),children:Object(x.jsxs)("div",{className:"placeholder",style:{paddingTop:e.height/e.width*100+"%"},children:[Object(x.jsx)("img",{src:e.urls.small,alt:e.alt_description}),Object(x.jsxs)("span",{className:"badge badge-dark",children:["By ",Object(x.jsx)("a",{className:"text-light",href:e.user.links.html,rel:"external",target:"_blank",children:e.user.name})," ","on ",Object(x.jsx)("a",{className:"text-light",href:e.links.html,rel:"external",target:"_blank",children:"Unsplash"})]})]})})},e.id)}},{key:"render",value:function(){var e=this,t=this.props.images[this.props.page],s=Object(x.jsx)("div",{className:"text-secondary",children:"Image results will go here, and it will be very cool."}),n=Object(x.jsx)("div",{className:"text-secondary",children:"No results found. :("}),a=Object(x.jsx)("div",{className:"spinner-border my-1",role:"status",children:Object(x.jsx)("span",{className:"sr-only",children:"Loading..."})});return Object(x.jsxs)("div",{className:"search-results-container text-center",children:[this.props.isLoading||t?null:s,!this.props.isLoading&&t&&0===t.length?n:null,this.props.isLoading?a:null,Object(x.jsx)("div",{className:"search-results",children:t?t.map((function(t,s){return e.renderImage(t,s)})):null})]})}}]),s}(n.Component),te=s(51),se=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"handleNavigate",value:function(e,t){e.preventDefault(),this.props.onPageChange&&this.props.onPageChange(t)}},{key:"renderPageLinks",value:function(){var e=this,t=[],s=this.props.currentPage-this.props.numPageLinks-1,n=this.props.currentPage+this.props.numPageLinks+1;s>=this.props.minPage?t.push(Object(x.jsx)("li",{children:"..."},s)):t.push(Object(x.jsx)("li",{className:"invisible"},s));for(var a=function(s){var n=null;s===e.props.currentPage?n=Object(x.jsx)("span",{children:s}):s>=e.props.minPage&&s<=e.props.maxPage&&(n=Object(x.jsx)("a",{href:"#",onClick:function(t){return e.handleNavigate(t,s)},children:s})),t.push(Object(x.jsx)("li",{className:n?null:"invisible",children:n},s))},i=s+1;i<n;i++)a(i);return n<=this.props.maxPage?t.push(Object(x.jsx)("li",{children:"..."},n)):t.push(Object(x.jsx)("li",{className:"invisible"},n)),Object(x.jsx)("ul",{children:t})}},{key:"render",value:function(){var e=this,t=this.props,s=(t.currentPage,t.minPage,t.maxPage,t.numPageLinks,t.onPageChange,t.className),n=t.ariaLabel,a=Object(te.a)(t,["currentPage","minPage","maxPage","numPageLinks","onPageChange","className","ariaLabel"]),i="custom-pagination container "+(s||""),o=n||"Search results pages",r=!(this.props.currentPage>this.props.minPage),c=!(this.props.currentPage<this.props.maxPage),l=this.renderPageLinks();return Object(x.jsx)("nav",Object(U.a)(Object(U.a)({className:i,"aria-label":o},a),{},{children:Object(x.jsxs)("div",{className:"row justify-content-between align-items-center",children:[Object(x.jsx)("div",{className:"col-auto p-0",children:Object(x.jsx)("a",{className:r?"invisible":null,href:"#",onClick:r?null:function(t){return e.handleNavigate(t,e.props.currentPage-1)},children:"< Back"})}),Object(x.jsx)("div",{className:"col-auto",children:l}),Object(x.jsx)("div",{className:"col-auto p-0",children:Object(x.jsx)("a",{className:c?"invisible":null,href:"#",onClick:c?null:function(t){return e.handleNavigate(t,e.props.currentPage+1)},children:"More >"})})]})}))}}]),s}(n.Component);se.defaultProps={minPage:1,maxPage:Number.MAX_SAFE_INTEGER,numPageLinks:1};s(68);var ne=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).handleInputChange=n.handleInputChange.bind(Object(u.a)(n)),n.handleInputKeyDown=n.handleInputKeyDown.bind(Object(u.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(u.a)(n)),n.handleSearchButtonClick=n.handleSearchButtonClick.bind(Object(u.a)(n)),n.handleChooseButtonClick=n.handleChooseButtonClick.bind(Object(u.a)(n)),n.selectImage=n.selectImage.bind(Object(u.a)(n)),n.proxyUrl="https://ni8jay6n41.execute-api.us-west-2.amazonaws.com",n.searchBoxRef=a.a.createRef(),n.state={images:[],page:1,maxPage:1,searchString:"",isSearchStringValid:!0,isSearchLoading:!1,error:null,selectedImage:null},n}return Object(h.a)(s,[{key:"handleInputChange",value:function(e){this.setState({searchString:e.target.value})}},{key:"handleInputKeyDown",value:function(e){"Enter"===e.key&&(this.handleSearchButtonClick(),e.preventDefault())}},{key:"handlePageChange",value:function(e){var t=this;this.state.isSearchLoading||(e=C(e=Math.floor(e),1,10),requestAnimationFrame((function(){return t.searchBoxRef.current.scrollIntoView()})),this.state.images[e-1]?this.setState({page:e}):this.searchImages(e))}},{key:"handleSearchButtonClick",value:function(){var e=this;this.setState({images:[]},(function(){return e.searchImages(1)}))}},{key:"handleChooseButtonClick",value:function(){this.chooseImage(),this.props.toggleModal()}},{key:"selectImage",value:function(e){this.setState({selectedImage:e})}},{key:"getSearchUrl",value:function(e,t){return"".concat(this.proxyUrl,"/search/").concat(encodeURIComponent(e),"/page/").concat(t)}},{key:"getDownloadUrl",value:function(e){return"".concat(this.proxyUrl,"/download/").concat(e)}},{key:"addImages",value:function(e,t,s){var n=this.state.images.slice();n[t-1]=e;var a=Math.min(s,10);this.setState({images:n,page:t,maxPage:a})}},{key:"chooseImage",value:function(){var e=this.state.selectedImage,t=this.props.generateDefaultDimensions(e.width,e.height);this.props.setImage(new X("Unsplash Photo (".concat(e.id,")"),e.urls.regular,t.rows,t.cols,e.user.name,new J("Unsplash",!1,!0,e.links.html))),this.trackDownload(e.id)}},{key:"validateQuery",value:function(e){var t=e&&!/^\s*$/.test(e);return this.setState({isSearchStringValid:t}),t}},{key:"searchImages",value:function(e){var t=this,s=this.state.searchString;this.validateQuery(s)&&(this.setState({isSearchLoading:!0}),fetch(this.getSearchUrl(s,e)).then((function(e){if(!e.ok)throw console.warn("Proxy server returned an error: ".concat(e.status,", ").concat(e.statusText)),t.setState({error:new Z("proxy",e.status,e.statusText)}),new Error("Failed response: ".concat(e.status,", ").concat(e.statusText));return e.json()})).then((function(s){if(s.errors)throw console.warn("Upstream server returned an error (status code ".concat(s.status,"):\n                    ").concat(s.errors.join(", "))),t.setState({error:new Z("upstream",s.status,s.errors.join(", "))}),new Error("Upstream failed response (status code ".concat(s.status,"):\n                    ").concat(s.errors.join(", ")));t.setState({error:null}),t.addImages(s.response.results,e,s.response.total_pages)})).catch((function(e){e instanceof TypeError&&t.setState({error:new Z("network")}),console.warn("".concat(e.name,": ").concat(e.message))})).finally((function(){t.setState({isSearchLoading:!1})})))}},{key:"trackDownload",value:function(e){fetch(this.getDownloadUrl(e)).then((function(e){if(e.ok)return e.json();throw new Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){if("success"!==e.type)throw new Error("".concat(e.status," - ").concat(e.errors.join(", ")," (upstream)"))})).catch((function(t){return console.warn("Image ".concat(e," download failed. Error:"),t.message)}))}},{key:"render",value:function(){var e=this.state.images[this.state.page-1]&&this.state.images[this.state.page-1].length>0;return Object(x.jsxs)(W.a,{toggle:this.props.toggleModal,isOpen:this.props.isOpen,scrollable:!0,size:"lg",centered:!0,children:[Object(x.jsx)(A.a,{toggle:this.props.toggleModal,children:"Find images"}),Object(x.jsxs)(H.a,{children:[Object(x.jsx)("p",{children:"Browse images from Unsplash.com by searching below."}),Object(x.jsxs)("div",{className:"form-group row mx-0",ref:this.searchBoxRef,children:[Object(x.jsx)("label",{className:"col-form-label mr-2",htmlFor:"img-search-input",children:"Search by keyword"}),Object(x.jsx)("input",{className:"col col-lg-4 form-control ".concat(this.state.isSearchStringValid?"":"is-invalid"," px-2 mr-2"),id:"img-search-input",type:"text",value:this.state.searchString,"aria-describedby":"searchValidationFeedback",onKeyDown:this.handleInputKeyDown,onChange:this.handleInputChange}),Object(x.jsx)("button",{className:"btn btn-dark mr-auto",type:"button",onClick:this.handleSearchButtonClick,children:"Search"}),Object(x.jsx)("div",{className:"w-100 d-lg-none"}),Object(x.jsx)("div",{className:"col invalid-feedback align-self-center",id:"searchValidationFeedback",children:"Please enter a search term."})]}),Object(x.jsx)($,{error:this.state.error}),Object(x.jsx)(ee,{images:this.state.images,page:this.state.page-1,isLoading:this.state.isSearchLoading,selectedImage:this.state.selectedImage,chooseImage:this.selectImage})]}),Object(x.jsxs)(Q.a,{className:"flex-sm-nowrap",children:[e?Object(x.jsx)(se,{className:"mr-sm-3",currentPage:this.state.page,maxPage:this.state.maxPage,onPageChange:this.handlePageChange}):null,Object(x.jsx)("button",{className:"btn btn-dark flex-shrink-0",type:"button",disabled:!this.state.selectedImage,onClick:this.handleChooseButtonClick,children:"Use selected image"})]})]})}}]),s}(n.Component),ae=s.p+"static/media/ito-jakuchu-red-parrot-on-the-branch-of-a-tree.a8f36cd5.jpg",ie=s.p+"static/media/david-clode-eOSqRq2Qm1c-unsplash.42540cb6.jpg",oe=s.p+"static/media/casey-horner-80UR4DM2Rz0-unsplash.001ae9f7.jpg",re=s.p+"static/media/van-gogh-roses-nga.8fa9d120.jpg",ce=s.p+"static/media/scott-webb-lYzgtps0UtQ-unsplash.509dd0a5.jpg",le=s.p+"static/media/travel-sourced-FsmcD6uKcHk-unsplash.97041d06.jpg",he=[new X("Red Parrot on the Branch of a Tree",ae,6,8,"It\u014d Jakuch\u016b",new J("Metropolitan Museum of Art",!0,!1,"https://www.metmuseum.org/art/collection/search/57123"),"Red Parrot"),new X("Coral",ie,7,10,"David Clode",new J("Unsplash",!1,!0,"https://unsplash.com/photos/eOSqRq2Qm1c")),new X("Starry Sky",oe,7,10,"Casey Horner",new J("Unsplash",!1,!0,"https://unsplash.com/photos/80UR4DM2Rz0")),new X("Roses",re,8,10,"Vincent van Gogh",new J("National Gallery of Art",!0,!1,"https://www.nga.gov/collection/art-object-page.72328.html")),new X("Succulents",ce,8,5,"Scott Webb",new J("Unsplash",!1,!0,"https://unsplash.com/photos/lYzgtps0UtQ")),new X("Jellyfish",le,7,10,"Travel Sourced",new J("Unsplash",!1,!0,"https://unsplash.com/photos/FsmcD6uKcHk"))],ue=(s(69),function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).fileInput=a.a.createRef(),n.selectedPreset=he[0],n.userImage=null,n.useUserImage=n.useUserImage.bind(Object(u.a)(n)),n.usePresetImage=n.usePresetImage.bind(Object(u.a)(n)),n.setPresetImage=n.setPresetImage.bind(Object(u.a)(n)),n.setUnsplashImage=n.setUnsplashImage.bind(Object(u.a)(n)),n.handleSelectChange=n.handleSelectChange.bind(Object(u.a)(n)),n.handleFileChange=n.handleFileChange.bind(Object(u.a)(n)),n.handleRadioKeyDown=n.handleRadioKeyDown.bind(Object(u.a)(n)),n.generateDefaultDimensions=n.generateDefaultDimensions.bind(Object(u.a)(n)),n.toggleModal=n.toggleModal.bind(Object(u.a)(n)),n.state={selectedOption:"preset0",usingUserImage:!1,invalidUserImage:!1,unsplashImage:null,modalOpen:!1},n}return Object(h.a)(s,[{key:"usePresetImage",value:function(){this.setState({usingUserImage:!1}),this.props.setSelectedImage(this.selectedPreset)}},{key:"useUserImage",value:function(){this.setState({usingUserImage:!0}),this.props.setSelectedImage(this.userImage)}},{key:"setPresetImage",value:function(e){this.selectedPreset=e,this.props.setSelectedImage(e)}},{key:"setUnsplashImage",value:function(e){this.setState({unsplashImage:e,selectedOption:"unsplash"}),this.setPresetImage(e)}},{key:"handleRadioKeyDown",value:function(e){switch(e.key){case"ArrowLeft":case"ArrowUp":case"Left":case"Up":return void("radioBtn2"===e.target.id&&(document.getElementById("radioBtn1").focus(),e.preventDefault()));case"ArrowRight":case"ArrowDown":case"Down":case"Right":return void("radioBtn1"===e.target.id&&(document.getElementById("radioBtn2").focus(),e.preventDefault()))}}},{key:"handleSelectChange",value:function(e){this.usePresetImage();var t=e.target;t.selectedIndex===t.length-1?this.toggleModal():t.selectedIndex===t.length-2&&this.state.unsplashImage?(this.setPresetImage(this.state.unsplashImage),this.setState({selectedOption:"unsplash"})):-1!==t.selectedIndex&&(this.setPresetImage(he[t.selectedIndex]),this.setState({selectedOption:"preset"+t.selectedIndex}))}},{key:"handleFileChange",value:function(){var e=this;this.useUserImage();var t=this.fileInput.current.files[0],s=URL.createObjectURL(t),n=new Image;n.onerror=function(){URL.revokeObjectURL(s),e.userImage&&URL.revokeObjectURL(e.userImage.url),e.userImage=null,e.setState({invalidUserImage:!0}),e.props.setSelectedImage(null)},n.onload=function(){e.userImage&&URL.revokeObjectURL(e.userImage.url);var a=e.generateDefaultDimensions(n.naturalWidth,n.naturalHeight);e.userImage=new X(t.name,s,a.rows,a.cols),e.setState({invalidUserImage:!1}),e.props.setSelectedImage(e.userImage)},n.src=s}},{key:"generateDefaultDimensions",value:function(e,t){var s=this.props.minPuzzleDimension,n=e/t,a=C(Math.round(12/(n+1)),s,12-s);return{rows:a,cols:12-a}}},{key:"toggleModal",value:function(){this.setState({modalOpen:!this.state.modalOpen})}},{key:"renderSelectOptions",value:function(){for(var e=[],t=0;t<he.length;t++){var s=he[t];e.push(Object(x.jsx)("option",{value:"preset"+t,children:s.shortName},t))}return e.push(Object(x.jsx)("option",{disabled:!0,children:"\u2015\u2015\u2015\u2015\u2015\u2015\u2015"},-1)),this.state.unsplashImage&&e.push(Object(x.jsx)("option",{value:"unsplash",children:"Unsplash photo by ".concat(this.state.unsplashImage.author)},-2)),e.push(Object(x.jsx)("option",{children:"More..."},-3)),e}},{key:"render",value:function(){var e=this.state.usingUserImage?"btn-outline-dark":"btn-dark",t=this.state.usingUserImage?"btn-dark":"btn-outline-dark";return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"input-group",children:[Object(x.jsx)("div",{className:"input-group-prepend col-12 col-lg-6 pr-lg-0",children:Object(x.jsxs)("div",{className:"btn ".concat(e," d-flex flex-wrap flex-sm-nowrap align-items-center w-100 br-when-stacked"),onClick:this.usePresetImage,children:[Object(x.jsx)("input",{readOnly:!0,className:"col-auto",id:"radioBtn1",type:"radio",checked:!this.state.usingUserImage,onKeyDown:this.handleRadioKeyDown}),Object(x.jsx)("label",{className:"col col-sm-4 col-md-3 col-lg-auto col-form-label",htmlFor:"radioBtn1",children:"Choose an image:"}),Object(x.jsx)("div",{className:"w-100 d-sm-none"}),Object(x.jsx)("label",{className:"sr-only",htmlFor:"puzzle-image-select",children:"Select image"}),Object(x.jsx)("select",{className:"custom-select col mr-lg-4",id:"puzzle-image-select",value:this.state.selectedOption,onChange:this.handleSelectChange,children:this.renderSelectOptions()})]})}),Object(x.jsx)("div",{className:"input-group-append col-12 col-lg-6 pl-lg-0",children:Object(x.jsxs)("div",{className:"btn ".concat(t," d-flex flex-wrap flex-sm-nowrap align-items-center w-100 br-when-stacked"),onClick:this.useUserImage,children:[Object(x.jsx)("input",{readOnly:!0,className:"col-auto order-first order-lg-last ml-lg-3",id:"radioBtn2",type:"radio",checked:this.state.usingUserImage,onKeyDown:this.handleRadioKeyDown}),Object(x.jsx)("label",{className:"col col-sm-4 col-md-3 col-lg-auto col-form-label",htmlFor:"radioBtn2",children:"Or use your own:"}),Object(x.jsx)("div",{className:"w-100 d-sm-none"}),Object(x.jsx)(Y.a,{className:"col text-left",id:"file-input",type:"file",accept:"image/*",innerRef:this.fileInput,invalid:this.state.invalidUserImage,onChange:this.handleFileChange}),Object(x.jsx)("a",{className:"unstyled ml-2",id:"show-tooltip",href:"#",onClick:function(e){e.preventDefault(),e.stopPropagation()},children:Object(x.jsx)("i",{className:"bi-info-circle icon-lg"})})]})})]}),Object(x.jsx)(_.a,{placement:"top",target:"show-tooltip",children:"Images are only used locally in your browser and are never uploaded or sent over the Internet."}),Object(x.jsx)(ne,{toggleModal:this.toggleModal,isOpen:this.state.modalOpen,setImage:this.setUnsplashImage,generateDefaultDimensions:this.generateDefaultDimensions})]})}}]),s}(n.Component)),de=s(95),pe=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).handleDimensionsChange=n.handleDimensionsChange.bind(Object(u.a)(n)),n.handleDimensionsBlur=n.handleDimensionsBlur.bind(Object(u.a)(n)),n.handleColorChange=n.handleColorChange.bind(Object(u.a)(n)),n.state={},n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=document.documentElement.style.getPropertyValue("--puzzle-bg");this.setState({color:e||"#adb5bd"})}},{key:"handleDimensionsChange",value:function(e){this.props.setDimension(e.target.name,e.target.valueAsNumber)}},{key:"handleDimensionsBlur",value:function(e){this.props.setDimension(e.target.name,this.validateDimension(e.target.value))}},{key:"handleColorChange",value:function(e){var t=e.target.value;this.setState({color:t}),document.documentElement.style.setProperty("--puzzle-bg",t)}},{key:"validateDimension",value:function(e){var t=parseInt(e,10);return isNaN(t)||t<this.props.minPuzzleDimension?t=this.props.minPuzzleDimension:t>this.props.maxPuzzleDimension&&(t=this.props.maxPuzzleDimension),t}},{key:"render",value:function(){var e=isNaN(this.props.rows)?"":this.props.rows,t=isNaN(this.props.cols)?"":this.props.cols;return Object(x.jsxs)(W.a,{toggle:this.props.toggleModal,isOpen:this.props.isOpen,centered:!0,children:[Object(x.jsx)(A.a,{toggle:this.props.toggleModal,children:"Settings"}),Object(x.jsx)(H.a,{children:Object(x.jsxs)("form",{className:"container",children:[Object(x.jsxs)("div",{className:"form-group row mb-4",children:[Object(x.jsx)("label",{className:"col-form-label mr-2 my-2",htmlFor:"row-input",children:"Rows:"}),Object(x.jsx)("input",{className:"mr-2 my-2",id:"row-input",type:"number",min:this.props.minPuzzleDimension,max:this.props.maxPuzzleDimension,name:"rows",value:e,onChange:this.handleDimensionsChange,onBlur:this.handleDimensionsBlur}),Object(x.jsx)("label",{className:"col-form-label mr-2 my-2",htmlFor:"col-input",children:"Columns:"}),Object(x.jsx)("input",{className:"mr-2 my-2",id:"col-input",type:"number",min:this.props.minPuzzleDimension,max:this.props.maxPuzzleDimension,name:"cols",value:t,onChange:this.handleDimensionsChange,onBlur:this.handleDimensionsBlur}),Object(x.jsx)("small",{className:"col text-muted",children:"Changes to rows and columns take effect the next time a new puzzle is started."})]}),Object(x.jsxs)("div",{className:"form-group row mb-4",children:[Object(x.jsx)("label",{className:"col-auto col-form-label pl-0",htmlFor:"color-input",children:"Background color:"}),Object(x.jsx)(de.a,{className:"col",id:"color-input",type:"color",value:this.state.color,onChange:this.handleColorChange})]}),Object(x.jsx)("div",{className:"form-group row justify-content-end",children:Object(x.jsx)("button",{className:"btn btn-dark btn-lg px-4",type:"button",onClick:this.props.toggleModal,children:"Done"})})]})})]})}}]),s}(n.Component),ge=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).toggleModal=n.toggleModal.bind(Object(u.a)(n)),n.setSelectedImage=n.setSelectedImage.bind(Object(u.a)(n)),n.setDimension=n.setDimension.bind(Object(u.a)(n)),n.newPuzzle=n.newPuzzle.bind(Object(u.a)(n)),n.state={modalOpen:!1,selectedImage:he[0],rows:he[0].defaultRows,cols:he[0].defaultCols},n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){this.newPuzzle()}},{key:"toggleModal",value:function(){this.setState((function(e){return{modalOpen:!e.modalOpen}}))}},{key:"setSelectedImage",value:function(e){if(e!==this.state.selectedImage){var t=e?e.defaultRows:this.state.rows,s=e?e.defaultCols:this.state.cols;this.setState({selectedImage:e,rows:t,cols:s})}}},{key:"setDimension",value:function(e,t){this.setState(Object(g.a)({},e,t))}},{key:"newPuzzle",value:function(){var e=this;if(this.state.selectedImage){var t=this.state.selectedImage;document.documentElement.style.setProperty("--puzzle-img","url(".concat(t.url,")"));var s=new Image;s.onerror=function(){return console.log("Failed to load image")},s.onload=function(){return e.props.newPuzzle(s.naturalWidth,s.naturalHeight,e.state.rows,e.state.cols,t)},s.src=t.url}}},{key:"render",value:function(){return Object(x.jsxs)("div",{className:"container mt-4",children:[Object(x.jsx)("div",{className:"row mb-3",children:Object(x.jsx)(ue,{setSelectedImage:this.setSelectedImage,minPuzzleDimension:2})}),Object(x.jsxs)("div",{className:"row justify-content-center align-items-end mx-n1",children:[Object(x.jsx)("div",{className:"col d-none d-md-block px-2"}),Object(x.jsx)("div",{className:"col-auto px-2",children:Object(x.jsx)("button",{className:"btn btn-dark btn-lg px-4",type:"button",onClick:this.newPuzzle,disabled:!this.state.selectedImage,children:"New puzzle"})}),Object(x.jsx)("div",{className:"col-auto col-md px-2",children:Object(x.jsxs)("button",{className:"btn btn-outline-dark",type:"button",onClick:this.toggleModal,children:[Object(x.jsx)("i",{className:"bi bi-gear-fill pr-2"}),"Settings"]})}),Object(x.jsx)(pe,{toggleModal:this.toggleModal,isOpen:this.state.modalOpen,rows:this.state.rows,cols:this.state.cols,setDimension:this.setDimension,minPuzzleDimension:2,maxPuzzleDimension:25})]})]})}}]),s}(n.Component),me=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(x.jsxs)(W.a,{isOpen:this.props.isOpen,toggle:this.props.toggle,centered:!0,children:[Object(x.jsx)(A.a,{toggle:this.props.toggle,children:"Browser compatibility"}),Object(x.jsxs)(H.a,{children:[Object(x.jsxs)("p",{children:["For the best experience, it's recommended to view this website in a recent version of ",Object(x.jsx)("b",{children:"Firefox"}),", ",Object(x.jsx)("b",{children:"Chrome"}),", or ",Object(x.jsx)("b",{children:"Edge"})," on desktop,"," ","or ",Object(x.jsx)("b",{children:"Chrome"})," on mobile."]}),Object(x.jsxs)("p",{children:["Safari is mostly supported, but there is an issue where the clickable area of each puzzle piece extends past the visible image"," ","(due to the clip-path property not masking the mouse hit area)."]}),Object(x.jsx)("p",{children:"This site does not work in Internet Explorer."})]})]})}}]),s}(n.Component),be=function(e){Object(d.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).toggleModal=n.toggleModal.bind(Object(u.a)(n)),n.state={modalOpen:!1},n}return Object(h.a)(s,[{key:"toggleModal",value:function(){this.setState({modalOpen:!this.state.modalOpen})}},{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("i",{className:"bi bi-list-check text-light mr-2"}),Object(x.jsx)("a",{className:"text-light",href:"#",onClick:this.toggleModal,children:Object(x.jsx)("small",{className:"align-text-top",children:"Browser support"})}),Object(x.jsx)(me,{toggle:this.toggleModal,isOpen:this.state.modalOpen})]})}}]),s}(n.Component),je=(s(85),s(86),s(87),1);o.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(ge,{newPuzzle:function e(t,s,n,i,r){o.a.render(Object(x.jsxs)(a.a.StrictMode,{children:[Object(x.jsx)(ge,{newPuzzle:e}),Object(x.jsx)(q,{puzzleImage:r}),Object(x.jsx)(F,{imgUrl:r.url,imgWidth:t,imgHeight:s,rows:n,cols:i},++je)]}),document.getElementById("react-root"))}})}),document.getElementById("react-root")),o.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(be,{})}),document.getElementById("compatibility-info-root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.00e6985e.chunk.js.map